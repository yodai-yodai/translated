
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data validation using Python type hints">
      
      
      
        <link rel="canonical" href="https://docs.pydantic.dev/concepts/pydantic_settings/">
      
      
        <link rel="prev" href="../conversion_table/">
      
      
        <link rel="next" href="../performance/">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.28">
    
    
      
        <title>Settings Management - Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../extra/terminal.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="grey">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#description-support-for-loading-a-settings-or-config-class-from-environment-variables-or-secrets-files" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" class="md-header__button md-logo" aria-label="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Settings Management
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="grey"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="grey"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../models/" class="md-tabs__link">
          
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/base_model/" class="md-tabs__link">
          
  
  API Documentation

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/secrets/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../errors/errors/" class="md-tabs__link">
          
  
  Error Messages

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../integrations/mypy/" class="md-tabs__link">
          
  
  Integrations

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://blog.pydantic.dev/" class="md-tabs__link">
        
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../pydantic_people/" class="md-tabs__link">
        
  
    
  
  Pydantic People

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" class="md-nav__button md-logo" aria-label="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why use Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help_with_pydantic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help with Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../version-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alias/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alias
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serialization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../postponed_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Postponed Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../strict_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Strict Mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type Adapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation_decorator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation Decorator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conversion_table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversion Table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Settings Management
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Settings Management
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description-support-for-loading-a-settings-or-config-class-from-environment-variables-or-secrets-files" class="md-nav__link">
    <span class="md-ellipsis">
      description: Support for loading a settings or config class from environment variables or secrets files.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings-management" class="md-nav__link">
    <span class="md-ellipsis">
      Settings Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Settings Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation-of-default-values" class="md-nav__link">
    <span class="md-ellipsis">
      Validation of default values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variable-names" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variable names
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment variable names">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case-sensitivity" class="md-nav__link">
    <span class="md-ellipsis">
      Case-sensitivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsing-environment-variable-values" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing environment variable values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dotenv-env-support" class="md-nav__link">
    <span class="md-ellipsis">
      Dotenv (.env) support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command-line-support" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Command Line Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-basics" class="md-nav__link">
    <span class="md-ellipsis">
      The Basics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    <span class="md-ellipsis">
      Lists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionaries" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#literals-and-enums" class="md-nav__link">
    <span class="md-ellipsis">
      Literals and Enums
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Aliases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subcommands-and-positional-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Subcommands and Positional Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-the-cli-experience" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing the CLI Experience
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing the CLI Experience">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-the-displayed-program-name" class="md-nav__link">
    <span class="md-ellipsis">
      Change the Displayed Program Name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-whether-cli-should-exit-on-error" class="md-nav__link">
    <span class="md-ellipsis">
      Change Whether CLI Should Exit on Error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforce-required-arguments-at-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Enforce Required Arguments at CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-the-none-type-parse-string" class="md-nav__link">
    <span class="md-ellipsis">
      Change the None Type Parse String
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hide-none-type-values" class="md-nav__link">
    <span class="md-ellipsis">
      Hide None Type Values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-adding-json-cli-options" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid Adding JSON CLI Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-class-docstring-for-group-help-text" class="md-nav__link">
    <span class="md-ellipsis">
      Use Class Docstring for Group Help Text
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-existing-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      Integrating with Existing Parsers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Secrets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-docker-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Docker Secrets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-key-vault" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Key Vault
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-settings-source" class="md-nav__link">
    <span class="md-ellipsis">
      Other settings source
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other settings source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyprojecttoml" class="md-nav__link">
    <span class="md-ellipsis">
      pyproject.toml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-value-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Field value priority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customise-settings-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Customise settings sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customise settings sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Changing Priority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Adding sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accesing-the-result-of-previous-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Accesing the result of previous sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Removing sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-place-reloading" class="md-nav__link">
    <span class="md-ellipsis">
      In-place reloading
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Pydantic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/base_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/root_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RootModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/type_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TypeAdapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/validate_call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validate Call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/aliases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aliases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_serializers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Serializers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/standard_library_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard Library Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/annotated_handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotated Handlers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic Core
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_core.core_schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic Extra Types
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Extra Types
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_color/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Color
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_country/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Country
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_payment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Payment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_phone_numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Phone Numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_routing_numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routing Numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_coordinate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coordinate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_mac_address/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mac Address
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_isbn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ISBN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_pendulum_dt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pendulum
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_currency_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Currency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_language_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_script_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Script Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_semantic_version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semantic Version
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_timezone_name/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timezone Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_ulid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ULID
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/secrets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secrets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Error Messages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Error Messages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error Handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/validation_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/usage_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Errors
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dev Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Dev Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mypy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/pycharm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyCharm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/hypothesis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hypothesis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/visual_studio_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visual Studio Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/datamodel_code_generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    datamodel-code-generator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/devtools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    devtools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/rich/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rich
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/linting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Production Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Production Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/aws_lambda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Lambda
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://blog.pydantic.dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic_people/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic People
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description-support-for-loading-a-settings-or-config-class-from-environment-variables-or-secrets-files" class="md-nav__link">
    <span class="md-ellipsis">
      description: Support for loading a settings or config class from environment variables or secrets files.
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings-management" class="md-nav__link">
    <span class="md-ellipsis">
      Settings Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Settings Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation-of-default-values" class="md-nav__link">
    <span class="md-ellipsis">
      Validation of default values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variable-names" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variable names
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment variable names">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case-sensitivity" class="md-nav__link">
    <span class="md-ellipsis">
      Case-sensitivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsing-environment-variable-values" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing environment variable values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dotenv-env-support" class="md-nav__link">
    <span class="md-ellipsis">
      Dotenv (.env) support
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#command-line-support" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Command Line Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-basics" class="md-nav__link">
    <span class="md-ellipsis">
      The Basics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    <span class="md-ellipsis">
      Lists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionaries" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#literals-and-enums" class="md-nav__link">
    <span class="md-ellipsis">
      Literals and Enums
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Aliases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subcommands-and-positional-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Subcommands and Positional Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-the-cli-experience" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing the CLI Experience
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing the CLI Experience">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#change-the-displayed-program-name" class="md-nav__link">
    <span class="md-ellipsis">
      Change the Displayed Program Name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-whether-cli-should-exit-on-error" class="md-nav__link">
    <span class="md-ellipsis">
      Change Whether CLI Should Exit on Error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforce-required-arguments-at-cli" class="md-nav__link">
    <span class="md-ellipsis">
      Enforce Required Arguments at CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-the-none-type-parse-string" class="md-nav__link">
    <span class="md-ellipsis">
      Change the None Type Parse String
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hide-none-type-values" class="md-nav__link">
    <span class="md-ellipsis">
      Hide None Type Values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-adding-json-cli-options" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid Adding JSON CLI Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-class-docstring-for-group-help-text" class="md-nav__link">
    <span class="md-ellipsis">
      Use Class Docstring for Group Help Text
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrating-with-existing-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      Integrating with Existing Parsers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Secrets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Secrets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-case-docker-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case: Docker Secrets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-key-vault" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Key Vault
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-settings-source" class="md-nav__link">
    <span class="md-ellipsis">
      Other settings source
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other settings source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyprojecttoml" class="md-nav__link">
    <span class="md-ellipsis">
      pyproject.toml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#field-value-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Field value priority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customise-settings-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Customise settings sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customise settings sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-priority" class="md-nav__link">
    <span class="md-ellipsis">
      Changing Priority
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Adding sources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding sources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accesing-the-result-of-previous-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Accesing the result of previous sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-sources" class="md-nav__link">
    <span class="md-ellipsis">
      Removing sources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-place-reloading" class="md-nav__link">
    <span class="md-ellipsis">
      In-place reloading
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                  

  
  


<!-- BEGIN INCLUDE ../warning.md -->

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>本サイトのドキュメントは、<a href="https://docs.pydantic.dev/latest/">Pydantic</a>の日本語翻訳の私家版です。</p>
<p>内容に不審な点がある場合は、<a href="https://docs.pydantic.dev/latest/">Pydantic</a>のドキュメントを確認してください。</p>
<p>翻訳に使用したPydanticのバージョンは、v2.8.2になります。</p>
</div>
<!-- END INCLUDE -->

<hr />
<h2 id="description-support-for-loading-a-settings-or-config-class-from-environment-variables-or-secrets-files">description: Support for loading a settings or config class from environment variables or secrets files.<a class="headerlink" href="#description-support-for-loading-a-settings-or-config-class-from-environment-variables-or-secrets-files" title="Permanent link">&para;</a></h2>
<h1 id="settings-management">Settings Management<a class="headerlink" href="#settings-management" title="Permanent link">&para;</a></h1>
<p><a href="https://github.com/pydantic/pydantic-settings">Pydantic Settings</a> provides optional Pydantic features for loading a settings or config class from environment variables or secrets files.</p>
<!-- ## Installation

Installation is as simple as:

<div class="language-bash highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>pydantic-settings
</code></pre></div>

## Usage

If you create a model that inherits from `BaseSettings`, the model initialiser will attempt to determine
the values of any fields not passed as keyword arguments by reading from the environment. (Default values
will still be used if the matching environment variable is not set.)

This makes it easy to:

* Create a clearly-defined, type-hinted application configuration class
* Automatically read modifications to the configuration from environment variables
* Manually override specific settings in the initialiser where desired (e.g. in unit tests)

For example:

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Set</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AliasChoices</span><span class="p">,</span>
    <span class="n">AmqpDsn</span><span class="p">,</span>
    <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">Field</span><span class="p">,</span>
    <span class="n">ImportString</span><span class="p">,</span>
    <span class="n">PostgresDsn</span><span class="p">,</span>
    <span class="n">RedisDsn</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
    <span class="n">apple</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">auth_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">validation_alias</span><span class="o">=</span><span class="s1">&#39;my_auth_key&#39;</span><span class="p">)</span>  <span class="c1"># (1)!</span>

    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;my_api_key&#39;</span><span class="p">)</span>  <span class="c1"># (2)!</span>

    <span class="n">redis_dsn</span><span class="p">:</span> <span class="n">RedisDsn</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="s1">&#39;redis://user:pass@localhost:6379/1&#39;</span><span class="p">,</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;service_redis_dsn&#39;</span><span class="p">,</span> <span class="s1">&#39;redis_url&#39;</span><span class="p">),</span>  <span class="c1"># (3)!</span>
    <span class="p">)</span>
    <span class="n">pg_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span> <span class="o">=</span> <span class="s1">&#39;postgres://user:pass@localhost:5432/foobar&#39;</span>
    <span class="n">amqp_dsn</span><span class="p">:</span> <span class="n">AmqpDsn</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@localhost:5672/&#39;</span>

    <span class="n">special_function</span><span class="p">:</span> <span class="n">ImportString</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;math.cos&#39;</span>  <span class="c1"># (4)!</span>

    <span class="c1"># to override domains:</span>
    <span class="c1"># export my_prefix_domains=&#39;[&quot;foo.com&quot;, &quot;bar.com&quot;]&#39;</span>
    <span class="n">domains</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># to override more_settings:</span>
    <span class="c1"># export my_prefix_more_settings=&#39;{&quot;foo&quot;: &quot;x&quot;, &quot;apple&quot;: 1}&#39;</span>
    <span class="n">more_settings</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">SubModel</span><span class="p">()</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>  <span class="c1"># (5)!</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;auth_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;api_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;redis_dsn&#39;: Url(&#39;redis://user:pass@localhost:6379/1&#39;),</span>
<span class="sd">    &#39;pg_dsn&#39;: MultiHostUrl(&#39;postgres://user:pass@localhost:5432/foobar&#39;),</span>
<span class="sd">    &#39;amqp_dsn&#39;: Url(&#39;amqp://user:pass@localhost:5672/&#39;),</span>
<span class="sd">    &#39;special_function&#39;: math.cos,</span>
<span class="sd">    &#39;domains&#39;: set(),</span>
<span class="sd">    &#39;more_settings&#39;: {&#39;foo&#39;: &#39;bar&#39;, &#39;apple&#39;: 1},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>

1. The environment variable name is overridden using `validation_alias`. In this case, the environment variable
   `my_auth_key` will be read instead of `auth_key`.

    Check the [`Field` documentation](fields.md) for more information.

2. The environment variable name is overridden using `alias`. In this case, the environment variable
   `my_api_key` will be used for both validation and serialization instead of `api_key`.

   Check the [`Field` documentation](fields.md#field-aliases) for more information.

3. The `AliasChoices` class allows to have multiple environment variable names for a single field.
   The first environment variable that is found will be used.

    Check the [`AliasChoices`](alias.md#aliaspath-and-aliaschoices) for more information.

4. The `ImportString` class allows to import an object from a string.
   In this case, the environment variable `special_function` will be read and the function `math.cos` will be imported.

5. The `env_prefix` config setting allows to set a prefix for all environment variables.

    Check the [Environment variable names documentation](#environment-variable-names) for more information.

## Validation of default values

Unlike pydantic `BaseModel`, default values of `BaseSettings` fields are validated by default.
You can disable this behaviour by setting `validate_default=False` either in `model_config`
or on field level by `Field(validate_default=False)`:

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">validate_default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># default won&#39;t be validated</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">())</span>
<span class="c1">#&gt; foo=&#39;test&#39;</span>


<span class="k">class</span> <span class="nc">Settings1</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="c1"># default won&#39;t be validated</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">validate_default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings1</span><span class="p">())</span>
<span class="c1">#&gt; foo=&#39;test&#39;</span>
</code></pre></div>

Check the [Validation of default values](validators.md#validation-of-default-values) for more information.

## Environment variable names

By default, the environment variable name is the same as the field name.

You can change the prefix for all environment variables by setting the `env_prefix` config setting,
or via the `_env_prefix` keyword argument on instantiation:

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>

    <span class="n">auth_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;xxx&#39;</span>  <span class="c1"># will be read from `my_prefix_auth_key`</span>
</code></pre></div>

!!! note
    The default `env_prefix` is `''` (empty string).

If you want to change the environment variable name for a single field, you can use an alias.

There are two ways to do this:

* Using `Field(alias=...)` (see `api_key` above)
* Using `Field(validation_alias=...)` (see `auth_key` above)

Check the [`Field` aliases documentation](fields.md#field-aliases) for more information about aliases.

`env_prefix` does not apply to fields with alias. It means the environment variable name is the same
as field alias:

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>

    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;xxx&#39;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;FooAlias&#39;</span><span class="p">)</span>  <span class="c1"># (1)!</span>
</code></pre></div>

1. `env_prefix` will be ignored and the value will be read from `FooAlias` environment variable.

### Case-sensitivity

By default, environment variable names are case-insensitive.

If you want to make environment variable names case-sensitive, you can set the `case_sensitive` config setting:

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">redis_host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span>
</code></pre></div>

When `case_sensitive` is `True`, the environment variable names must match field names (optionally with a prefix),
so in this example `redis_host` could only be modified via `export redis_host`. If you want to name environment variables
all upper-case, you should name attribute all upper-case too. You can still name environment variables anything
you like through `Field(validation_alias=...)`.

Case-sensitivity can also be set via the `_case_sensitive` keyword argument on instantiation.

In case of nested models, the `case_sensitive` setting will be applied to all nested models.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">RedisSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">redis</span><span class="p">:</span> <span class="n">RedisSettings</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;redis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;{&quot;host&quot;: &quot;localhost&quot;, &quot;port&quot;: 6379}&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;redis&#39;: {&#39;host&#39;: &#39;localhost&#39;, &#39;port&#39;: 6379}}</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;redis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;{&quot;HOST&quot;: &quot;localhost&quot;, &quot;port&quot;: 6379}&#39;</span>  <span class="c1"># (1)!</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Settings</span>
<span class="sd">    redis.host</span>
<span class="sd">      Field required [type=missing, input_value={&#39;HOST&#39;: &#39;localhost&#39;, &#39;port&#39;: 6379}, input_type=dict]</span>
<span class="sd">        For further information visit https://errors.pydantic.dev/2/v/missing</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>

1. Note that the `host` field is not found because the environment variable name is `HOST` (all upper-case).

!!! note
    On Windows, Python's `os` module always treats environment variables as case-insensitive, so the
    `case_sensitive` config setting will have no effect - settings will always be updated ignoring case.

## Parsing environment variable values

By default environment variables are parsed verbatim, including if the value is empty. You can choose to
ignore empty environment variables by setting the `env_ignore_empty` config setting to `True`. This can be
useful if you would prefer to use the default value for a field rather than an empty value from the
environment.

For most simple field types (such as `int`, `float`, `str`, etc.), the environment variable value is parsed
the same way it would be if passed directly to the initialiser (as a string).

Complex types like `list`, `set`, `dict`, and sub-models are populated from the environment by treating the
environment variable's value as a JSON-encoded string.

Another way to populate nested complex variables is to configure your model with the `env_nested_delimiter`
config setting, then use an environment variable with a name pointing to the nested module fields.
What it does is simply explodes your variable into nested models or dicts.
So if you define a variable `FOO__BAR__BAZ=123` it will convert it into `FOO={'BAR': {'BAZ': 123}}`
If you have multiple variables with the same structure they will be merged.

!!! note
    Sub model has to inherit from `pydantic.BaseModel`, Otherwise `pydantic-settings` will initialize sub model,
    collects values for sub model fields separately, and you may get unexpected results.

As an example, given the following environment variables:
<div class="language-bash highlight"><pre><span></span><code><span class="c1"># your environment</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">V0</span><span class="o">=</span><span class="m">0</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL</span><span class="o">=</span><span class="s1">&#39;{&quot;v1&quot;: &quot;json-1&quot;, &quot;v2&quot;: &quot;json-2&quot;}&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__V2</span><span class="o">=</span>nested-2
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__V3</span><span class="o">=</span><span class="m">3</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__DEEP__V4</span><span class="o">=</span>v4
</code></pre></div>

You could load them into the following settings model:

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">DeepSubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>  <span class="c1"># (1)!</span>
    <span class="n">v4</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>  <span class="c1"># (2)!</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">v2</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">v3</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">deep</span><span class="p">:</span> <span class="n">DeepSubModel</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">)</span>

    <span class="n">v0</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;v0&#39;: &#39;0&#39;,</span>
<span class="sd">    &#39;sub_model&#39;: {&#39;v1&#39;: &#39;json-1&#39;, &#39;v2&#39;: b&#39;nested-2&#39;, &#39;v3&#39;: 3, &#39;deep&#39;: {&#39;v4&#39;: &#39;v4&#39;}},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>

1. Sub model has to inherit from `pydantic.BaseModel`.

2. Sub model has to inherit from `pydantic.BaseModel`.

`env_nested_delimiter` can be configured via the `model_config` as shown above, or via the
`_env_nested_delimiter` keyword argument on instantiation.

Nested environment variables take precedence over the top-level environment variable JSON
(e.g. in the example above, `SUB_MODEL__V2` trumps `SUB_MODEL`).

You may also populate a complex type by providing your own source class.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">EnvSettingsSource</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">MyCustomSource</span><span class="p">(</span><span class="n">EnvSettingsSource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">prepare_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">value_is_complex</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s1">&#39;numbers&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">numbers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">MyCustomSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1,2,3&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;numbers&#39;: [1, 2, 3]}</span>
</code></pre></div>

## Dotenv (.env) support

Dotenv files (generally named `.env`) are a common pattern that make it easy to use environment variables in a
platform-independent manner.

A dotenv file follows the same general principles of all environment variables, and it looks like this:

<div class="language-bash highlight"><span class="filename">.env</span><pre><span></span><code><span class="c1"># ignore comment</span>
<span class="nv">ENVIRONMENT</span><span class="o">=</span><span class="s2">&quot;production&quot;</span>
<span class="nv">REDIS_ADDRESS</span><span class="o">=</span>localhost:6379
<span class="nv">MEANING_OF_LIFE</span><span class="o">=</span><span class="m">42</span>
<span class="nv">MY_VAR</span><span class="o">=</span><span class="s1">&#39;Hello world&#39;</span>
</code></pre></div>

Once you have your `.env` file filled with variables, *pydantic* supports loading it in two ways:

1. Setting the `env_file` (and `env_file_encoding` if you don't want the default encoding of your OS) on `model_config`
in the `BaseSettings` class:
   <div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span></code></pre></div>
2. Instantiating the `BaseSettings` derived class with the `_env_file` keyword argument
(and the `_env_file_encoding` if needed):
   <div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>


<span class="hll"><span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="n">_env_file</span><span class="o">=</span><span class="s1">&#39;prod.env&#39;</span><span class="p">,</span> <span class="n">_env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span></code></pre></div>
In either case, the value of the passed argument can be any valid path or filename, either absolute or relative to the
current working directory. From there, *pydantic* will handle everything for you by loading in your variables and
validating them.

!!! note
    If a filename is specified for `env_file`, Pydantic will only check the current working directory and
    won't check any parent directories for the `.env` file.

Even when using a dotenv file, *pydantic* will still read environment variables as well as the dotenv file,
**environment variables will always take priority over values loaded from a dotenv file**.

Passing a file path via the `_env_file` keyword argument on instantiation (method 2) will override
the value (if any) set on the `model_config` class. If the above snippets were used in conjunction, `prod.env` would be loaded
while `.env` would be ignored.

If you need to load multiple dotenv files, you can pass multiple file paths as a tuple or list. The files will be
loaded in order, with each file overriding the previous one.

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="c1"># `.env.prod` takes priority over `.env`</span>
        <span class="n">env_file</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="s1">&#39;.env.prod&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>

You can also use the keyword argument override to tell Pydantic not to load any file at all (even if one is set in
the `model_config` class) by passing `None` as the instantiation keyword argument, e.g. `settings = Settings(_env_file=None)`.

Because python-dotenv is used to parse the file, bash-like semantics such as `export` can be used which
(depending on your OS and environment) may allow your dotenv file to also be used with `source`,
see [python-dotenv's documentation](https://saurabh-kumar.com/python-dotenv/#usages) for more details.

Pydantic settings consider `extra` config in case of dotenv file. It means if you set the `extra=forbid` (*default*)
on `model_config` and your dotenv file contains an entry for a field that is not defined in settings model,
it will raise `ValidationError` in settings construction.

For compatibility with pydantic 1.x BaseSettings you should use `extra=ignore`:
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</code></pre></div>


!!! note
    Pydantic settings loads all the values from dotenv file and passes it to the model, regardless of the model's `env_prefix`.
    So if you provide extra values in a dotenv file, whether they start with `env_prefix` or not,
    a `ValidationError` will be raised.

## Command Line Support

Pydantic settings provides integrated CLI support, making it easy to quickly define CLI applications using Pydantic
models. There are two primary use cases for Pydantic settings CLI:

1. When using a CLI to override fields in Pydantic models.
2. When using Pydantic models to define CLIs.

By default, the experience is tailored towards use case #1 and builds on the foundations established in [parsing
environment variables](#parsing-environment-variable-values). If your use case primarily falls into #2, you will likely
want to enable [enforcing required arguments at the CLI](#enforce-required-arguments-at-cli).

### The Basics

To get started, let's revisit the example presented in [parsing environment
variables](#parsing-environment-variable-values) but using a Pydantic settings CLI:

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">DeepSubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v4</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">v2</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">v3</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">deep</span><span class="p">:</span> <span class="n">DeepSubModel</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">v0</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;example.py&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--v0=0&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model={&quot;v1&quot;: &quot;json-1&quot;, &quot;v2&quot;: &quot;json-2&quot;}&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.v2=nested-2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.v3=3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.deep.v4=v4&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;v0&#39;: &#39;0&#39;,</span>
<span class="sd">    &#39;sub_model&#39;: {&#39;v1&#39;: &#39;json-1&#39;, &#39;v2&#39;: b&#39;nested-2&#39;, &#39;v3&#39;: 3, &#39;deep&#39;: {&#39;v4&#39;: &#39;v4&#39;}},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>

To enable CLI parsing, we simply set the `cli_parse_args` flag to a valid value, which retains similar conotations as
defined in `argparse`. Alternatively, we can also directly provide the args to parse at time of instantiation:

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">this_foo</span><span class="p">:</span> <span class="nb">str</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">_cli_parse_args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;--this_foo&#39;</span><span class="p">,</span> <span class="s1">&#39;is such a foo&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;this_foo&#39;: &#39;is such a foo&#39;}</span>
</code></pre></div>

Note that a CLI settings source is [**the topmost source**](#field-value-priority) by default unless its [priority value
is customised](#customise-settings-sources):

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">CliSettingsSource</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_foo</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">CliSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MY_FOO&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;from environment&#39;</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_foo=from cli&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_foo&#39;: &#39;from environment&#39;}</span>
</code></pre></div>

#### Lists

CLI argument parsing of lists supports intermixing of any of the below three styles:

  * JSON style `--field='[1,2]'`
  * Argparse style `--field 1 --field 2`
  * Lazy style `--field=1,2`

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">my_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;[1,2]&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;1,2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>
</code></pre></div>

#### Dictionaries

CLI argument parsing of dictionaries supports intermixing of any of the below two styles:

  * JSON style `--field='{"k1": 1, "k2": 2}'`
  * Environment variable style `--field k1=1 --field k2=2`

These can be used in conjunction with list forms as well, e.g:

  * `--field k1=1,k2=2 --field k3=3 --field '{"k4": 4}'` etc.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">my_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_dict&#39;: {&#39;k1&#39;: 1, &#39;k2&#39;: 2}}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;k1=1&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;k2=2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_dict&#39;: {&#39;k1&#39;: 1, &#39;k2&#39;: 2}}</span>
</code></pre></div>

#### Literals and Enums

CLI argument parsing of literals and enums are converted into CLI choices.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">IntEnum</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Fruit</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="n">pear</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">kiwi</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">lime</span> <span class="o">=</span> <span class="mi">2</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">fruit</span><span class="p">:</span> <span class="n">Fruit</span>
    <span class="n">pet</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;bird&#39;</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--fruit&#39;</span><span class="p">,</span> <span class="s1">&#39;lime&#39;</span><span class="p">,</span> <span class="s1">&#39;--pet&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;fruit&#39;: &lt;Fruit.lime: 2&gt;, &#39;pet&#39;: &#39;cat&#39;}</span>
</code></pre></div>

#### Aliases

Pydantic field aliases are added as CLI argument aliases. Aliases of length one are converted into short options.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AliasChoices</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;fname&#39;</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">last_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;lname&#39;</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="p">)</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--fname&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;--lname&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;-l&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;John,Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;--lname&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>
</code></pre></div>

### Subcommands and Positional Arguments

Subcommands and positional arguments are expressed using the `CliSubCommand` and `CliPositionalArg` annotations. These
annotations can only be applied to required fields (i.e. fields that do not have a default value). Furthermore,
subcommands must be a valid type derived from either a pydantic `BaseModel` or pydantic.dataclasses `dataclass`.

!!! note
    CLI settings subcommands are limited to a single subparser per model. In other words, all subcommands for a model
    are grouped under a single subparser; it does not allow for multiple subparsers with each subparser having its own
    set of subcommands. For more information on subparsers, see [argparse
    subcommands](https://docs.python.org/3/library/argparse.html#sub-commands).

!!! note
    `CliSubCommand` and `CliPositionalArg` are always case sensitive and do not support aliases.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">pydantic.dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">CliPositionalArg</span><span class="p">,</span>
    <span class="n">CliSubCommand</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">FooPlugin</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git-plugins-foo - Extra deep foo plugin command&quot;&quot;&quot;</span>

    <span class="n">x_feature</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Enable &quot;X&quot; feature&#39;</span><span class="p">)</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">BarPlugin</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git-plugins-bar - Extra deep bar plugin command&quot;&quot;&quot;</span>

    <span class="n">y_feature</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Enable &quot;Y&quot; feature&#39;</span><span class="p">)</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Plugins</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git-plugins - Fake plugins for GIT&quot;&quot;&quot;</span>

    <span class="n">foo</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">FooPlugin</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Foo is fake plugin&#39;</span><span class="p">)</span>

    <span class="n">bar</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">BarPlugin</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Bar is fake plugin&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Clone</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git-clone - Clone a repository into a new directory&quot;&quot;&quot;</span>

    <span class="n">repository</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The repo ...&#39;</span><span class="p">)</span>

    <span class="n">directory</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The dir ...&#39;</span><span class="p">)</span>

    <span class="n">local</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;When the repo ...&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Git</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_prog_name</span><span class="o">=</span><span class="s1">&#39;git&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git - The stupid content tracker&quot;&quot;&quot;</span>

    <span class="n">clone</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Clone</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Clone a repo ...&#39;</span><span class="p">)</span>

    <span class="n">plugins</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Plugins</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Fake GIT plugins&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Git</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: git [-h] {clone,plugins} ...</span>

<span class="sd">git - The stupid content tracker</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help       show this help message and exit</span>

<span class="sd">subcommands:</span>
<span class="sd">  {clone,plugins}</span>
<span class="sd">    clone          Clone a repo ...</span>
<span class="sd">    plugins        Fake GIT plugins</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;clone&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Git</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: git clone [-h] [--local bool] [--shared bool] REPOSITORY DIRECTORY</span>

<span class="sd">git-clone - Clone a repository into a new directory</span>

<span class="sd">positional arguments:</span>
<span class="sd">  REPOSITORY    The repo ...</span>
<span class="sd">  DIRECTORY     The dir ...</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help    show this help message and exit</span>
<span class="sd">  --local bool  When the repo ... (default: False)</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;plugins&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Git</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: git plugins bar [-h] [--my_feature bool]</span>

<span class="sd">git-plugins-bar - Extra deep bar plugin command</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help        show this help message and exit</span>
<span class="sd">  --y_feature bool  Enable &quot;Y&quot; feature (default: False)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>

### Customizing the CLI Experience

The below flags can be used to customise the CLI experience to your needs.

#### Change the Displayed Program Name

Change the default program name displayed in the help text usage by setting `cli_prog_name`. By default, it will derive
the name of the currently executing program from `sys.argv[0]`, just like argparse.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_prog_name</span><span class="o">=</span><span class="s1">&#39;appdantic&#39;</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: appdantic [-h]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help  show this help message and exit</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>

#### Change Whether CLI Should Exit on Error

Change whether the CLI internal parser will exit on error or raise a `SettingsError` exception by using
`cli_exit_on_error`. By default, the CLI internal parser will exit on error.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsError</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span> <span class="o">...</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--bad-arg&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">SettingsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; error parsing CLI: unrecognized arguments: --bad-arg</span>
</code></pre></div>

#### Enforce Required Arguments at CLI

Pydantic settings is designed to pull values in from various sources when instantating a model. This means a field that
is required is not strictly required from any single source (e.g. the CLI). Instead, all that matters is that one of the
sources provides the required value.

However, if your use case [aligns more with #2](#command-line-support), using Pydantic models to define CLIs, you will
likely want required fields to be _strictly required at the CLI_. We can enable this behavior by using
`cli_enforce_required`.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsError</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cli_enforce_required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">my_required_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;a top level required field&#39;</span><span class="p">)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MY_REQUIRED_FIELD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;hello from environment&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">SettingsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; error parsing CLI: the following arguments are required: --my_required_field</span>
</code></pre></div>

#### Change the None Type Parse String

Change the CLI string value that will be parsed (e.g. "null", "void", "None", etc.) into `None` by setting
`cli_parse_none_str`. By default it will use the `env_parse_none_str` value if set. Otherwise, it will default to "null"
if `cli_avoid_json` is `False`, and "None" if `cli_avoid_json` is `True`.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_parse_none_str</span><span class="o">=</span><span class="s1">&#39;void&#39;</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the top level v0 option&#39;</span><span class="p">)</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--v1&#39;</span><span class="p">,</span> <span class="s1">&#39;void&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;v1&#39;: None}</span>
</code></pre></div>

#### Hide None Type Values

Hide `None` values from the CLI help text by enabling `cli_hide_none_type`.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_hide_none_type</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">v0</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the top level v0 option&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--v0 str]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help  show this help message and exit</span>
<span class="sd">  --v0 str    the top level v0 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>

#### Avoid Adding JSON CLI Options

Avoid adding complex fields that result in JSON strings at the CLI by enabling `cli_avoid_json`.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the sub model v1 option&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_avoid_json</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The help summary for SubModel related options&#39;</span>
    <span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--sub_model.v1 int]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help          show this help message and exit</span>

<span class="sd">sub_model options:</span>
<span class="sd">  The help summary for SubModel related options</span>

<span class="sd">  --sub_model.v1 int  the sub model v1 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>

#### Use Class Docstring for Group Help Text

By default, when populating the group help text for nested models it will pull from the field descriptions.
Alternatively, we can also configure CLI settings to pull from the class docstring instead.

!!! note
    If the field is a union of nested models the group help text will always be pulled from the field description;
    even if `cli_use_class_docs_for_groups` is set to `True`.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The help text from the class docstring.&quot;&quot;&quot;</span>

    <span class="n">v1</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the sub model v1 option&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_use_class_docs_for_groups</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;My application help text.&quot;&quot;&quot;</span>

    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The help text from the field description&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--sub_model JSON] [--sub_model.v1 int]</span>

<span class="sd">My application help text.</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help          show this help message and exit</span>

<span class="sd">sub_model options:</span>
<span class="sd">  The help text from the class docstring.</span>

<span class="sd">  --sub_model JSON    set sub_model from JSON string</span>
<span class="sd">  --sub_model.v1 int  the sub model v1 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>

### Integrating with Existing Parsers

A CLI settings source can be integrated with existing parsers by overriding the default CLI settings source with a user
defined one that specifies the `root_parser` object.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">CliSettingsSource</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pear&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;lime&#39;</span><span class="p">])</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Bob&#39;</span>


<span class="c1"># Set existing `parser` as the `root_parser` object for the user defined settings source</span>
<span class="n">cli_settings</span> <span class="o">=</span> <span class="n">CliSettingsSource</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="n">root_parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>

<span class="c1"># Parse and load CLI settings from the command line into the settings source.</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;waldo&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">_cli_settings_source</span><span class="o">=</span><span class="n">cli_settings</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;name&#39;: &#39;waldo&#39;}</span>

<span class="c1"># Load CLI settings from pre-parsed arguments. i.e., the parsing occurs elsewhere and we</span>
<span class="c1"># just need to load the pre-parsed args into the settings source.</span>
<span class="n">parsed_args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;ralph&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">_cli_settings_source</span><span class="o">=</span><span class="n">cli_settings</span><span class="p">(</span><span class="n">parsed_args</span><span class="o">=</span><span class="n">parsed_args</span><span class="p">))</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;name&#39;: &#39;ralph&#39;}</span>
</code></pre></div>

A `CliSettingsSource` connects with a `root_parser` object by using parser methods to add `settings_cls` fields as
command line arguments. The `CliSettingsSource` internal parser representation is based on the `argparse` library, and
therefore, requires parser methods that support the same attributes as their `argparse` counterparts. The available
parser methods that can be customised, along with their argparse counterparts (the defaults), are listed below:

* `parse_args_method` - (`argparse.ArgumentParser.parse_args`)
* `add_argument_method` - (`argparse.ArgumentParser.add_argument`)
* `add_argument_group_method` - (`argparse.ArgumentParser.add_argument_group`)
* `add_parser_method` - (`argparse._SubParsersAction.add_parser`)
* `add_subparsers_method` - (`argparse.ArgumentParser.add_subparsers`)
* `formatter_class` - (`argparse.HelpFormatter`)

For a non-argparse parser the parser methods can be set to `None` if not supported. The CLI settings will only raise an
error when connecting to the root parser if a parser method is necessary but set to `None`.

## Secrets

Placing secret values in files is a common pattern to provide sensitive configuration to an application.

A secret file follows the same principal as a dotenv file except it only contains a single value and the file name
is used as the key. A secret file will look like the following:

<div class="language-text highlight"><span class="filename">/var/run/database_password</span><pre><span></span><code>super_secret_database_password
</code></pre></div>

Once you have your secret files, *pydantic* supports loading it in two ways:

1. Setting the `secrets_dir` on `model_config` in a `BaseSettings` class to the directory where your secret files are stored.
   <div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">secrets_dir</span><span class="o">=</span><span class="s1">&#39;/var/run&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">database_password</span><span class="p">:</span> <span class="nb">str</span>
</span></code></pre></div>
2. Instantiating the `BaseSettings` derived class with the `_secrets_dir` keyword argument:
   <div class="language-text highlight"><pre><span></span><code>settings = Settings(_secrets_dir=&#39;/var/run&#39;)
</code></pre></div>

In either case, the value of the passed argument can be any valid directory, either absolute or relative to the
current working directory. **Note that a non existent directory will only generate a warning**.
From there, *pydantic* will handle everything for you by loading in your variables and validating them.

Even when using a secrets directory, *pydantic* will still read environment variables from a dotenv file or the environment,
**a dotenv file and environment variables will always take priority over values loaded from the secrets directory**.

Passing a file path via the `_secrets_dir` keyword argument on instantiation (method 2) will override
the value (if any) set on the `model_config` class.

### Use Case: Docker Secrets

Docker Secrets can be used to provide sensitive configuration to an application running in a Docker container.
To use these secrets in a *pydantic* application the process is simple. More information regarding creating, managing
and using secrets in Docker see the official
[Docker documentation](https://docs.docker.com/engine/reference/commandline/secret/).

First, define your `Settings` class with a `SettingsConfigDict` that specifies the secrets directory.

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">secrets_dir</span><span class="o">=</span><span class="s1">&#39;/run/secrets&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">my_secret_data</span><span class="p">:</span> <span class="nb">str</span>
</span></code></pre></div>

!!! note
    By default [Docker uses `/run/secrets`](https://docs.docker.com/engine/swarm/secrets/#how-docker-manages-secrets)
    as the target mount point. If you want to use a different location, change `Config.secrets_dir` accordingly.

Then, create your secret via the Docker CLI
<div class="language-bash highlight"><pre><span></span><code><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;This is a secret&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>docker<span class="w"> </span>secret<span class="w"> </span>create<span class="w"> </span>my_secret_data<span class="w"> </span>-
</code></pre></div>

Last, run your application inside a Docker container and supply your newly created secret
<div class="language-bash highlight"><pre><span></span><code>docker<span class="w"> </span>service<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>pydantic-with-secrets<span class="w"> </span>--secret<span class="w"> </span>my_secret_data<span class="w"> </span>pydantic-app:latest
</code></pre></div>

## Azure Key Vault

You must set two parameters:

- `url`: For example, `https://my-resource.vault.azure.net/`.
- `credential`: If you use `DefaultAzureCredential`, in local you can execute `az login` to get your identity credentials. The identity must have a role assignment (the recommended one is `Key Vault Secrets User`), so you can access the secrets.

You must have the same naming convention in the field name as in the Key Vault secret name. For example, if the secret is named `SqlServerPassword`, the field name must be the same. You can use an alias too.

In Key Vault, nested models are supported with the `--` separator. For example, `SqlServer--Password`.

Key Vault arrays (e.g. `MySecret--0`, `MySecret--1`) are not supported.

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">azure.identity</span> <span class="kn">import</span> <span class="n">DefaultAzureCredential</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AzureKeyVaultSettingsSource</span><span class="p">,</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">AzureKeyVaultSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">sub</span><span class="p">:</span> <span class="n">SubModel</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="n">az_key_vault_settings</span> <span class="o">=</span> <span class="n">AzureKeyVaultSettingsSource</span><span class="p">(</span>
            <span class="n">settings_cls</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AZURE_KEY_VAULT_URL&#39;</span><span class="p">],</span>
            <span class="n">DefaultAzureCredential</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">dotenv_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
            <span class="n">az_key_vault_settings</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>

## Other settings source

Other settings sources are available for common configuration files:

- `JsonConfigSettingsSource` using `json_file` and `json_file_encoding` arguments
- `PyprojectTomlConfigSettingsSource` using *(optional)* `pyproject_toml_depth` and *(optional)* `pyproject_toml_table_header` arguments
- `TomlConfigSettingsSource` using `toml_file` argument
- `YamlConfigSettingsSource` using `yaml_file` and yaml_file_encoding arguments

You can also provide multiple files by providing a list of path:
<div class="language-py highlight"><pre><span></span><code><span class="n">toml_file</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;config.default.toml&#39;</span><span class="p">,</span> <span class="s1">&#39;config.custom.toml&#39;</span><span class="p">]</span>
</code></pre></div>
To use them, you can use the same mechanism described [here](#customise-settings-sources)


<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
    <span class="n">TomlConfigSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Nested</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">nested_field</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foobar</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">nested</span><span class="p">:</span> <span class="n">Nested</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">toml_file</span><span class="o">=</span><span class="s1">&#39;config.toml&#39;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">TomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>
</code></pre></div>

This will be able to read the following "config.toml" file, located in your working directory:

<div class="language-toml highlight"><pre><span></span><code><span class="n">foobar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello&quot;</span>
<span class="k">[nested]</span>
<span class="n">nested_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;world!&quot;</span>
</code></pre></div>

### pyproject.toml

"pyproject.toml" is a standardized file for providing configuration values in Python projects.
[PEP 518](https://peps.python.org/pep-0518/#tool-table) defines a `[tool]` table that can be used to provide arbitrary tool configuration.
While encouraged to use the `[tool]` table, `PyprojectTomlConfigSettingsSource` can be used to load variables from any location with in "pyproject.toml" file.

This is controlled by providing `SettingsConfigDict(pyproject_toml_table_header=tuple[str, ...])` where the value is a tuple of header parts.
By default, `pyproject_toml_table_header=('tool', 'pydantic-settings')` which will load variables from the `[tool.pydantic-settings]` table.

<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from the table used by default.&quot;&quot;&quot;</span>

    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="k">class</span> <span class="nc">SomeTableSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from a user defined table.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">pyproject_toml_table_header</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;tool&#39;</span><span class="p">,</span> <span class="s1">&#39;some-table&#39;</span><span class="p">)</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">RootSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from the root of a pyproject.toml file.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">pyproject_toml_table_header</span><span class="o">=</span><span class="p">())</span>
</code></pre></div>

This will be able to read the following "pyproject.toml" file, located in your working directory, resulting in `Settings(field='default-table')`, `SomeTableSettings(field='some-table')`, & `RootSettings(field='root')`:

<div class="language-toml highlight"><pre><span></span><code><span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;root&quot;</span>

<span class="k">[tool.pydantic-settings]</span>
<span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;default-table&quot;</span>

<span class="k">[tool.some-table]</span>
<span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some-table&quot;</span>
</code></pre></div>

By default, `PyprojectTomlConfigSettingsSource` will only look for a "pyproject.toml" in the your current working directory.
However, there are two options to change this behavior.

* `SettingsConfigDict(pyproject_toml_depth=<int>)` can be provided to check `<int>` number of directories **up** in the directory tree for a "pyproject.toml" if one is not found in the current working directory.
  By default, no parent directories are checked.
* An explicit file path can be provided to the source when it is instantiated (e.g. `PyprojectTomlConfigSettingsSource(settings_cls, Path('~/.config').resolve() / 'pyproject.toml')`).
  If a file path is provided this way, it will be treated as absolute (no other locations are checked).

<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">DiscoverSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example of discovering a pyproject.toml in parent directories in not in `Path.cwd()`.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">pyproject_toml_depth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="k">class</span> <span class="nc">ExplicitFilePathSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example of explicitly providing the path to the file to load.&quot;&quot;&quot;</span>

    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span>
                <span class="n">settings_cls</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;~/.config&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;pyproject.toml&#39;</span>
            <span class="p">),</span>
        <span class="p">)</span>
</code></pre></div>

## Field value priority

In the case where a value is specified for the same `Settings` field in multiple ways,
the selected value is determined as follows (in descending order of priority):

1. If `cli_parse_args` is enabled, arguments passed in at the CLI.
2. Arguments passed to the `Settings` class initialiser.
3. Environment variables, e.g. `my_prefix_special_function` as described above.
4. Variables loaded from a dotenv (`.env`) file.
5. Variables loaded from the secrets directory.
6. The default field values for the `Settings` model.

## Customise settings sources

If the default order of priority doesn't match your needs, it's possible to change it by overriding
the `settings_customise_sources` method of your `Settings` .

`settings_customise_sources` takes four callables as arguments and returns any number of callables as a tuple.
In turn these callables are called to build the inputs to the fields of the settings class.

Each callable should take an instance of the settings class as its sole argument and return a `dict`.

### Changing Priority

The order of the returned callables decides the priority of inputs; first item is the highest priority.

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">PostgresDsn</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">database_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">init_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">database_dsn</span><span class="o">=</span><span class="s1">&#39;postgres://postgres@localhost:5432/kwargs_db&#39;</span><span class="p">))</span>
<span class="c1">#&gt; database_dsn=MultiHostUrl(&#39;postgres://postgres@localhost:5432/kwargs_db&#39;)</span>
</code></pre></div>

By flipping `env_settings` and `init_settings`, environment variables now have precedence over `__init__` kwargs.

### Adding sources

As explained earlier, *pydantic* ships with multiples built-in settings sources. However, you may occasionally
need to add your own custom sources, `settings_customise_sources` makes this very easy:

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">JsonConfigSettingsSource</span><span class="p">(</span><span class="n">PydanticBaseSettingsSource</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple settings source class that loads variables from a JSON file</span>
<span class="sd">    at the project&#39;s root.</span>

<span class="sd">    Here we happen to choose to use the `env_file_encoding` from Config</span>
<span class="sd">    when reading `config.json`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;env_file_encoding&#39;</span><span class="p">)</span>
        <span class="n">file_content_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
            <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;tests/example_test_config.json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">field_value</span> <span class="o">=</span> <span class="n">file_content_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">prepare_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">value_is_complex</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_cls</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">field_value</span><span class="p">,</span> <span class="n">field_key</span><span class="p">,</span> <span class="n">value_is_complex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_field_value</span><span class="p">(</span>
                <span class="n">field</span><span class="p">,</span> <span class="n">field_name</span>
            <span class="p">)</span>
            <span class="n">field_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_field_value</span><span class="p">(</span>
                <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">value_is_complex</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">field_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_value</span>

        <span class="k">return</span> <span class="n">d</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

    <span class="n">foobar</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">JsonConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
        <span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">())</span>
<span class="c1">#&gt; foobar=&#39;test&#39;</span>
</code></pre></div>

#### Accesing the result of previous sources

Each source of settings can access the output of the previous ones.

<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span>

<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span> <span class="nc">MyCustomSource</span><span class="p">(</span><span class="n">PydanticBaseSettingsSource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span> <span class="o">...</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="c1"># Retrieve the aggregated settings from previous sources</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span>
        <span class="n">current_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_setting&#39;</span><span class="p">)</span>

        <span class="c1"># Retrive settings from all sources individually</span>
        <span class="c1"># self.settings_sources_data[&quot;SettingsSourceName&quot;]: Dict[str, Any]</span>
        <span class="n">settings_sources_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_sources_data</span>
        <span class="n">settings_sources_data</span><span class="p">[</span><span class="s1">&#39;SomeSettingsSource&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_setting&#39;</span><span class="p">)</span>

        <span class="c1"># Your code here...</span>
</code></pre></div>

### Removing sources

You might also want to disable a source:

<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">ValidationError</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_api_key</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="c1"># here we choose to ignore arguments from init_settings</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">Settings</span><span class="p">(</span><span class="n">my_api_key</span><span class="o">=</span><span class="s1">&#39;this is ignored&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc_info</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Settings</span>
<span class="sd">    my_api_key</span>
<span class="sd">      Field required [type=missing, input_value={}, input_type=dict]</span>
<span class="sd">        For further information visit https://errors.pydantic.dev/2/v/missing</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>


## In-place reloading

In case you want to reload in-place an existing setting, you can do it by using its `__init__` method :

<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>


<span class="n">mutable_settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>

<span class="n">mutable_settings</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; bar</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="n">mutable_settings</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>
</code></pre></div>
 -->
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>このドキュメントは、https://raw.githubusercontent.com/pydantic/pydantic-settings/main/docs/index.md にリンクされたドキュメントのコピーを翻訳しています。</p>
</div>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<!-- Installation is as simple as: -->
<p>インストールは次のように簡単です。</p>
<div class="language-bash highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>pydantic-settings
</code></pre></div>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<!-- If you create a model that inherits from `BaseSettings`, the model initialiser will attempt to determine the values of any fields not passed as keyword arguments by reading from the environment. (Default values will still be used if the matching environment variable is not set.) -->
<p><code>BaseSettings</code>から継承するモデルを作成した場合、モデルイニシャライザは、キーワード引数として渡されていないフィールドの値を、環境から読み取って決定しようとします(一致する環境変数が設定されていない場合でも、デフォルト値が使用されます)。</p>
<!-- This makes it easy to: -->
<p>これにより、次のことが容易になります。</p>
<!-- * Create a clearly-defined, type-hinted application configuration class
* Automatically read modifications to the configuration from environment variables
* Manually override specific settings in the initialiser where desired (e.g. in unit tests) -->
<ul>
<li>明確に定義され、型をヒントにしたアプリケーション構成クラスの作成</li>
<li>環境変数から構成への変更を自動的な読み取り</li>
<li>必要に応じて、イニシャライザの特定の設定を手動での上書き(ユニットテストなど)</li>
</ul>
<!-- For example: -->
<p>次に例を示します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Set</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AliasChoices</span><span class="p">,</span>
    <span class="n">AmqpDsn</span><span class="p">,</span>
    <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">Field</span><span class="p">,</span>
    <span class="n">ImportString</span><span class="p">,</span>
    <span class="n">PostgresDsn</span><span class="p">,</span>
    <span class="n">RedisDsn</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
    <span class="n">apple</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">auth_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">validation_alias</span><span class="o">=</span><span class="s1">&#39;my_auth_key&#39;</span><span class="p">)</span>  <span class="c1"># (1)!</span>

    <span class="n">api_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;my_api_key&#39;</span><span class="p">)</span>  <span class="c1"># (2)!</span>

    <span class="n">redis_dsn</span><span class="p">:</span> <span class="n">RedisDsn</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="s1">&#39;redis://user:pass@localhost:6379/1&#39;</span><span class="p">,</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;service_redis_dsn&#39;</span><span class="p">,</span> <span class="s1">&#39;redis_url&#39;</span><span class="p">),</span>  <span class="c1"># (3)!</span>
    <span class="p">)</span>
    <span class="n">pg_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span> <span class="o">=</span> <span class="s1">&#39;postgres://user:pass@localhost:5432/foobar&#39;</span>
    <span class="n">amqp_dsn</span><span class="p">:</span> <span class="n">AmqpDsn</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@localhost:5672/&#39;</span>

    <span class="n">special_function</span><span class="p">:</span> <span class="n">ImportString</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;math.cos&#39;</span>  <span class="c1"># (4)!</span>

    <span class="c1"># to override domains:</span>
    <span class="c1"># export my_prefix_domains=&#39;[&quot;foo.com&quot;, &quot;bar.com&quot;]&#39;</span>
    <span class="n">domains</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="c1"># to override more_settings:</span>
    <span class="c1"># export my_prefix_more_settings=&#39;{&quot;foo&quot;: &quot;x&quot;, &quot;apple&quot;: 1}&#39;</span>
    <span class="n">more_settings</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">SubModel</span><span class="p">()</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>  <span class="c1"># (5)!</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;auth_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;api_key&#39;: &#39;xxx&#39;,</span>
<span class="sd">    &#39;redis_dsn&#39;: Url(&#39;redis://user:pass@localhost:6379/1&#39;),</span>
<span class="sd">    &#39;pg_dsn&#39;: MultiHostUrl(&#39;postgres://user:pass@localhost:5432/foobar&#39;),</span>
<span class="sd">    &#39;amqp_dsn&#39;: Url(&#39;amqp://user:pass@localhost:5672/&#39;),</span>
<span class="sd">    &#39;special_function&#39;: math.cos,</span>
<span class="sd">    &#39;domains&#39;: set(),</span>
<span class="sd">    &#39;more_settings&#39;: {&#39;foo&#39;: &#39;bar&#39;, &#39;apple&#39;: 1},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<!-- 1. The environment variable name is overridden using `validation_alias`. In this case, the environment variable `my_auth_key` will be read instead of `auth_key`. Check the [`Field` documentation](fields.md) for more information. -->
<ol>
<li>環境変数名は<code>validation_alias</code>を使用してオーバーライドされます。この場合、環境変数<code>my_auth_key</code>が<code>auth_key</code>の代わりに読み込まれます。詳細については、<a href="../fields/"><code>Field</code>documentation</a>を参照してください。</li>
</ol>
<!-- 2. The environment variable name is overridden using `alias`. In this case, the environment variable `my_api_key` will be used for both validation and serialization instead of `api_key`. Check the [`Field` documentation](fields.md#field-aliases) for more information. -->
<ol>
<li>環境変数名は<code>alias</code>を使用してオーバーライドされます。この場合、環境変数<code>my_api_key</code>が検証とシリアライゼーションの両方に<code>api_key</code>の代わりに使用されます。詳細については、<a href="../fields/#field-aliases"><code>Field</code>documentation</a>を参照してください。</li>
</ol>
<!-- 3. The `AliasChoices` class allows to have multiple environment variable names for a single field. The first environment variable that is found will be used. Check the [`AliasChoices`](alias.md#aliaspath-and-aliaschoices) for more information. -->
<ol>
<li><code>AliasChoices</code>クラスでは、1つのフィールドに対して複数の環境変数名を持つことができます。最初に見つかった環境変数が使用されます。詳細については、<a href="../alias/#aliaspath-and-AliasChoices"><code>AliasChoices</code></a>を確認してください。</li>
</ol>
<!-- 4. The `ImportString` class allows to import an object from a string. In this case, the environment variable `special_function` will be read and the function `math.cos` will be imported. -->
<ol>
<li><code>ImportString</code>クラスを使用すると、文字列からオブジェクトをインポートできます。この場合、環境変数<code>special_function</code>が読み込まれ、関数<code>math.cos</code>がインポートされます。</li>
</ol>
<!-- 5. The `env_prefix` config setting allows to set a prefix for all environment variables. Check the [Environment variable names documentation](#environment-variable-names) for more information. -->
<ol>
<li><code>env_prefix</code>構成設定では、すべての環境変数に接頭辞を設定できます。詳細については、<a href="#environment-variable-names">環境変数名のドキュメント</a>を参照してください。</li>
</ol>
<h2 id="validation-of-default-values">Validation of default values<a class="headerlink" href="#validation-of-default-values" title="Permanent link">&para;</a></h2>
<!-- Unlike pydantic `BaseModel`, default values of `BaseSettings` fields are validated by default.
You can disable this behaviour by setting `validate_default=False` either in `model_config` or on field level by `Field(validate_default=False)`: -->
<p>pydanicの<code>BaseModel</code>とは異なり、<code>BaseSettings</code>フィールドのデフォルト値はデフォルトで検証されます。
この動作を無効にするには、<code>model_config</code>または<code>Field(validate_default=False)</code>のフィールドレベルで<code>validate_default=False</code>を設定します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">validate_default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># default won&#39;t be validated</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">())</span>
<span class="c1">#&gt; foo=&#39;test&#39;</span>


<span class="k">class</span> <span class="nc">Settings1</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="c1"># default won&#39;t be validated</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">validate_default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings1</span><span class="p">())</span>
<span class="c1">#&gt; foo=&#39;test&#39;</span>
</code></pre></div>
<!-- Check the [Validation of default values](validators.md#validation-of-default-values) for more information. -->
<p>詳細については、<a href="../validators/#validation-of-default-values">Validation of default values</a>を参照してください。</p>
<h2 id="environment-variable-names">Environment variable names<a class="headerlink" href="#environment-variable-names" title="Permanent link">&para;</a></h2>
<!-- By default, the environment variable name is the same as the field name. -->
<p>デフォルトでは、環境変数名はフィールド名と同じです。</p>
<!-- You can change the prefix for all environment variables by setting the `env_prefix` config setting, or via the `_env_prefix` keyword argument on instantiation: -->
<p>すべての環境変数のプレフィックスを変更するには、<code>env_prefix</code>config設定を設定するか、インスタンス化時に<code>_env_prefix</code>キーワード引数を使用します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>

    <span class="n">auth_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;xxx&#39;</span>  <span class="c1"># will be read from `my_prefix_auth_key`</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- The default <code>env_prefix</code> is <code>''</code> (empty string). -->
デフォルトの<code>env_prefix</code>は<code>''</code>(空文字列)です。</p>
</div>
<!-- If you want to change the environment variable name for a single field, you can use an alias. -->
<p>1つのフィールドの環境変数名を変更する場合は、エイリアスを使用できます。</p>
<!-- There are two ways to do this: -->
<p>これには2つの方法があります。</p>
<!-- * Using `Field(alias=...)` (see `api_key` above)
* Using `Field(validation_alias=...)` (see `auth_key` above) -->
<ul>
<li><code>Field(alias=...)</code>を使用する(上記の<code>api_key</code>を参照)</li>
<li><code>Field(validation_alias=...)</code>を使用します(上記の<code>auth_key</code>を参照)</li>
</ul>
<!-- Check the [`Field` aliases documentation](fields.md#field-aliases) for more information about aliases. -->
<p>エイリアスの詳細については、<a href="../fields/#field-aliases"><code>Field</code>aliases documentation</a>を参照してください。</p>
<!-- `env_prefix` does not apply to fields with alias. It means the environment variable name is the same as field alias: -->
<p><code>env_prefix</code>はエイリアスを持つフィールドには適用されません。これは、環境変数名がフィールドエイリアスと同じであることを意味します:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_prefix</span><span class="o">=</span><span class="s1">&#39;my_prefix_&#39;</span><span class="p">)</span>

    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;xxx&#39;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;FooAlias&#39;</span><span class="p">)</span>  <span class="c1"># (1)!</span>
</code></pre></div>
<ol>
<li><code>env_prefix</code> will be ignored and the value will be read from <code>FooAlias</code> environment variable.</li>
</ol>
<h3 id="case-sensitivity">Case-sensitivity<a class="headerlink" href="#case-sensitivity" title="Permanent link">&para;</a></h3>
<!-- By default, environment variable names are case-insensitive. -->
<p>デフォルトでは、環境変数名の大文字と小文字は区別されません。</p>
<!-- If you want to make environment variable names case-sensitive, you can set the `case_sensitive` config setting: -->
<p>環境変数名の大文字と小文字を区別する場合は、<code>case_sensitive</code>構成設定を設定します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">redis_host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span>
</code></pre></div>
<!-- When `case_sensitive` is `True`, the environment variable names must match field names (optionally with a prefix), so in this example `redis_host` could only be modified via `export redis_host`.
If you want to name environment variables all upper-case, you should name attribute all upper-case too.
You can still name environment variables anything you like through `Field(validation_alias=...)`. -->
<p><code>case_sensitive</code>が<code>True</code>の場合、環境変数名はフィールド名と一致する必要があります(オプションで接頭辞が必要)。したがって、この例では<code>redis_host</code>は<code>export redis_host</code>を介してのみ変更できます。
環境変数にすべて大文字の名前を付ける場合は、attributeにもすべて大文字の名前を付ける必要があります。
<code>Field(validation_alias=...)</code>を使用して、環境変数に任意の名前を付けることができます。</p>
<!-- Case-sensitivity can also be set via the `_case_sensitive` keyword argument on instantiation. -->
<p>大文字と小文字の区別は、インスタンス化時に<code>_case_sensitive</code>キーワード引数を使用して設定することもできます。</p>
<!-- In case of nested models, the `case_sensitive` setting will be applied to all nested models. -->
<p>ネストされたモデルの場合、<code>case_sensitive</code>設定はすべてのネストされたモデルに適用されます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">RedisSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">redis</span><span class="p">:</span> <span class="n">RedisSettings</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;redis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;{&quot;host&quot;: &quot;localhost&quot;, &quot;port&quot;: 6379}&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;redis&#39;: {&#39;host&#39;: &#39;localhost&#39;, &#39;port&#39;: 6379}}</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;redis&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;{&quot;HOST&quot;: &quot;localhost&quot;, &quot;port&quot;: 6379}&#39;</span>  <span class="c1"># (1)!</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Settings</span>
<span class="sd">    redis.host</span>
<span class="sd">      Field required [type=missing, input_value={&#39;HOST&#39;: &#39;localhost&#39;, &#39;port&#39;: 6379}, input_type=dict]</span>
<span class="sd">        For further information visit https://errors.pydantic.dev/2/v/missing</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<!-- 1. Note that the `host` field is not found because the environment variable name is `HOST` (all upper-case). -->
<ol>
<li>環境変数名が<code>HOST</code>(すべて大文字)であるため、<code>host</code>フィールドが見つからないことに注意してください。</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- On Windows, Python's <code>os</code> module always treats environment variables as case-insensitive, so the <code>case_sensitive</code> config setting will have no effect - settings will always be updated ignoring case. -->
Windowsでは、Pythonの<code>os</code>モジュールは常に環境変数を大文字小文字を区別しないものとして扱うので、<code>case_sensitive</code>設定には何の効果もありません。設定は常に大文字小文字を無視して更新されます。</p>
</div>
<h2 id="parsing-environment-variable-values">Parsing environment variable values<a class="headerlink" href="#parsing-environment-variable-values" title="Permanent link">&para;</a></h2>
<!-- By default environment variables are parsed verbatim, including if the value is empty. You can choose to ignore empty environment variables by setting the `env_ignore_empty` config setting to `True`.
This can be useful if you would prefer to use the default value for a field rather than an empty value from the environment. -->
<p>デフォルトでは、環境変数は値が空の場合も含めて逐語的にパースされます。<code>env_ignore_empty</code>設定を<code>True</code>に設定することで、空の環境変数を無視することを選択できます。
これは、環境からの空の値ではなく、フィールドのデフォルト値を使用する場合に便利です。</p>
<!-- For most simple field types (such as `int`, `float`, `str`, etc.), the environment variable value is parsed the same way it would be if passed directly to the initialiser (as a string). -->
<p>ほとんどの単純なフィールド型(<code>int</code>、<code>float</code>、<code>str</code>など)では、環境変数の値はイニシャライザに(文字列として)直接渡された場合と同じようにパースされます。</p>
<!-- Complex types like `list`, `set`, `dict`, and sub-models are populated from the environment by treating the environment variable's value as a JSON-encoded string. -->
<p><code>list</code>、<code>set</code>、<code>dict</code>、サブモデルなどの複雑な型は、環境変数の値をJSONでエンコードされた文字列として扱うことによって、環境から生成されます。</p>
<!-- Another way to populate nested complex variables is to configure your model with the `env_nested_delimiter` config setting, then use an environment variable with a name pointing to the nested module fields.
What it does is simply explodes your variable into nested models or dicts.
So if you define a variable `FOO__BAR__BAZ=123` it will convert it into `FOO={'BAR': {'BAZ': 123}}`
If you have multiple variables with the same structure they will be merged. -->
<p>ネストされた複合変数を設定するもう1つの方法は、<code>env_nested_delimiter</code>構成設定でモデルを構成し、ネストされたモジュールフィールドを指す名前の環境変数を使用することです。
これは単に、変数をネストされたモデルやディクテーションに展開するだけです。
ですから、変数<code>FOO__BAR__BAZ=123</code>を定義すると、<code>FOO={'BAR':{'BAZ':123}}</code>に変換されます。
同じ構造を持つ複数の変数がある場合、それらはマージされます。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- Sub model has to inherit from <code>pydantic.BaseModel</code>, Otherwise <code>pydantic-settings</code> will initialize sub model, collects values for sub model fields separately, and you may get unexpected results. -->
サブモデルは<code>pydantic.BaseModel</code>から継承する必要があります。そうしないと、<code>pydantic-settings</code>がサブモデルを初期化し、サブモデルフィールドの値を個別に収集し、予期しない結果になる可能性があります。</p>
</div>
<!-- As an example, given the following environment variables: -->
<p>たとえば、次の環境変数があるとします。</p>
<div class="language-bash highlight"><pre><span></span><code><span class="c1"># your environment</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">V0</span><span class="o">=</span><span class="m">0</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL</span><span class="o">=</span><span class="s1">&#39;{&quot;v1&quot;: &quot;json-1&quot;, &quot;v2&quot;: &quot;json-2&quot;}&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__V2</span><span class="o">=</span>nested-2
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__V3</span><span class="o">=</span><span class="m">3</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SUB_MODEL__DEEP__V4</span><span class="o">=</span>v4
</code></pre></div>
<!-- You could load them into the following settings model: -->
<p>次の設定モデルにロードすることができます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">DeepSubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>  <span class="c1"># (1)!</span>
    <span class="n">v4</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>  <span class="c1"># (2)!</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">v2</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">v3</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">deep</span><span class="p">:</span> <span class="n">DeepSubModel</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s1">&#39;__&#39;</span><span class="p">)</span>

    <span class="n">v0</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;v0&#39;: &#39;0&#39;,</span>
<span class="sd">    &#39;sub_model&#39;: {&#39;v1&#39;: &#39;json-1&#39;, &#39;v2&#39;: b&#39;nested-2&#39;, &#39;v3&#39;: 3, &#39;deep&#39;: {&#39;v4&#39;: &#39;v4&#39;}},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<!-- 1. Sub model has to inherit from `pydantic.BaseModel`. -->
<ol>
<li>サブモデルは<code>pydantic.BaseModel</code>から継承する必要があります。</li>
</ol>
<!-- 2. Sub model has to inherit from `pydantic.BaseModel`. -->
<ol>
<li>サブモデルは<code>pydantic.BaseModel</code>から継承する必要があります。</li>
</ol>
<!-- `env_nested_delimiter` can be configured via the `model_config` as shown above, or via the `_env_nested_delimiter` keyword argument on instantiation. -->
<p><code>env_nested_delimiter</code>は、上記のように<code>model_config</code>を介して、またはインスタンス化時に<code>_env_nested_delimiter</code>キーワード引数を介して設定できます。</p>
<!-- Nested environment variables take precedence over the top-level environment variable JSON (e.g. in the example above, `SUB_MODEL__V2` trumps `SUB_MODEL`). -->
<p>ネストされた環境変数は、トップレベルの環境変数JSONよりも優先されます(例えば、上の例では<code>SUB_MODEL__V2</code>が<code>SUB_MODEL</code>より優先されます)。</p>
<!-- You may also populate a complex type by providing your own source class. -->
<p>また、独自のソースクラスを指定して複合型を生成することもできます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">EnvSettingsSource</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">MyCustomSource</span><span class="p">(</span><span class="n">EnvSettingsSource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">prepare_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">value_is_complex</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="s1">&#39;numbers&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">numbers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">MyCustomSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;numbers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;1,2,3&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;numbers&#39;: [1, 2, 3]}</span>
</code></pre></div>
<h2 id="dotenv-env-support">Dotenv (.env) support<a class="headerlink" href="#dotenv-env-support" title="Permanent link">&para;</a></h2>
<!-- Dotenv files (generally named `.env`) are a common pattern that make it easy to use environment variables in a platform-independent manner. -->
<p>.envファイル(通常は<code>.env</code>)は、プラットフォームに依存しない方法で環境変数を簡単に使用できるようにする一般的なパターンです。</p>
<!-- A dotenv file follows the same general principles of all environment variables, and it looks like this: -->
<p>.envファイルは、すべての環境変数と同じ一般原則に従い、次のようになります。</p>
<div class="language-bash highlight"><span class="filename">.env</span><pre><span></span><code><span class="c1"># ignore comment</span>
<span class="nv">ENVIRONMENT</span><span class="o">=</span><span class="s2">&quot;production&quot;</span>
<span class="nv">REDIS_ADDRESS</span><span class="o">=</span>localhost:6379
<span class="nv">MEANING_OF_LIFE</span><span class="o">=</span><span class="m">42</span>
<span class="nv">MY_VAR</span><span class="o">=</span><span class="s1">&#39;Hello world&#39;</span>
</code></pre></div>
<!-- Once you have your `.env` file filled with variables, *pydantic* supports loading it in two ways: -->
<p><code>.env</code>ファイルに変数を入れると、<em>pydantic</em>は以下の2つの方法でロードをサポートします。</p>
<!-- 1. Setting the `env_file` (and `env_file_encoding` if you don't want the default encoding of your OS) on `model_config` in the `BaseSettings` class: -->
<ol>
<li><code>BaseSettings</code>クラスの<code>model_config</code>で<code>env_file</code>(およびOSのデフォルトエンコーディングが不要な場合は<code>env_file_encoding</code>)を設定します。
   <div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span></code></pre></div></li>
</ol>
<!-- 2. Instantiating the `BaseSettings` derived class with the `_env_file` keyword argument (and the `_env_file_encoding` if needed): -->
<ol>
<li><code>_env_file</code>キーワード引数(および必要に応じて<code>_env_file_encoding</code>)を使用して<code>BaseSettings</code>派生クラスをインスタンス化します。
   <div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>


<span class="hll"><span class="n">settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">(</span><span class="n">_env_file</span><span class="o">=</span><span class="s1">&#39;prod.env&#39;</span><span class="p">,</span> <span class="n">_env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span></code></pre></div></li>
</ol>
<!-- In either case, the value of the passed argument can be any valid path or filename, either absolute or relative to the current working directory. From there, *pydantic* will handle everything for you by loading in your variables and validating them. -->
<p>どちらの場合も、渡される引き数の値は任意の有効なパスまたはファイル名(絶対パスまたは現在の作業ディレクトリからの相対パス)にすることができます。そこから、<em>pydantic</em>は変数をロードして検証することで、すべてを処理します。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- If a filename is specified for <code>env_file</code>, Pydantic will only check the current working directory and won't check any parent directories for the <code>.env</code> file. -->
<code>env_file</code>にファイル名が指定されている場合、Pydanticは現在の作業ディレクトリのみをチェックし、<code>.env</code>ファイルの親ディレクトリはチェックしません。</p>
</div>
<!-- Even when using a dotenv file, *pydantic* will still read environment variables as well as the dotenv file, **environment variables will always take priority over values loaded from a dotenv file**. -->
<p>.envファイルを使用している場合でも、<em>pydantic</em>は環境変数とdotenvファイルを読み込みます。<strong>環境変数は常にdotenvファイルからロードされた値よりも優先されます</strong>。</p>
<!-- Passing a file path via the `_env_file` keyword argument on instantiation (method 2) will override the value (if any) set on the `model_config` class. If the above snippets were used in conjunction, `prod.env` would be loaded while `.env` would be ignored. -->
<p>インスタンス化(方法2)で<code>_env_file</code>キーワード引数を介してファイルパスを渡すと、<code>model_config</code>クラスに設定された値(もしあれば)が上書きされます。上記のスニペットが一緒に使用された場合、<code>prod.env</code>がロードされ、<code>.env</code>は無視されます。</p>
<!-- If you need to load multiple dotenv files, you can pass multiple file paths as a tuple or list. The files will be loaded in order, with each file overriding the previous one. -->
<p>複数のdotenvファイルをロードする必要がある場合は、複数のファイルパスをタプルまたはリストとして渡すことができます。ファイルは順番にロードされ、各ファイルが前のファイルを上書きします。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="c1"># `.env.prod` takes priority over `.env`</span>
        <span class="n">env_file</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="s1">&#39;.env.prod&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div>
<!-- You can also use the keyword argument override to tell Pydantic not to load any file at all (even if one is set in the `model_config` class) by passing `None` as the instantiation keyword argument, e.g. `settings = Settings(_env_file=None)`. -->
<p><code>settings=Settings(_env_file=None)</code>のように、キーワード引数overrideを使用して、インスタンス化キーワード引数として<code>None</code>を渡すことで、(<code>model_config</code>クラスにファイルが設定されていても)ファイルをまったくロードしないようにPydanticに指示することもできます。</p>
<!-- Because python-dotenv is used to parse the file, bash-like semantics such as `export` can be used which (depending on your OS and environment) may allow your dotenv file to also be used with `source`, see [python-dotenv's documentation](https://saurabh-kumar.com/python-dotenv/#usages) for more details. -->
<p>python-dotenvはファイルをパースするために使用されるので、<code>export</code>のようなbashのようなセマンティクスを使用することができます。(お使いのOSや環境によっては)dotenvファイルを<code>source</code>でも使用できる場合があります。詳細については、<a href="https://saurabh-kumar.com/python-dotenv/#usages">python-dotenv's documentation</a>を参照してください。</p>
<!-- Pydantic settings consider `extra` config in case of dotenv file. It means if you set the `extra=forbid` (*default*) on `model_config` and your dotenv file contains an entry for a field that is not defined in settings model, it will raise `ValidationError` in settings construction. -->
<p>Pydanticの設定では、dotenvファイルの場合に<code>extra</code>configを考慮します。これは、<code>model_config</code>で<code>extra=forbid</code>(<em>default</em>)を設定し、dotenvファイルに設定モデルで定義されていないフィールドのエントリが含まれている場合、設定の構築で<code>ValidationError</code>が発生することを意味します。</p>
<!-- For compatibility with pydantic 1.x BaseSettings you should use `extra=ignore`: -->
<p>pydantic 1.x BaseSettingsとの互換性のために、<code>extra=ignore</code>を使用してください。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file</span><span class="o">=</span><span class="s1">&#39;.env&#39;</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- Pydantic settings loads all the values from dotenv file and passes it to the model, regardless of the model's <code>env_prefix</code>.
So if you provide extra values in a dotenv file, whether they start with <code>env_prefix</code> or not, a <code>ValidationError</code> will be raised. -->
Pydantic設定は、モデルの<code>env_prefix</code>に関係なく、dotenvファイルからすべての値をロードしてモデルに渡します。
したがって、dotenvファイルに追加の値を指定すると、それらが<code>env_prefix</code>で始まるかどうかにかかわらず、<code>ValidationError</code>が発生します。</p>
</div>
<h2 id="command-line-support">Command Line Support<a class="headerlink" href="#command-line-support" title="Permanent link">&para;</a></h2>
<!-- Pydantic settings provides integrated CLI support, making it easy to quickly define CLI applications using Pydantic models. There are two primary use cases for Pydantic settings CLI: -->
<p>Pydantic設定は統合されたCLIサポートを提供し、Pydanticモデルを使用してCLIアプリケーションを簡単にすばやく定義できるようにします。Pydantic設定CLIの主なユースケースは次の2つです。</p>
<!-- 1. When using a CLI to override fields in Pydantic models.
2. When using Pydantic models to define CLIs. -->
<ol>
<li>CLIを使用してPydanticモデルのフィールドを上書きする場合。</li>
<li>Pydanticモデルを使用してCLIを定義する場合。</li>
</ol>
<!-- By default, the experience is tailored towards use case #1 and builds on the foundations established in [parsing environment variables](#parsing-environment-variable-values). If your use case primarily falls into #2, you will likely want to enable [enforcing required arguments at the CLI](#enforce-required-arguments-at-cli). -->
<p>デフォルトでは、エクスペリエンスはユースケース#1に合わせて調整され、<a href="#parsing-environment-variable-values">parsing environment variables</a>で確立された基礎の上に構築されます。ユースケースが主に#2に該当する場合は、<a href="#enforce-required-arguments-at-cli">enforcing required arguments at the CLI</a>を有効にする必要があります。</p>
<h3 id="the-basics">The Basics<a class="headerlink" href="#the-basics" title="Permanent link">&para;</a></h3>
<!-- To get started, let's revisit the example presented in [parsing environment variables](#parsing-environment-variable-values) but using a Pydantic settings CLI: -->
<p>最初に、<a href="#parsing-environment-variable-values">parsing environment variables</a>で示した例を、Pydantic設定CLIを使用してもう一度見てみましょう。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="k">class</span> <span class="nc">DeepSubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v4</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">v2</span><span class="p">:</span> <span class="nb">bytes</span>
    <span class="n">v3</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">deep</span><span class="p">:</span> <span class="n">DeepSubModel</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">v0</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;example.py&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--v0=0&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model={&quot;v1&quot;: &quot;json-1&quot;, &quot;v2&quot;: &quot;json-2&quot;}&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.v2=nested-2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.v3=3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;--sub_model.deep.v4=v4&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;v0&#39;: &#39;0&#39;,</span>
<span class="sd">    &#39;sub_model&#39;: {&#39;v1&#39;: &#39;json-1&#39;, &#39;v2&#39;: b&#39;nested-2&#39;, &#39;v3&#39;: 3, &#39;deep&#39;: {&#39;v4&#39;: &#39;v4&#39;}},</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<!-- To enable CLI parsing, we simply set the `cli_parse_args` flag to a valid value, which retains similar conotations as defined in `argparse`. Alternatively, we can also directly provide the args to parse at time of instantiation: -->
<p>CLIでのパースを有効にするには、単に<code>cli_parse_args</code>フラグを有効な値に設定します。このフラグは<code>argparse</code>で定義されているのと同様の意味を保持します。あるいは、インスタンス化時にパースする引数を直接指定することもできます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">this_foo</span><span class="p">:</span> <span class="nb">str</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">_cli_parse_args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;--this_foo&#39;</span><span class="p">,</span> <span class="s1">&#39;is such a foo&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;this_foo&#39;: &#39;is such a foo&#39;}</span>
</code></pre></div>
<p>Note that a CLI settings source is <a href="#field-value-priority"><strong>the topmost source</strong></a> by default unless its <a href="#customise-settings-sources">priority value is customised</a>:
CLIの設定ソースは、<a href="#customise-settings-sources">priority value is customised</a>でない限り、デフォルトで<a href="#field-value-priority"><strong>the topmost source</strong></a>であることに注意してください。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">CliSettingsSource</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_foo</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">CliSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MY_FOO&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;from environment&#39;</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_foo=from cli&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_foo&#39;: &#39;from environment&#39;}</span>
</code></pre></div>
<h4 id="lists">Lists<a class="headerlink" href="#lists" title="Permanent link">&para;</a></h4>
<p>CLI argument parsing of lists supports intermixing of any of the below three styles:
リストのCLI引数のパースでは、次の3つのスタイルの混在がサポートされています。</p>
<ul>
<li>JSON style <code>--field='[1,2]'</code></li>
<li>Argparse style <code>--field 1 --field 2</code></li>
<li>Lazy style <code>--field=1,2</code></li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">my_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;[1,2]&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_list&#39;</span><span class="p">,</span> <span class="s1">&#39;1,2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_list&#39;: [1, 2]}</span>
</code></pre></div>
<h4 id="dictionaries">Dictionaries<a class="headerlink" href="#dictionaries" title="Permanent link">&para;</a></h4>
<p>CLI argument parsing of dictionaries supports intermixing of any of the below two styles:
ディクショナリのCLI引数のパースでは、次の2つのスタイルの混在がサポートされています。</p>
<ul>
<li>JSON style <code>--field='{"k1": 1, "k2": 2}'</code></li>
<li>Environment variable style <code>--field k1=1 --field k2=2</code></li>
</ul>
<!-- These can be used in conjunction with list forms as well, e.g: -->
<p>これらは、次のようにリスト形式と組み合わせて使用することもできます。</p>
<ul>
<li><code>--field k1=1,k2=2 --field k3=3 --field '{"k4": 4}'</code> etc.</li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">my_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;{&quot;k1&quot;:1,&quot;k2&quot;:2}&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_dict&#39;: {&#39;k1&#39;: 1, &#39;k2&#39;: 2}}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;k1=1&#39;</span><span class="p">,</span> <span class="s1">&#39;--my_dict&#39;</span><span class="p">,</span> <span class="s1">&#39;k2=2&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;my_dict&#39;: {&#39;k1&#39;: 1, &#39;k2&#39;: 2}}</span>
</code></pre></div>
<h4 id="literals-and-enums">Literals and Enums<a class="headerlink" href="#literals-and-enums" title="Permanent link">&para;</a></h4>
<p>CLI argument parsing of literals and enums are converted into CLI choices.
リテラルおよび列挙型のCLI引数のパースは、CLIでの選択項目に変換されます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">IntEnum</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Fruit</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
    <span class="n">pear</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">kiwi</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">lime</span> <span class="o">=</span> <span class="mi">2</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">fruit</span><span class="p">:</span> <span class="n">Fruit</span>
    <span class="n">pet</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;bird&#39;</span><span class="p">]</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--fruit&#39;</span><span class="p">,</span> <span class="s1">&#39;lime&#39;</span><span class="p">,</span> <span class="s1">&#39;--pet&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;fruit&#39;: &lt;Fruit.lime: 2&gt;, &#39;pet&#39;: &#39;cat&#39;}</span>
</code></pre></div>
<h4 id="aliases">Aliases<a class="headerlink" href="#aliases" title="Permanent link">&para;</a></h4>
<!-- Pydantic field aliases are added as CLI argument aliases. Aliases of length one are converted into short options. -->
<p>Pydanticフィールドエイリアスは、CLI引数エイリアスとして追加されます。長さ1のエイリアスは、短いオプションに変換されます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AliasChoices</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;fname&#39;</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">last_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;lname&#39;</span><span class="p">,</span> <span class="n">AliasPath</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="p">)</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--fname&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;--lname&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;-l&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;John,Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>

<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;--lname&#39;</span><span class="p">,</span> <span class="s1">&#39;Doe&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">User</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;first_name&#39;: &#39;John&#39;, &#39;last_name&#39;: &#39;Doe&#39;}</span>
</code></pre></div>
<h3 id="subcommands-and-positional-arguments">Subcommands and Positional Arguments<a class="headerlink" href="#subcommands-and-positional-arguments" title="Permanent link">&para;</a></h3>
<!-- Subcommands and positional arguments are expressed using the `CliSubCommand` and `CliPositionalArg` annotations.
These annotations can only be applied to required fields (i.e. fields that do not have a default value).
Furthermore, subcommands must be a valid type derived from either a pydantic `BaseModel` or pydantic.dataclasses `dataclass`. -->
<p>サブコマンドと位置引数は、<code>CliSubCommand</code>および<code>CliPositionalArg</code>アノテーションを使用して表現されます。
これらの注釈は必須フィールド(つまり、デフォルト値のないフィールド)にのみ適用できます。
さらに、サブコマンドはpydanic<code>BaseModel</code>またはpydanic.dataclasses<code>dataclass</code>から派生した有効な型でなければなりません。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- CLI settings subcommands are limited to a single subparser per model. In other words, all subcommands for a model are grouped under a single subparser; it does not allow for multiple subparsers with each subparser having its own set of subcommands. For more information on subparsers, see <a href="https://docs.python.org/3/library/argparse.html#sub-commands">argparse subcommands</a>. -->
CLI設定サブコマンドは、モデルごとに1つのサブパーサーに制限されています。つまり、モデルのすべてのサブコマンドは1つのサブパーサーにグループ化されます。各サブパーサーが独自のサブコマンドセットを持つ複数のサブパーサーは許可されません。サブパーサーの詳細については、<a href="https://docs.python.org/3/library/argparse.html#sub-commands">argparse subcommands</a>を参照してください。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- <code>CliSubCommand</code> and <code>CliPositionalArg</code> are always case sensitive and do not support aliases. -->
<code>CliSubCommand</code>と<code>CliPositionalArg</code>は常に大文字と小文字が区別され、エイリアスをサポートしていません。</p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">pydantic.dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">CliPositionalArg</span><span class="p">,</span>
    <span class="n">CliSubCommand</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">FooPlugin</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git-plugins-foo - Extra deep foo plugin command&quot;&quot;&quot;</span>

    <span class="n">x_feature</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Enable &quot;X&quot; feature&#39;</span><span class="p">)</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">BarPlugin</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git-plugins-bar - Extra deep bar plugin command&quot;&quot;&quot;</span>

    <span class="n">y_feature</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Enable &quot;Y&quot; feature&#39;</span><span class="p">)</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Plugins</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git-plugins - Fake plugins for GIT&quot;&quot;&quot;</span>

    <span class="n">foo</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">FooPlugin</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Foo is fake plugin&#39;</span><span class="p">)</span>

    <span class="n">bar</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">BarPlugin</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Bar is fake plugin&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Clone</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git-clone - Clone a repository into a new directory&quot;&quot;&quot;</span>

    <span class="n">repository</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The repo ...&#39;</span><span class="p">)</span>

    <span class="n">directory</span><span class="p">:</span> <span class="n">CliPositionalArg</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The dir ...&#39;</span><span class="p">)</span>

    <span class="n">local</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;When the repo ...&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Git</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_prog_name</span><span class="o">=</span><span class="s1">&#39;git&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;git - The stupid content tracker&quot;&quot;&quot;</span>

    <span class="n">clone</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Clone</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Clone a repo ...&#39;</span><span class="p">)</span>

    <span class="n">plugins</span><span class="p">:</span> <span class="n">CliSubCommand</span><span class="p">[</span><span class="n">Plugins</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Fake GIT plugins&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Git</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: git [-h] {clone,plugins} ...</span>

<span class="sd">git - The stupid content tracker</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help       show this help message and exit</span>

<span class="sd">subcommands:</span>
<span class="sd">  {clone,plugins}</span>
<span class="sd">    clone          Clone a repo ...</span>
<span class="sd">    plugins        Fake GIT plugins</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;clone&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Git</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: git clone [-h] [--local bool] [--shared bool] REPOSITORY DIRECTORY</span>

<span class="sd">git-clone - Clone a repository into a new directory</span>

<span class="sd">positional arguments:</span>
<span class="sd">  REPOSITORY    The repo ...</span>
<span class="sd">  DIRECTORY     The dir ...</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help    show this help message and exit</span>
<span class="sd">  --local bool  When the repo ... (default: False)</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;plugins&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Git</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: git plugins bar [-h] [--my_feature bool]</span>

<span class="sd">git-plugins-bar - Extra deep bar plugin command</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help        show this help message and exit</span>
<span class="sd">  --y_feature bool  Enable &quot;Y&quot; feature (default: False)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="customizing-the-cli-experience">Customizing the CLI Experience<a class="headerlink" href="#customizing-the-cli-experience" title="Permanent link">&para;</a></h3>
<!-- The below flags can be used to customise the CLI experience to your needs. -->
<p>次のフラグを使用して、必要に応じてCLIエクスペリエンスをカスタマイズできます。</p>
<h4 id="change-the-displayed-program-name">Change the Displayed Program Name<a class="headerlink" href="#change-the-displayed-program-name" title="Permanent link">&para;</a></h4>
<!-- Change the default program name displayed in the help text usage by setting `cli_prog_name`. By default, it will derive the name of the currently executing program from `sys.argv[0]`, just like argparse. -->
<p><code>cli_prog_name</code>を設定して、ヘルプテキストの使用方法に表示されるデフォルトのプログラム名を変更します。デフォルトでは、argparseと同様に、現在実行中のプログラムの名前を<code>sys.argv[0]</code>から取得します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_prog_name</span><span class="o">=</span><span class="s1">&#39;appdantic&#39;</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: appdantic [-h]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help  show this help message and exit</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="change-whether-cli-should-exit-on-error">Change Whether CLI Should Exit on Error<a class="headerlink" href="#change-whether-cli-should-exit-on-error" title="Permanent link">&para;</a></h4>
<!-- Change whether the CLI internal parser will exit on error or raise a `SettingsError` exception by using `cli_exit_on_error`. By default, the CLI internal parser will exit on error. -->
<p><code>cli_exit_on_error</code>を使用して、CLI内部パーサーがエラー時に終了するか、<code>SettingsError</code>例外を発生させるかを変更します。デフォルトでは、CLI内部パーサーはエラー時に終了します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsError</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span> <span class="o">...</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--bad-arg&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">SettingsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; error parsing CLI: unrecognized arguments: --bad-arg</span>
</code></pre></div>
<h4 id="enforce-required-arguments-at-cli">Enforce Required Arguments at CLI<a class="headerlink" href="#enforce-required-arguments-at-cli" title="Permanent link">&para;</a></h4>
<!-- Pydantic settings is designed to pull values in from various sources when instantating a model.
This means a field that is required is not strictly required from any single source (e.g. the CLI).
Instead, all that matters is that one of the sources provides the required value. -->
<p>Pydantic設定は、モデルをインスタンス化するときにさまざまなソースから値を取得するように設計されている。
つまり、必須フィールドは、単一のソース(CLIなど)からは厳密に必須ではありません。
代わりに重要なのは、ソースの1つが必要な値を提供することだけです。</p>
<!-- However, if your use case [aligns more with #2](#command-line-support), using Pydantic models to define CLIs, you will likely want required fields to be _strictly required at the CLI_. We can enable this behavior by using `cli_enforce_required`. -->
<p>しかし、Pydanticモデルを使用してCLIを定義するユースケース<a href="#command-line-support">#2</a>では、必須フィールドをCLIで厳密に必須にする必要があります。この動作を有効にするには、<code>cli_enforce_required</code>を使用します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsError</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cli_enforce_required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cli_exit_on_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">my_required_field</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;a top level required field&#39;</span><span class="p">)</span>


<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;MY_REQUIRED_FIELD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;hello from environment&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="n">SettingsError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; error parsing CLI: the following arguments are required: --my_required_field</span>
</code></pre></div>
<h4 id="change-the-none-type-parse-string">Change the None Type Parse String<a class="headerlink" href="#change-the-none-type-parse-string" title="Permanent link">&para;</a></h4>
<!-- Change the CLI string value that will be parsed (e.g. "null", "void", "None", etc.) into `None` by setting `cli_parse_none_str`. By default it will use the `env_parse_none_str` value if set. Otherwise, it will default to "null" if `cli_avoid_json` is `False`, and "None" if `cli_avoid_json` is `True`. -->
<p>解析されるCLI文字列値("null"、"void"、"None"など)を<code>None</code>に変更するには、<code>cli_parse_none_str</code>を設定します。デフォルトでは、設定されている場合は<code>env_parse_none_str</code>値が使用されます。設定されていない場合は、<code>cli_avoid_json</code>が<code>False</code>の場合はデフォルトで"null"になり、<code>cli_avoid_json</code>が<code>True</code>の場合はデフォルトで"None"になります。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_parse_none_str</span><span class="o">=</span><span class="s1">&#39;void&#39;</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the top level v0 option&#39;</span><span class="p">)</span>


<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--v1&#39;</span><span class="p">,</span> <span class="s1">&#39;void&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">()</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;v1&#39;: None}</span>
</code></pre></div>
<h4 id="hide-none-type-values">Hide None Type Values<a class="headerlink" href="#hide-none-type-values" title="Permanent link">&para;</a></h4>
<!-- Hide `None` values from the CLI help text by enabling `cli_hide_none_type`. -->
<p><code>cli_hide_none_type</code>を有効にして、CLIヘルプテキストから<code>None</code>値を非表示にします。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_hide_none_type</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">v0</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the top level v0 option&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--v0 str]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help  show this help message and exit</span>
<span class="sd">  --v0 str    the top level v0 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="avoid-adding-json-cli-options">Avoid Adding JSON CLI Options<a class="headerlink" href="#avoid-adding-json-cli-options" title="Permanent link">&para;</a></h4>
<!-- Avoid adding complex fields that result in JSON strings at the CLI by enabling `cli_avoid_json`. -->
<p><code>cli_avoid_json</code>を有効にして、CLIでJSON文字列になる複雑なフィールドを追加しないようにします。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">v1</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the sub model v1 option&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_avoid_json</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The help summary for SubModel related options&#39;</span>
    <span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--sub_model.v1 int]</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help          show this help message and exit</span>

<span class="sd">sub_model options:</span>
<span class="sd">  The help summary for SubModel related options</span>

<span class="sd">  --sub_model.v1 int  the sub model v1 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="use-class-docstring-for-group-help-text">Use Class Docstring for Group Help Text<a class="headerlink" href="#use-class-docstring-for-group-help-text" title="Permanent link">&para;</a></h4>
<!-- By default, when populating the group help text for nested models it will pull from the field descriptions.
Alternatively, we can also configure CLI settings to pull from the class docstring instead. -->
<p>デフォルトでは、ネストされたモデルのグループヘルプテキストを設定すると、フィールドの説明から取得されます。
代わりに、クラスdocstringからプルするようにCLI設定を構成することもできます。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- If the field is a union of nested models the group help text will always be pulled from the field description; even if <code>cli_use_class_docs_for_groups</code> is set to <code>True</code>. -->
フィールドがネストされたモデルの結合である場合、<code>cli_use_class_docs_for_groups</code>が<code>True</code>に設定されていても、グループのヘルプテキストは常にフィールドの説明から取得されます。</p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The help text from the class docstring.&quot;&quot;&quot;</span>

    <span class="n">v1</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;the sub model v1 option&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">,</span> <span class="n">cli_parse_args</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cli_use_class_docs_for_groups</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;My application help text.&quot;&quot;&quot;</span>

    <span class="n">sub_model</span><span class="p">:</span> <span class="n">SubModel</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;The help text from the field description&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">]</span>
    <span class="n">Settings</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">SystemExit</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="c1">#&gt; 0</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">usage: example.py [-h] [--sub_model JSON] [--sub_model.v1 int]</span>

<span class="sd">My application help text.</span>

<span class="sd">options:</span>
<span class="sd">  -h, --help          show this help message and exit</span>

<span class="sd">sub_model options:</span>
<span class="sd">  The help text from the class docstring.</span>

<span class="sd">  --sub_model JSON    set sub_model from JSON string</span>
<span class="sd">  --sub_model.v1 int  the sub model v1 option (required)</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="integrating-with-existing-parsers">Integrating with Existing Parsers<a class="headerlink" href="#integrating-with-existing-parsers" title="Permanent link">&para;</a></h3>
<!-- A CLI settings source can be integrated with existing parsers by overriding the default CLI settings source with a user defined one that specifies the `root_parser` object. -->
<p>CLI設定ソースは、デフォルトのCLI設定ソースを<code>root_parser</code>オブジェクトを指定するユーザ定義の設定ソースで上書きすることで、既存のパーサと統合できます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">CliSettingsSource</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pear&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;lime&#39;</span><span class="p">])</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Bob&#39;</span>


<span class="c1"># Set existing `parser` as the `root_parser` object for the user defined settings source</span>
<span class="n">cli_settings</span> <span class="o">=</span> <span class="n">CliSettingsSource</span><span class="p">(</span><span class="n">Settings</span><span class="p">,</span> <span class="n">root_parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>

<span class="c1"># Parse and load CLI settings from the command line into the settings source.</span>
<span class="n">sys</span><span class="o">.</span><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;example.py&#39;</span><span class="p">,</span> <span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;waldo&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">_cli_settings_source</span><span class="o">=</span><span class="n">cli_settings</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;name&#39;: &#39;waldo&#39;}</span>

<span class="c1"># Load CLI settings from pre-parsed arguments. i.e., the parsing occurs elsewhere and we</span>
<span class="c1"># just need to load the pre-parsed args into the settings source.</span>
<span class="n">parsed_args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s1">&#39;--food&#39;</span><span class="p">,</span> <span class="s1">&#39;kiwi&#39;</span><span class="p">,</span> <span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="s1">&#39;ralph&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">_cli_settings_source</span><span class="o">=</span><span class="n">cli_settings</span><span class="p">(</span><span class="n">parsed_args</span><span class="o">=</span><span class="n">parsed_args</span><span class="p">))</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;name&#39;: &#39;ralph&#39;}</span>
</code></pre></div>
<!-- A `CliSettingsSource` connects with a `root_parser` object by using parser methods to add `settings_cls` fields as command line arguments.
The `CliSettingsSource` internal parser representation is based on the `argparse` library, and therefore, requires parser methods that support the same attributes as their `argparse` counterparts.
The available parser methods that can be customised, along with their argparse counterparts (the defaults), are listed below: -->
<p><code>CliSettingsSource</code>は、パーサメソッドを使用して<code>settings_cls</code>フィールドをコマンドライン引数として追加することにより、<code>root_parser</code>オブジェクトと接続します。
<code>CliSettingsSource</code>内部パーサー表現は<code>argparse</code>ライブラリに基づいているので、対応する<code>argparse</code>と同じ属性をサポートするパーサーメソッドが必要です。
カスタマイズできる使用可能なパーサーメソッドと、対応するargparse(デフォルト)を次に示します。</p>
<ul>
<li><code>parse_args_method</code> - (<code>argparse.ArgumentParser.parse_args</code>)</li>
<li><code>add_argument_method</code> - (<code>argparse.ArgumentParser.add_argument</code>)</li>
<li><code>add_argument_group_method</code> - (<code>argparse.ArgumentParser.add_argument_group</code>)</li>
<li><code>add_parser_method</code> - (<code>argparse._SubParsersAction.add_parser</code>)</li>
<li><code>add_subparsers_method</code> - (<code>argparse.ArgumentParser.add_subparsers</code>)</li>
<li><code>formatter_class</code> - (<code>argparse.HelpFormatter</code>)</li>
</ul>
<!-- For a non-argparse parser the parser methods can be set to `None` if not supported. The CLI settings will only raise an error when connecting to the root parser if a parser method is necessary but set to `None`. -->
<p>非argparseパーサの場合、サポートされていなければパーサメソッドを<code>None</code>に設定することができます。CLI設定では、パーサメソッドが必要であるが<code>None</code>に設定されている場合にのみ、ルートパーサに接続するときにエラーが発生します。</p>
<h2 id="secrets">Secrets<a class="headerlink" href="#secrets" title="Permanent link">&para;</a></h2>
<!-- Placing secret values in files is a common pattern to provide sensitive configuration to an application. -->
<p>ファイルに秘密の値を設定することは、アプリケーションに機密性の高い設定を提供するための一般的なパターンです。</p>
<!-- A secret file follows the same principal as a dotenv file except it only contains a single value and the file name is used as the key. A secret file will look like the following: -->
<p>シークレット・ファイルは、1つの値のみを含み、ファイル名がキーとして使用されることを除いて、dotenvファイルと同じプリンシパルに従います。シークレット・ファイルは次のようになります。</p>
<div class="language-text highlight"><span class="filename">/var/run/database_password</span><pre><span></span><code>super_secret_database_password
</code></pre></div>
<!-- Once you have your secret files, *pydantic* supports loading it in two ways: -->
<p>シークレットファイルを取得すると、<em>pydantic</em>は次の2つの方法でそのファイルのロードをサポートします。</p>
<!-- 1. Setting the `secrets_dir` on `model_config` in a `BaseSettings` class to the directory where your secret files are stored. -->
<ol>
<li><code>BaseSettings</code>クラスの<code>model_config</code>の<code>secrets_dir</code>を、シークレットファイルが保存されているディレクトリに設定します。</li>
</ol>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">secrets_dir</span><span class="o">=</span><span class="s1">&#39;/var/run&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">database_password</span><span class="p">:</span> <span class="nb">str</span>
</span></code></pre></div>
<!-- 2. Instantiating the `BaseSettings` derived class with the `_secrets_dir` keyword argument: -->
<ol>
<li><code>_secrets_dir</code>キーワード引数を使用して<code>BaseSettings</code>派生クラスのインスタンス化:
   <div class="language-text highlight"><pre><span></span><code>settings = Settings(_secrets_dir=&#39;/var/run&#39;)
</code></pre></div></li>
</ol>
<!-- In either case, the value of the passed argument can be any valid directory, either absolute or relative to the current working directory. **Note that a non existent directory will only generate a warning**.
From there, *pydantic* will handle everything for you by loading in your variables and validating them. -->
<p>どちらの場合も、渡される引数の値は、任意の有効なディレクトリ(絶対ディレクトリまたは現在の作業ディレクトリに対する相対ディレクトリ)にすることができます。<strong>存在しないディレクトリは警告を生成するだけであることに注意してください</strong>。
そこから、<em>pydantic</em>は変数をロードして検証することで、すべてを処理します。</p>
<!-- Even when using a secrets directory, *pydantic* will still read environment variables from a dotenv file or the environment,**a dotenv file and environment variables will always take priority over values loaded from the secrets directory**. -->
<p>secretsディレクトリを使用する場合でも、<em>pydantic</em>はdotenvファイルまたは環境から環境変数を読み込みます。<strong>dotenvファイルと環境変数は、secretsディレクトリからロードされた値よりも常に優先されます</strong>。</p>
<!-- Passing a file path via the `_secrets_dir` keyword argument on instantiation (method 2) will override the value (if any) set on the `model_config` class. -->
<p>インスタンス化(メソッド2)で<code>_secrets_dir</code>キーワード引数を介してファイルパスを渡すと、<code>model_config</code>クラスに設定された値(もしあれば)が上書きされます。</p>
<h3 id="use-case-docker-secrets">Use Case: Docker Secrets<a class="headerlink" href="#use-case-docker-secrets" title="Permanent link">&para;</a></h3>
<!-- Docker Secrets can be used to provide sensitive configuration to an application running in a Docker container.
To use these secrets in a *pydantic* application the process is simple. More information regarding creating, managing and using secrets in Docker see the official [Docker documentation](https://docs.docker.com/engine/reference/commandline/secret/). -->
<p>Docker Secretsは、Dockerコンテナで実行されているアプリケーションに機密性の高い設定を提供するために使用できる。
これらのシークレットを<em>pydantic</em>アプリケーションで使用するプロセスは簡単です。Dockerでのシークレットの作成、管理、使用に関する詳細は、公式の<a href="https://docs.docker.com/engine/reference/commandline/secret/">Docker documentation</a>を参照してください。</p>
<!-- First, define your `Settings` class with a `SettingsConfigDict` that specifies the secrets directory. -->
<p>まず、secretsディレクトリを指定する<code>SettingsConfigDict</code>で<code>Settings</code>クラスを定義します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>


<span class="hll"><span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
</span><span class="hll">    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">secrets_dir</span><span class="o">=</span><span class="s1">&#39;/run/secrets&#39;</span><span class="p">)</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">my_secret_data</span><span class="p">:</span> <span class="nb">str</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- By default <a href="https://docs.docker.com/engine/swarm/secrets/#how-docker-manages-secrets">Docker uses klzzwxh:0163</a> as the target mount point. If you want to use a different location, change <code>Config.secrets_dir</code> accordingly. -->
デフォルトでは、<a href="https://docs.docker.com/engine/swarm/secrets/#how-docker-manages-secrets">Dockerは<code>/run/secrets</code></a>をターゲットマウントポイントとして使用します。別の場所を使用したい場合は、それに応じて<code>Config.secrets_dir</code>を変更してください。</p>
</div>
<!-- Then, create your secret via the Docker CLI -->
<p>次に、Docker CLIを使用してシークレットを作成します。
<div class="language-bash highlight"><pre><span></span><code><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;This is a secret&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>docker<span class="w"> </span>secret<span class="w"> </span>create<span class="w"> </span>my_secret_data<span class="w"> </span>-
</code></pre></div></p>
<!-- Last, run your application inside a Docker container and supply your newly created secret -->
<p>最後に、Dockerコンテナ内でアプリケーションを実行し、新しく作成したシークレットを指定します。
<div class="language-bash highlight"><pre><span></span><code>docker<span class="w"> </span>service<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>pydantic-with-secrets<span class="w"> </span>--secret<span class="w"> </span>my_secret_data<span class="w"> </span>pydantic-app:latest
</code></pre></div></p>
<h2 id="azure-key-vault">Azure Key Vault<a class="headerlink" href="#azure-key-vault" title="Permanent link">&para;</a></h2>
<!-- You must set two parameters: -->
<p>次の2つのパラメータを設定する必要があります。</p>
<!-- - `url`: For example, `https://my-resource.vault.azure.net/`.
- `credential`: If you use `DefaultAzureCredential`, in local you can execute `az login` to get your identity credentials. The identity must have a role assignment (the recommended one is `Key Vault Secrets User`), so you can access the secrets. -->
<ul>
<li><code>url</code>:例えば<code>https://my-resource.vault.azure.net/</code>です。</li>
<li><code>credential</code>:<code>DefaultAzureCredential</code>を使用する場合は、ローカルで<code>az login</code>を実行してIDクレデンシャルを取得できます。シークレットにアクセスできるように、IDにロールが割り当てられている必要があります(推奨されるのは<code>Key Vault Secrets User</code>です)。</li>
</ul>
<!-- You must have the same naming convention in the field name as in the Key Vault secret name. For example, if the secret is named `SqlServerPassword`, the field name must be the same. You can use an alias too. -->
<p>フィールド名には、キー・ヴォールト・シークレット名と同じ命名規則を使用する必要があります。たとえば、シークレットの名前が<code>SqlServerPassword</code>の場合、フィールド名は同じである必要があります。別名も使用できます。</p>
<!-- In Key Vault, nested models are supported with the `--` separator. For example, `SqlServer--Password`. -->
<p>Key Vaultでは、ネストされたモデルは<code>--</code>セパレータでサポートされます。たとえば、<code>SqlServer--Password</code>のようになります。</p>
<!-- Key Vault arrays (e.g. `MySecret--0`, `MySecret--1`) are not supported. -->
<p>Key Vault配列(例えば<code>MySecret--0</code>、<code>MySecret--1</code>)はサポートされていません。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">azure.identity</span> <span class="kn">import</span> <span class="n">DefaultAzureCredential</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AzureKeyVaultSettingsSource</span><span class="p">,</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">SubModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">AzureKeyVaultSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">sub</span><span class="p">:</span> <span class="n">SubModel</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="n">az_key_vault_settings</span> <span class="o">=</span> <span class="n">AzureKeyVaultSettingsSource</span><span class="p">(</span>
            <span class="n">settings_cls</span><span class="p">,</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;AZURE_KEY_VAULT_URL&#39;</span><span class="p">],</span>
            <span class="n">DefaultAzureCredential</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">dotenv_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
            <span class="n">az_key_vault_settings</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
<h2 id="other-settings-source">Other settings source<a class="headerlink" href="#other-settings-source" title="Permanent link">&para;</a></h2>
<!-- Other settings sources are available for common configuration files: -->
<p>その他の設定ソースは、一般的な設定ファイルに使用できます。</p>
<!-- - `JsonConfigSettingsSource` using `json_file` and `json_file_encoding` arguments
- `PyprojectTomlConfigSettingsSource` using *(optional)* `pyproject_toml_depth` and *(optional)* `pyproject_toml_table_header` arguments
- `TomlConfigSettingsSource` using `toml_file` argument
- `YamlConfigSettingsSource` using `yaml_file` and yaml_file_encoding arguments -->
<ul>
<li><code>json_file</code>および<code>json_file_encoding</code>引数を使用した<code>JsonConfigSettingsSource</code></li>
<li><em>(オプション)</em><code>pyproject_toml_depth</code>および<em>(オプション)</em><code>pyproject_toml_table_header</code>引数を使用した<code>PyprojectTomlConfigSettingsSource</code></li>
<li><code>toml_file</code>引数を使用した<code>TomlConfigSettingsSource</code></li>
<li><code>yaml_file</code>およびyaml_file_encoding引数を使用した<code>YamlConfigSettingsSource</code></li>
</ul>
<!-- You can also provide multiple files by providing a list of path: -->
<p>パスのリストを指定して、複数のファイルを指定することもできます。
<div class="language-py highlight"><pre><span></span><code><span class="n">toml_file</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;config.default.toml&#39;</span><span class="p">,</span> <span class="s1">&#39;config.custom.toml&#39;</span><span class="p">]</span>
</code></pre></div></p>
<!-- To use them, you can use the same mechanism described [here](#customise-settings-sources) -->
<p>これらを使用するには、<a href="#customise-settings-sources">ここ</a>で説明したのと同じメカニズムを使用できます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
    <span class="n">TomlConfigSettingsSource</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Nested</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">nested_field</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foobar</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">nested</span><span class="p">:</span> <span class="n">Nested</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">toml_file</span><span class="o">=</span><span class="s1">&#39;config.toml&#39;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">TomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>
</code></pre></div>
<!-- This will be able to read the following "config.toml" file, located in your working directory: -->
<p>これにより、ワーキングディレクトリにある次の「config.toml」ファイルを読み込むことができます。</p>
<div class="language-toml highlight"><pre><span></span><code><span class="n">foobar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hello&quot;</span>
<span class="k">[nested]</span>
<span class="n">nested_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;world!&quot;</span>
</code></pre></div>
<h3 id="pyprojecttoml">pyproject.toml<a class="headerlink" href="#pyprojecttoml" title="Permanent link">&para;</a></h3>
<!-- "pyproject.toml" is a standardized file for providing configuration values in Python projects. [PEP 518](https://peps.python.org/pep-0518/#tool-table) defines a `[tool]` table that can be used to provide arbitrary tool configuration.
While encouraged to use the `[tool]` table, `PyprojectTomlConfigSettingsSource` can be used to load variables from any location with in "pyproject.toml" file. -->
<p>「pyproject.toml」は、Pythonプロジェクトで構成値を提供するための標準化されたファイルです。<a href="https://peps.python.org/pep-0518/#tool-table">PEP 518</a>では、任意のツール構成を提供するために使用できる<code>[tool]</code>テーブルが定義されています。
<code>[tool]</code>テーブルを使用することをお勧めしますが、<code>PyprojectTomlConfigSettingsSource</code>は"pyproject.toml"ファイル内の任意の場所から変数をロードするために使用できます。</p>
<!-- This is controlled by providing `SettingsConfigDict(pyproject_toml_table_header=tuple[str, ...])` where the value is a tuple of header parts.
By default, `pyproject_toml_table_header=('tool', 'pydantic-settings')` which will load variables from the `[tool.pydantic-settings]` table. -->
<p>これは<code>SettingsConfigDict(pyproject_toml_table_header=tuple[str, .])</code>を提供することで制御されます。ここで、値はヘッダー部分のタプルです。
デフォルトでは<code>pyproject_toml_table_header=('tool','pydantic-settings')</code>で、<code>[tool.pydantic-settings]</code>テーブルから変数をロードします。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from the table used by default.&quot;&quot;&quot;</span>

    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="k">class</span> <span class="nc">SomeTableSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from a user defined table.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
        <span class="n">pyproject_toml_table_header</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;tool&#39;</span><span class="p">,</span> <span class="s1">&#39;some-table&#39;</span><span class="p">)</span>
    <span class="p">)</span>


<span class="k">class</span> <span class="nc">RootSettings</span><span class="p">(</span><span class="n">Settings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example loading values from the root of a pyproject.toml file.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">pyproject_toml_table_header</span><span class="o">=</span><span class="p">())</span>
</code></pre></div>
<!-- This will be able to read the following "pyproject.toml" file, located in your working directory, resulting in `Settings(field='default-table')`, `SomeTableSettings(field='some-table')`, & `RootSettings(field='root')`: -->
<p>これは、作業ディレクトリにある以下の"pyproject.toml"ファイルを読み込むことができ、結果は<code>Settings(field='default-table')</code>、<code>SomeTableSettings(field='some-table')</code>、<code>RootSettings(field='root')</code>になります。</p>
<div class="language-toml highlight"><pre><span></span><code><span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;root&quot;</span>

<span class="k">[tool.pydantic-settings]</span>
<span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;default-table&quot;</span>

<span class="k">[tool.some-table]</span>
<span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some-table&quot;</span>
</code></pre></div>
<!-- By default, `PyprojectTomlConfigSettingsSource` will only look for a "pyproject.toml" in the your current working directory.
However, there are two options to change this behavior. -->
<p>デフォルトでは、<code>PyprojectTomlConfigSettingsSource</code>は現在の作業ディレクトリ内の"pyproject.toml"のみを検索します。
ただし、この動作を変更するには2つのオプションがあります。</p>
<!-- * `SettingsConfigDict(pyproject_toml_depth=<int>)` can be provided to check `<int>` number of directories **up** in the directory tree for a "pyproject.toml" if one is not found in the current working directory. By default, no parent directories are checked.
* An explicit file path can be provided to the source when it is instantiated (e.g. `PyprojectTomlConfigSettingsSource(settings_cls, Path('~/.config').resolve() / 'pyproject.toml')`). If a file path is provided this way, it will be treated as absolute (no other locations are checked). -->
<ul>
<li><code>SettingsConfigDict(pyproject_toml_depth=&lt;int&gt;)</code>を提供して、"pyproject.toml"が現在の作業ディレクトリに見つからない場合に、ディレクトリツリー内のディレクトリ数<strong>up</strong>をチェックすることができます。デフォルトでは、親ディレクトリはチェックされません。</li>
<li>ソースがインスタンス化されるときに、明示的なファイルパスをソースに提供することができます(例:<code>PyprojectTomlConfigSettingsSource(settings_cls, Path('~/.config').resolve()/'pyproject.toml')</code>)。ファイルパスがこのように提供される場合、絶対パスとして扱われます(他の場所はチェックされません)。</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">DiscoverSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example of discovering a pyproject.toml in parent directories in not in `Path.cwd()`.&quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">pyproject_toml_depth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),)</span>


<span class="k">class</span> <span class="nc">ExplicitFilePathSettings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Example of explicitly providing the path to the file to load.&quot;&quot;&quot;</span>

    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">PyprojectTomlConfigSettingsSource</span><span class="p">(</span>
                <span class="n">settings_cls</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;~/.config&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;pyproject.toml&#39;</span>
            <span class="p">),</span>
        <span class="p">)</span>
</code></pre></div>
<h2 id="field-value-priority">Field value priority<a class="headerlink" href="#field-value-priority" title="Permanent link">&para;</a></h2>
<!-- In the case where a value is specified for the same `Settings` field in multiple ways, the selected value is determined as follows (in descending order of priority): -->
<p>同じ「設定」フィールドに複数の方法で値が指定されている場合、選択された値は次のように決定されます(優先順位の高い順に)。</p>
<!-- 1. If `cli_parse_args` is enabled, arguments passed in at the CLI.
2. Arguments passed to the `Settings` class initialiser.
3. Environment variables, e.g. `my_prefix_special_function` as described above.
4. Variables loaded from a dotenv (`.env`) file.
5. Variables loaded from the secrets directory.
6. The default field values for the `Settings` model. -->
<ol>
<li><code>cli_parse_args</code>が有効な場合、CLIに渡される引数</li>
<li><code>Settings</code>クラスのイニシャライザに渡される引数</li>
<li>環境変数。例えば、上で説明した<code>my_prefix_special_function</code></li>
<li>dotenv(<code>.env</code>)ファイルからロードされた変数</li>
<li>secretsディレクトリからロードされた変数</li>
<li><code>Settings</code>モデルのデフォルトのフィールド値</li>
</ol>
<h2 id="customise-settings-sources">Customise settings sources<a class="headerlink" href="#customise-settings-sources" title="Permanent link">&para;</a></h2>
<!-- If the default order of priority doesn't match your needs, it's possible to change it by overriding the `settings_customise_sources` method of your `Settings` . -->
<p>デフォルトの優先順位があなたのニーズに合わない場合は、<code>Settings</code>の<code>settings_customise_sources</code>メソッドをオーバーライドすることで変更できます。</p>
<!-- `settings_customise_sources` takes four callables as arguments and returns any number of callables as a tuple.
In turn these callables are called to build the inputs to the fields of the settings class. -->
<p><code>settings_customise_sources</code>は引数として4つのcallableを取り、任意の数のcallableをタプルとして返します。
次に、これらの呼び出し可能オブジェクトが呼び出されて、settingsクラスのフィールドへの入力が作成されます。</p>
<!-- Each callable should take an instance of the settings class as its sole argument and return a `dict`. -->
<p>各呼び出し可能オブジェクトは、設定クラスのインスタンスを唯一の引数として取り、<code>dict</code>を返します。</p>
<h3 id="changing-priority">Changing Priority<a class="headerlink" href="#changing-priority" title="Permanent link">&para;</a></h3>
<!-- The order of the returned callables decides the priority of inputs; first item is the highest priority. -->
<p>返される呼び出し可能オブジェクトの順序によって、入力の優先順位が決まります。最初の項目が最も高い優先順位になります。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">PostgresDsn</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">database_dsn</span><span class="p">:</span> <span class="n">PostgresDsn</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">init_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">(</span><span class="n">database_dsn</span><span class="o">=</span><span class="s1">&#39;postgres://postgres@localhost:5432/kwargs_db&#39;</span><span class="p">))</span>
<span class="c1">#&gt; database_dsn=MultiHostUrl(&#39;postgres://postgres@localhost:5432/kwargs_db&#39;)</span>
</code></pre></div>
<!-- By flipping `env_settings` and `init_settings`, environment variables now have precedence over `__init__` kwargs. -->
<p><code>env_settings</code>と<code>init_settings</code>を反転することで、環境変数が<code>__init__</code>kwargsよりも優先されるようになりました。</p>
<h3 id="adding-sources">Adding sources<a class="headerlink" href="#adding-sources" title="Permanent link">&para;</a></h3>
<!-- As explained earlier, *pydantic* ships with multiples built-in settings sources. However, you may occasionally need to add your own custom sources, `settings_customise_sources` makes this very easy: -->
<p>すでに説明したように、<em>pydantic</em>には複数の設定ソースが組み込まれています。ただし、独自のカスタムソースを追加する必要がある場合もあります。<code>settings_customise_sources</code>を使用すると、これを非常に簡単に行うことができます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseSettings</span><span class="p">,</span>
    <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="n">SettingsConfigDict</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">JsonConfigSettingsSource</span><span class="p">(</span><span class="n">PydanticBaseSettingsSource</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple settings source class that loads variables from a JSON file</span>
<span class="sd">    at the project&#39;s root.</span>

<span class="sd">    Here we happen to choose to use the `env_file_encoding` from Config</span>
<span class="sd">    when reading `config.json`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;env_file_encoding&#39;</span><span class="p">)</span>
        <span class="n">file_content_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
            <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;tests/example_test_config.json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">field_value</span> <span class="o">=</span> <span class="n">file_content_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">prepare_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">value_is_complex</span><span class="p">:</span> <span class="nb">bool</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_cls</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">field_value</span><span class="p">,</span> <span class="n">field_key</span><span class="p">,</span> <span class="n">value_is_complex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_field_value</span><span class="p">(</span>
                <span class="n">field</span><span class="p">,</span> <span class="n">field_name</span>
            <span class="p">)</span>
            <span class="n">field_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_field_value</span><span class="p">(</span>
                <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">field_value</span><span class="p">,</span> <span class="n">value_is_complex</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">field_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">field_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_value</span>

        <span class="k">return</span> <span class="n">d</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span><span class="n">env_file_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

    <span class="n">foobar</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">init_settings</span><span class="p">,</span>
            <span class="n">JsonConfigSettingsSource</span><span class="p">(</span><span class="n">settings_cls</span><span class="p">),</span>
            <span class="n">env_settings</span><span class="p">,</span>
            <span class="n">file_secret_settings</span><span class="p">,</span>
        <span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Settings</span><span class="p">())</span>
<span class="c1">#&gt; foobar=&#39;test&#39;</span>
</code></pre></div>
<h4 id="accesing-the-result-of-previous-sources">Accesing the result of previous sources<a class="headerlink" href="#accesing-the-result-of-previous-sources" title="Permanent link">&para;</a></h4>
<!-- Each source of settings can access the output of the previous ones. -->
<p>設定の各ソースは、前の設定の出力にアクセスできます。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Tuple</span>

<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">FieldInfo</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span> <span class="nc">MyCustomSource</span><span class="p">(</span><span class="n">PydanticBaseSettingsSource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_field_value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">FieldInfo</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span> <span class="o">...</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="c1"># Retrieve the aggregated settings from previous sources</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_state</span>
        <span class="n">current_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_setting&#39;</span><span class="p">)</span>

        <span class="c1"># Retrive settings from all sources individually</span>
        <span class="c1"># self.settings_sources_data[&quot;SettingsSourceName&quot;]: Dict[str, Any]</span>
        <span class="n">settings_sources_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings_sources_data</span>
        <span class="n">settings_sources_data</span><span class="p">[</span><span class="s1">&#39;SomeSettingsSource&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;some_setting&#39;</span><span class="p">)</span>

        <span class="c1"># Your code here...</span>
</code></pre></div>
<h3 id="removing-sources">Removing sources<a class="headerlink" href="#removing-sources" title="Permanent link">&para;</a></h3>
<!-- You might also want to disable a source: -->
<p>また、ソースを無効にすることもできます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">ValidationError</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span><span class="p">,</span> <span class="n">PydanticBaseSettingsSource</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">my_api_key</span><span class="p">:</span> <span class="nb">str</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">settings_customise_sources</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">settings_cls</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">BaseSettings</span><span class="p">],</span>
        <span class="n">init_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">env_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">dotenv_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
        <span class="n">file_secret_settings</span><span class="p">:</span> <span class="n">PydanticBaseSettingsSource</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">PydanticBaseSettingsSource</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="c1"># here we choose to ignore arguments from init_settings</span>
        <span class="k">return</span> <span class="n">env_settings</span><span class="p">,</span> <span class="n">file_secret_settings</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">Settings</span><span class="p">(</span><span class="n">my_api_key</span><span class="o">=</span><span class="s1">&#39;this is ignored&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc_info</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Settings</span>
<span class="sd">    my_api_key</span>
<span class="sd">      Field required [type=missing, input_value={}, input_type=dict]</span>
<span class="sd">        For further information visit https://errors.pydantic.dev/2/v/missing</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h2 id="in-place-reloading">In-place reloading<a class="headerlink" href="#in-place-reloading" title="Permanent link">&para;</a></h2>
<!-- In case you want to reload in-place an existing setting, you can do it by using its `__init__` method : -->
<p>既存の設定をインプレイスで再ロードしたい場合は、<code>__init__</code>メソッドを使って行うことができます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>


<span class="k">class</span> <span class="nc">Settings</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>


<span class="n">mutable_settings</span> <span class="o">=</span> <span class="n">Settings</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>

<span class="n">mutable_settings</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; bar</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="n">mutable_settings</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mutable_settings</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="c1">#&gt; foo</span>
</code></pre></div>









  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9h4m4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21H9m0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03V19Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12h-4M15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3h9m0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97V5Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
<script src="/flarelytics/client.js"></script>
    <script>
    window.mkdocs_run_deps = ["pydantic==2.9.0a1", "pydantic-core==2.20.1", "pydantic-extra-types==2.9.0"]
    </script>

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "navigation.tabs", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../extra/feedback.js"></script>
      
        <script src="../../extra/fluff.js"></script>
      
        <script src="https://samuelcolvin.github.io/mkdocs-run-code/run_code_main.js"></script>
      
    
  </body>
</html>