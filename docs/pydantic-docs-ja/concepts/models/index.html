
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data validation using Python type hints">
      
      
      
        <link rel="canonical" href="https://docs.pydantic.dev/concepts/models/">
      
      
        <link rel="prev" href="../../changelog/">
      
      
        <link rel="next" href="../fields/">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.28">
    
    
      
        <title>Models - Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../extra/terminal.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="grey">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tldr" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" class="md-header__button md-logo" aria-label="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Models
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="grey"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="grey"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/base_model/" class="md-tabs__link">
          
  
  API Documentation

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/secrets/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../errors/errors/" class="md-tabs__link">
          
  
  Error Messages

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../integrations/mypy/" class="md-tabs__link">
          
  
  Integrations

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://blog.pydantic.dev/" class="md-tabs__link">
        
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../pydantic_people/" class="md-tabs__link">
        
  
    
  
  Pydantic People

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" class="md-nav__button md-logo" aria-label="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why use Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help_with_pydantic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help with Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../version-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Models
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    <span class="md-ellipsis">
      TL;DR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-long-version" class="md-nav__link">
    <span class="md-ellipsis">
      The long version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      詳しい説明
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーション
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-model-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic model usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic model usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-methods-and-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Model methods and properties
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-models" class="md-nav__link">
    <span class="md-ellipsis">
      Nested models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rebuild-model-schema" class="md-nav__link">
    <span class="md-ellipsis">
      Rebuild model schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arbitrary-class-instances" class="md-nav__link">
    <span class="md-ellipsis">
      Arbitrary class instances
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Arbitrary class instances">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reserved-names" class="md-nav__link">
    <span class="md-ellipsis">
      Reserved names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Nested attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Helper functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Helper functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-models-without-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Creating models without validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generic-models" class="md-nav__link">
    <span class="md-ellipsis">
      Generic models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-model-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic model creation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rootmodel-and-custom-root-types" class="md-nav__link">
    <span class="md-ellipsis">
      RootModel and custom root types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faux-immutability" class="md-nav__link">
    <span class="md-ellipsis">
      Faux immutability
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abstract-base-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract base classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      Field ordering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#required-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Required fields
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-with-non-hashable-default-values" class="md-nav__link">
    <span class="md-ellipsis">
      Fields with non-hashable default values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-with-dynamic-default-values" class="md-nav__link">
    <span class="md-ellipsis">
      Fields with dynamic default values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatically-excluded-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Automatically excluded attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automatically excluded attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-vars" class="md-nav__link">
    <span class="md-ellipsis">
      Class vars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#private-model-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Private model attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Data conversion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-signature" class="md-nav__link">
    <span class="md-ellipsis">
      Model signature
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural-pattern-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Structural pattern matching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribute-copies" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute copies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Extra fields
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alias/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alias
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serialization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../postponed_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Postponed Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../strict_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Strict Mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type Adapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation_decorator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation Decorator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conversion_table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversion Table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pydantic_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Settings Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Pydantic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/base_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/root_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RootModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/type_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TypeAdapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/validate_call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validate Call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/aliases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aliases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_serializers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Serializers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/standard_library_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard Library Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/annotated_handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotated Handlers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic Core
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_core.core_schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic Extra Types
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Extra Types
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_color/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Color
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_country/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Country
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_payment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Payment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_phone_numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Phone Numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_routing_numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routing Numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_coordinate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coordinate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_mac_address/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mac Address
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_isbn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ISBN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_pendulum_dt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pendulum
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_currency_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Currency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_language_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_script_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Script Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_semantic_version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semantic Version
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_timezone_name/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timezone Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_ulid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ULID
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/secrets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secrets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Error Messages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Error Messages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error Handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/validation_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/usage_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Errors
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dev Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Dev Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mypy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/pycharm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyCharm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/hypothesis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hypothesis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/visual_studio_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visual Studio Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/datamodel_code_generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    datamodel-code-generator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/devtools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    devtools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/rich/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rich
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/linting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Production Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Production Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/aws_lambda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Lambda
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://blog.pydantic.dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic_people/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic People
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    <span class="md-ellipsis">
      TL;DR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-long-version" class="md-nav__link">
    <span class="md-ellipsis">
      The long version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      詳しい説明
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      バリデーション
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-model-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Basic model usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic model usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-methods-and-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Model methods and properties
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-models" class="md-nav__link">
    <span class="md-ellipsis">
      Nested models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rebuild-model-schema" class="md-nav__link">
    <span class="md-ellipsis">
      Rebuild model schema
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arbitrary-class-instances" class="md-nav__link">
    <span class="md-ellipsis">
      Arbitrary class instances
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Arbitrary class instances">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reserved-names" class="md-nav__link">
    <span class="md-ellipsis">
      Reserved names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Nested attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Helper functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Helper functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-models-without-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Creating models without validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generic-models" class="md-nav__link">
    <span class="md-ellipsis">
      Generic models
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-model-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic model creation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rootmodel-and-custom-root-types" class="md-nav__link">
    <span class="md-ellipsis">
      RootModel and custom root types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faux-immutability" class="md-nav__link">
    <span class="md-ellipsis">
      Faux immutability
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abstract-base-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract base classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      Field ordering
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#required-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Required fields
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-with-non-hashable-default-values" class="md-nav__link">
    <span class="md-ellipsis">
      Fields with non-hashable default values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fields-with-dynamic-default-values" class="md-nav__link">
    <span class="md-ellipsis">
      Fields with dynamic default values
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatically-excluded-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Automatically excluded attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automatically excluded attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class-vars" class="md-nav__link">
    <span class="md-ellipsis">
      Class vars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#private-model-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Private model attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Data conversion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-signature" class="md-nav__link">
    <span class="md-ellipsis">
      Model signature
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural-pattern-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Structural pattern matching
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribute-copies" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute copies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Extra fields
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                  

  
  


  <h1>Models</h1>

<!-- BEGIN INCLUDE ../warning.md -->

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>本サイトのドキュメントは、<a href="https://docs.pydantic.dev/latest/">Pydantic</a>の日本語翻訳の私家版です。</p>
<p>内容に不審な点がある場合は、<a href="https://docs.pydantic.dev/latest/">Pydantic</a>のドキュメントを確認してください。</p>
<p>翻訳に使用したPydanticのバージョンは、v2.8.2になります。</p>
</div>
<!-- END INCLUDE -->

<details class="api">
<summary>API Documentation</summary>
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel"><code>pydantic.main.BaseModel</code></a><br></p>
</details>
<!-- One of the primary ways of defining schema in Pydantic is via models. Models are simply classes which inherit from -->
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel"><code>pydantic.BaseModel</code></a> and define fields as annotated attributes.
Pydanticでスキーマを定義する主な方法の1つは、モデルを使用することです。モデルは単に
<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel"><code>pydantic.BaseModel</code></a>フィールドを注釈付き属性として定義します。</p>
<!-- You can think of models as similar to structs in languages like C, or as the requirements of a single endpoint in an API. -->
<p>モデルは、Cなどの言語の構造体に似ていると考えることも、APIの単一エンドポイントの要件と考えることもできます。</p>
<!-- Models share many similarities with Python's dataclasses, but have been designed with some subtle-yet-important differences that streamline certain workflows related to validation, serialization, and JSON schema generation. You can find more discussion of this in the [Dataclasses](dataclasses.md) section of the docs. -->
<p>モデルはPythonのデータクラスと多くの類似点を共有していますが、検証、シリアライゼーション、JSONスキーマ生成に関連する特定のワークフローを合理化するために、いくつかの微妙ではありますが重要な違いを持って設計されています。これについての詳細は、ドキュメントの<a href="../dataclasses/">Dataclasses</a>セクションを参照してください。</p>
<!-- Untrusted data can be passed to a model and, after parsing and validation, Pydantic guarantees that the fields of the resultant model instance will conform to the field types defined on the model. -->
<p>信頼できないデータをモデルに渡すことができますが、パースと検証の後、Pydanticは、結果のモデルインスタンスのフィールドがモデルで定義されたフィールドタイプに準拠することを保証します。</p>
<div class="admonition note">
<p class="admonition-title">Validation — a <em>deliberate</em> misnomer</p>
<h3 id="tldr">TL;DR<a class="headerlink" href="#tldr" title="Permanent link">&para;</a></h3>
<p><!-- We use the term "validation" to refer to the process of instantiating a model (or other type) that adheres to specified types and constraints. This task, which Pydantic is well known for, is most widely recognized as "validation" in colloquial terms, even though in other contexts the term "validation" may be more restrictive. -->
"バリデーション"という用語は、指定されたタイプと制約に従うモデル(または他のタイプ)をインスタンス化するプロセスを指すために使用します。Pydanticでよく知られているこのタスクは、口語では"バリデーション"として最も広く認識されていますが、他の文脈では"バリデーション"という用語はより限定的な可能性があります。</p>
<hr />
<h3 id="the-long-version">The long version<a class="headerlink" href="#the-long-version" title="Permanent link">&para;</a></h3>
<h3 id="_1">詳しい説明<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p><!-- The potential confusion around the term "validation" arises from the fact that, strictly speaking, Pydantic's primary focus doesn't align precisely with the dictionary definition of "validation": -->
"バリデーション"という用語をめぐる潜在的な混乱は、厳密に言えば、Pydanticの主な焦点が辞書の"バリデーション"の定義と正確に一致していないという事実からきています。</p>
<!-- ### validation
 _noun_
 the action of checking or proving the validity or accuracy of something.
-->
<h3 id="_2">バリデーション<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<blockquote>
<p><em>名詞</em> 何かの有効性または正確さをチェックまたは証明する行為。</p>
</blockquote>
<p><!-- In Pydantic, the term "validation" refers to the process of instantiating a model (or other type) that adheres to specified types and constraints. Pydantic guarantees the types and constraints of the output, not the input data.
This distinction becomes apparent when considering that Pydantic's <code>ValidationError</code> is raised when data cannot be successfully parsed into a model instance. -->
Pydanticでは、"バリデーション'という用語は、指定された型と制約に従うモデル(または他の型)をインスタンス化するプロセスを指します。Pydanticは、入力データではなく、出力の型と制約を保証します。
この区別は、データがモデルインスタンスに正常にパースできない場合にPydanticの<code>ValidationError</code>が発生することを考えると明らかになります。</p>
<p><!-- While this distinction may initially seem subtle, it holds practical significance.
In some cases, "validation" goes beyond just model creation, and can include the copying and coercion of data.
This can involve copying arguments passed to the constructor in order to perform coercion to a new type     without mutating the original input data. For a more in-depth understanding of the implications for your usage, refer to the <a href="#data-conversion">Data Conversion</a> and <a href="#attribute-copies">Attribute Copies</a> sections below. -->
この区別は最初は微妙に見えるかもしれないが、実際には重要です。
場合によっては、"バリデーション"は単なるモデルの作成にとどまらず、データのコピーや強制的な型変換を含むこともあります。
これには、元の入力データを変更せずに新しい型への強制的な型変換を実行するために、コンストラクタに渡された引数をコピーすることが含まれます。使用方法への影響の詳細については、以下の<a href="#data-conversion">Data Conversion</a>および<a href="#attribute-copies">Attribute Copies</a>のセクションを参照してください。</p>
<p><!-- In essence, Pydantic's primary goal is to assure that the resulting structure post-processing (termed "validation") precisely conforms to the applied type hints. Given the widespread adoption of "validation" as the colloquial term for this process, we will consistently use it in our documentation. -->
本質的に、Pydanticの主な目標は、結果として得られる構造の後処理("バリデーション"と呼ばれる)が、適用された型ヒントに正確に適合することを保証することです。このプロセスの口語として"バリデーション"が広く採用されていることを考慮して、私たちのドキュメントでは一貫して"バリデーション"を使用します。</p>
<p><!-- While the terms "parse" and "validation" were previously used interchangeably, moving forward, we aim to exclusively employ "validate",
with "parse" reserved specifically for discussions related to <a href="../concepts/json.md">JSON parsing</a>. -->
"パース"と"バリデーション"という用語は以前は互換的に使用されていましたが、今後は"バリデーション"のみを使用します。
"パース"は特に<a href="../json/">JSON parsing</a>に関連する議論のために予約されています。</p>
</div>
<h2 id="basic-model-usage">Basic model usage<a class="headerlink" href="#basic-model-usage" title="Permanent link">&para;</a></h2>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Jane Doe&#39;</span>
</code></pre></div>
<!-- In this example, `User` is a model with two fields: -->
<p>この例では、<code>User</code>は2つのフィールドを持つモデルです。</p>
<ul>
<li><code>id</code>, which is an integer and is required</li>
<li>
<p><code>name</code>, which is a string and is not required (it has a default value).</p>
</li>
<li>
<p><code>id</code>は整数で、必須です。</p>
</li>
<li><code>name</code>は文字列であり、必須ではありません(デフォルト値があります)。</li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
</code></pre></div>
<!-- In this example, `user` is an instance of `User`.
Initialization of the object will perform all parsing and validation.
If no `ValidationError` is raised, you know the resulting model instance is valid. -->
<p>この例では、<code>user</code>は<code>User</code>のインスタンスです。
オブジェクトを初期化すると、すべてのパースと検証が実行されます。
<code>ValidationError</code>が発生しない場合は、結果のモデルインスタンスが有効であることがわかります。</p>
<div class="language-py highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">123</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="c1"># Note that &#39;123&#39; was coerced to an int and its value is 123</span>
</code></pre></div>
<!-- More details on pydantic's coercion logic can be found in [Data Conversion](#data-conversion).
Fields of a model can be accessed as normal attributes of the `user` object.
The string `'123'` has been converted into an int as per the field type. -->
<p>pydanticの強制型変換ロジックの詳細については、<a href="#data-conversion">Data Conversion</a>を参照してください。
モデルのフィールドは、"user"オブジェクトの通常の属性としてアクセスできます。
文字列<code>'123'</code>はフィールド型に従ってintに変換されました。</p>
<div class="language-py highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;Jane Doe&#39;</span>
</code></pre></div>
<!-- `name` wasn't set when `user` was initialized, so it has the default value. -->
<p><code>user</code>の初期化時に<code>name</code>が設定されていなかったため、デフォルト値が設定されています。</p>
<div class="language-py highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">model_fields_set</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">}</span>
</code></pre></div>
<!-- The fields which were supplied when user was initialized. -->
<p>このフィールドは、ユーザーが初期化されたときに指定されたフィールドです。</p>
<div class="language-py highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Jane Doe&#39;</span><span class="p">}</span>
</code></pre></div>
<!-- Either `.model_dump()` or `dict(user)` will provide a dict of fields, but `.model_dump()` can take numerous other
arguments. (Note that `dict(user)` will not recursively convert nested models into dicts, but `.model_dump()` will.) -->
<p><code>.model_dump()</code>または<code>dict(user)</code>のどちらかがフィールドのdictを提供しますが、<code>.model_dump()</code>は他の多くのものを取ることができます。(<code>dict(user)</code>はネストされたモデルをディクテーションに再帰的に変換しませんが、<code>.model_dump()</code>は変換します。)</p>
<div class="language-py highlight"><pre><span></span><code><span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">321</span>
<span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">321</span>
</code></pre></div>
<!-- By default, models are mutable and field values can be changed through attribute assignment. -->
<p>デフォルトでは、モデルは可変であり、フィールド値は属性の割り当てによって変更できます。</p>
<h3 id="model-methods-and-properties">Model methods and properties<a class="headerlink" href="#model-methods-and-properties" title="Permanent link">&para;</a></h3>
<!-- The example above only shows the tip of the iceberg of what models can do.
Models possess the following methods and attributes: -->
<p>上の例は、モデルができることの氷山の一角を示しているにすぎません。
モデルには、次のメソッドと属性があります。</p>
<!-- * [`model_computed_fields`][pydantic.main.BaseModel.model_computed_fields]: a dictionary of the computed fields of this model instance. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_computed_fields"><code>model_computed_fields</code></a>: このモデルインスタンスの計算済みフィールドの辞書です。</li>
</ul>
<!-- * [`model_construct()`][pydantic.main.BaseModel.model_construct]: a class method for creating models without running validation. See [Creating models without validation](#creating-models-without-validation). -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>: 検証を実行せずにモデルを作成するためのクラスメソッドです。<a href="#creating-models-without-validation">Creating models without validation</a>を参照してください。</li>
</ul>
<!-- * [`model_copy()`][pydantic.main.BaseModel.model_copy]: returns a copy (by default, shallow copy) of the model. See [Serialization](serialization.md#model_copy). -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_copy"><code>model_copy()</code></a>: モデルのコピー(デフォルトではシャローコピー)を返します。<a href="../serialization/#model_copy">Serialization</a>を参照してください。</li>
</ul>
<!-- * [`model_dump()`][pydantic.main.BaseModel.model_dump]: returns a dictionary of the model's fields and values. See  [Serialization](serialization.md#model_dump). -->
<!-- * [`model_dump_json()`][pydantic.main.BaseModel.model_dump_json]: returns a JSON string representation of [`model_dump()`][pydantic.main.BaseModel.model_dump]. See [Serialization](serialization.md#model_dump_json). -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_dump_json"><code>model_dump_json()</code></a>: <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_dump"><code>model_dump()</code></a>のJSON文字列表現を返します。<a href="../serialization/#model_dump_json">Serialization</a>を参照してください。</li>
</ul>
<!-- * [`model_extra`][pydantic.main.BaseModel.model_extra]: get extra fields set during validation. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_extra"><code>model_extra</code></a>: 検証中に追加フィールドセットを取得します。</li>
</ul>
<!-- * [`model_fields_set`][pydantic.main.BaseModel.model_fields_set]: set of fields which were set when the model instance was initialized. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_fields_set"><code>model_fields_set</code></a>: モデルインスタンスが初期化されたときに設定されたフィールドのセットです。</li>
</ul>
<!-- * [`model_json_schema()`][pydantic.main.BaseModel.model_json_schema]: returns a jsonable dictionary representing the model as JSON Schema. See [JSON Schema](json_schema.md). -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_json_schema"><code>model_json_schema()</code></a>: JSONスキーマとしてモデルを表すJSON化可能な辞書を返します。<a href="../json_schema/">JSON Schema</a>を参照してください。</li>
</ul>
<!-- * [`model_parametrized_name()`][pydantic.main.BaseModel.model_parametrized_name]: compute the class name for parametrizations of generic classes. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_parametrized_name"><code>model_parameterized_name()</code></a>: ジェネリッククラスのパラメータ化のクラス名を計算します。</li>
</ul>
<!-- * [`model_post_init()`][pydantic.main.BaseModel.model_post_init]: perform additional initialization after the model is initialized. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_post_init"><code>model_post_init()</code></a>:モデルが初期化された後に追加の初期化を実行します。</li>
</ul>
<!-- * [`model_rebuild()`][pydantic.main.BaseModel.model_rebuild]: rebuild the model schema, which also supports building recursive generic models. See [Rebuild model schema](#rebuild-model-schema). -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a>: 再帰的なジェネリックモデルの構築もサポートするモデルスキーマを再構築します。<a href="#rebuild-model-schema">Rebuild model schema</a>を参照してください。</li>
</ul>
<!-- * [`model_validate()`][pydantic.main.BaseModel.model_validate]: a utility for loading any object into a model. See [Helper functions](#helper-functions). -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate()</code></a>: 任意のオブジェクトをモデルにロードするためのユーティリティです。<a href="#helper-functions">Helper functions</a>を参照してください。</li>
</ul>
<!-- * [`model_validate_json()`][pydantic.main.BaseModel.model_validate_json]: a utility for validating the given JSON data against the Pydantic model. See [Helper functions](#helper-functions). -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json"><code>model_validate_json()</code></a>: 指定されたJSONデータをPydanticモデルに対して検証するためのユーティリティです。<a href="#helper-functions">Helper functions</a>を参照してください。</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- See <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel">klzzwxh:0377</a> for the class definition including a full list of methods and attributes. -->
メソッドと属性の完全なリストを含むクラス定義については、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel"><code>BaseModel</code></a>を参照してください。</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><!-- See <a href="../migration.md#changes-to-pydanticbasemodel">Changes to klzzwxh:0370</a> in the <a href="../migration.md">Migration Guide</a> for details on changes from Pydantic V1. -->
Pydantic V1からの変更の詳細については、<a href="../../migration/">Migration Guide</a>の<a href="../../migration/#changes-to-pydanticbasemodel">Changes to <code>pydantic.BaseModel</code></a>を参照してください。</p>
</div>
<h2 id="nested-models">Nested models<a class="headerlink" href="#nested-models" title="Permanent link">&para;</a></h2>
<!-- More complex hierarchical data structures can be defined using models themselves as types in annotations. -->
<p>より複雑な階層データ構造は、モデル自体をアノテーションの型として使用して定義することができます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">apple</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span>
    <span class="n">banana</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>


<span class="k">class</span> <span class="nc">Spam</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="n">Foo</span>
    <span class="n">bars</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Bar</span><span class="p">]</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Spam</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="n">bars</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;x1&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;x2&#39;</span><span class="p">}])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">foo=Foo(count=4, size=None) bars=[Bar(apple=&#39;x1&#39;, banana=&#39;y&#39;), Bar(apple=&#39;x2&#39;, banana=&#39;y&#39;)]</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;foo&#39;: {&#39;count&#39;: 4, &#39;size&#39;: None},</span>
<span class="sd">    &#39;bars&#39;: [{&#39;apple&#39;: &#39;x1&#39;, &#39;banana&#39;: &#39;y&#39;}, {&#39;apple&#39;: &#39;x2&#39;, &#39;banana&#39;: &#39;y&#39;}],</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<!-- For self-referencing models, see [postponed annotations](postponed_annotations.md#self-referencing-or-recursive-models). -->
<p>自己参照モデルについては、<a href="../postponed_annotations/#self-referencing-or-recursive-models">postponed annotations</a>を参照してください。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- When defining your models, watch out for naming collisions between your field name and its type, a previously defined model, or an imported library. -->
モデルを定義するときは、フィールド名とそのタイプ、以前に定義されたモデル、または読み込まれたライブラリとの間の名前の衝突に注意してください。</p>
<p><!-- For example, the following would yield a validation error: -->
たとえば、次の例では検証エラーが発生します。
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Boo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">int</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Boo</span><span class="p">(</span><span class="nb">int</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>  <span class="c1"># errors</span>
</code></pre></div>
<!-- An error occurs since the field  <code>int</code> is set to a default value of <code>None</code> and has the exact same name as its type, so both are interpreted to be <code>None</code>. -->
<code>int</code>フィールドはデフォルト値<code>None</code>に設定されており、そのタイプとまったく同じ名前を持っているため、両方とも<code>None</code>と解釈され、エラーが発生します。</p>
</div>
<h2 id="rebuild-model-schema">Rebuild model schema<a class="headerlink" href="#rebuild-model-schema" title="Permanent link">&para;</a></h2>
<!-- The model schema can be rebuilt using [`model_rebuild()`][pydantic.main.BaseModel.model_rebuild]. This is useful for building recursive generic models. -->
<p>モデルスキーマは<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a>を使用して再構築できます。これは再帰的なジェネリックモデルを構築するのに便利です。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">PydanticUserError</span>


<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;Bar&#39;</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">Foo</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">()</span>
<span class="k">except</span> <span class="n">PydanticUserError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Foo` is not fully defined; you should define `Bar`, then call `Foo.model_rebuild()`.</span>

<span class="sd">    For further information visit https://errors.pydantic.dev/2/u/class-not-fully-defined</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">Foo</span><span class="o">.</span><span class="n">model_rebuild</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Foo</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;$defs&#39;: {&#39;Bar&#39;: {&#39;properties&#39;: {}, &#39;title&#39;: &#39;Bar&#39;, &#39;type&#39;: &#39;object&#39;}},</span>
<span class="sd">    &#39;properties&#39;: {&#39;x&#39;: {&#39;$ref&#39;: &#39;#/$defs/Bar&#39;}},</span>
<span class="sd">    &#39;required&#39;: [&#39;x&#39;],</span>
<span class="sd">    &#39;title&#39;: &#39;Foo&#39;,</span>
<span class="sd">    &#39;type&#39;: &#39;object&#39;,</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<!-- Pydantic tries to determine when this is necessary automatically and error if it wasn't done, but you may want to call [`model_rebuild()`][pydantic.main.BaseModel.model_rebuild] proactively when dealing with recursive models or generics. -->
<p>Pydanticは、いつこれが必要なのかを自動的に判断しようとし、それが行われなかった場合はエラーになりますが、再帰的なモデルやジェネリックスを扱う場合は、事前に<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a>を呼び出した方がよいでしょう。</p>
<!-- In V2, [`model_rebuild()`][pydantic.main.BaseModel.model_rebuild] replaced `update_forward_refs()` from V1. There are some slight differences with the new behavior. -->
<p>V2では、V1の<code>update_forward_refs()</code>が<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a>に置き換えられました。新しい動作には若干の違いがあります。</p>
<!-- The biggest change is that when calling [`model_rebuild()`][pydantic.main.BaseModel.model_rebuild] on the outermost model, it builds a core schema used for validation of the whole model (nested models and all), so all types at all levels need to be ready before [`model_rebuild()`][pydantic.main.BaseModel.model_rebuild] is called. -->
<p>最大の変更点は、最も外側のモデルで<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a>を呼び出すと、モデル全体(ネストされたモデルとすべて)の検証に使用されるコアスキーマが構築されるため、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a>が呼び出される前に、すべてのレベルのすべての型が準備されている必要があることです。</p>
<h2 id="arbitrary-class-instances">Arbitrary class instances<a class="headerlink" href="#arbitrary-class-instances" title="Permanent link">&para;</a></h2>
<!-- (Formerly known as "ORM Mode"/`from_orm`.) -->
<p>(以前は"ORM Mode"/<code>from_orm</code>と呼ばれていました。)</p>
<!-- Pydantic models can also be created from arbitrary class instances by reading the instance attributes corresponding to the model field names. One common application of this functionality is integration with object-relational mappings (ORMs). -->
<p>Pydanticモデルは、モデルフィールド名に対応するインスタンス属性を読み取ることによって、任意のクラスインスタンスから作成することもできます。この機能の一般的なアプリケーションの1つは、オブジェクトリレーショナルマッピング(ORM)との統合にあります。</p>
<!-- To do this, set the config attribute `model_config['from_attributes'] = True`.
See [Model Config][pydantic.config.ConfigDict.from_attributes] and [ConfigDict][pydantic.config.ConfigDict] for more information. -->
<p>これを行うには、config属性<code>model_config['from_attributes']=True</code>を設定します。
詳細については、<a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.from_attributes">Model Config</a>および<a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict">ConfigDict</a>を参照してください。</p>
<!-- The example here uses [SQLAlchemy](https://www.sqlalchemy.org/), but the same approach should work for any ORM. -->
<p>ここでの例では<a href="https://www.SQLAlchemy.org/">SQLAlchemy</a>を使用していますが、どのORMに対しても同じアプローチが有効です。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.dialects.postgresql</span> <span class="kn">import</span> <span class="n">ARRAY</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">StringConstraints</span>

<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">CompanyOrm</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;companies&#39;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">public_key</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">63</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">domains</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">)))</span>


<span class="k">class</span> <span class="nc">CompanyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">from_attributes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">public_key</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StringConstraints</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StringConstraints</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">63</span><span class="p">)]</span>
    <span class="n">domains</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StringConstraints</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)]]</span>


<span class="n">co_orm</span> <span class="o">=</span> <span class="n">CompanyOrm</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">public_key</span><span class="o">=</span><span class="s1">&#39;foobar&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Testing&#39;</span><span class="p">,</span>
    <span class="n">domains</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;foobar.com&#39;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">co_orm</span><span class="p">)</span>
<span class="c1">#&gt; &lt;__main__.CompanyOrm object at 0x0123456789ab&gt;</span>
<span class="n">co_model</span> <span class="o">=</span> <span class="n">CompanyModel</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">co_orm</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">co_model</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">id=123 public_key=&#39;foobar&#39; name=&#39;Testing&#39; domains=[&#39;example.com&#39;, &#39;foobar.com&#39;]</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="reserved-names">Reserved names<a class="headerlink" href="#reserved-names" title="Permanent link">&para;</a></h3>
<!-- You may want to name a `Column` after a reserved SQLAlchemy field. In that case, `Field` aliases will be convenient: -->
<p>予約されたSQLAlchemyフィールドの後に<code>Column</code>という名前を付けたい場合があります。その場合は<code>Field</code>という別名が便利です。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">typing</span>

<span class="kn">import</span> <span class="nn">sqlalchemy</span> <span class="k">as</span> <span class="nn">sa</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">declarative_base</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span>


<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">from_attributes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">metadata</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;metadata_&#39;</span><span class="p">)</span>


<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">SQLModel</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;my_table&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># &#39;metadata&#39; is reserved by SQLAlchemy, hence the &#39;_&#39;</span>
    <span class="n">metadata_</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">JSON</span><span class="p">)</span>


<span class="n">sql_model</span> <span class="o">=</span> <span class="n">SQLModel</span><span class="p">(</span><span class="n">metadata_</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;val&#39;</span><span class="p">},</span> <span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">pydantic_model</span> <span class="o">=</span> <span class="n">MyModel</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">sql_model</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pydantic_model</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;metadata&#39;: {&#39;key&#39;: &#39;val&#39;}}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pydantic_model</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">by_alias</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="c1">#&gt; {&#39;metadata_&#39;: {&#39;key&#39;: &#39;val&#39;}}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- The example above works because aliases have priority over field names for field population. Accessing <code>SQLModel</code>'s <code>metadata</code> attribute would lead to a <code>ValidationError</code>. -->
上記の例が機能するのは、エイリアスがフィールド入力のフィールド名よりも優先されるためです。<code>SQLModel</code>の<code>metadata</code>属性にアクセスすると<code>ValidationError</code>が発生します。</p>
</div>
<h3 id="nested-attributes">Nested attributes<a class="headerlink" href="#nested-attributes" title="Permanent link">&para;</a></h3>
<!-- When using attributes to parse models, model instances will be created from both top-level attributes and deeper-nested attributes as appropriate. -->
<p>属性を使用してモデルをパースする場合、モデルインスタンスは、必要に応じて最上位の属性と下位にネストされた属性の両方から作成されます。</p>
<!-- Here is an example demonstrating the principle: -->
<p>この原理を示す例を次に示します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span>


<span class="k">class</span> <span class="nc">PetCls</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">species</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="n">species</span>


<span class="k">class</span> <span class="nc">PersonCls</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">pets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">PetCls</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pets</span> <span class="o">=</span> <span class="n">pets</span>


<span class="k">class</span> <span class="nc">Pet</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">from_attributes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">species</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">from_attributes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Pet</span><span class="p">]</span>


<span class="n">bones</span> <span class="o">=</span> <span class="n">PetCls</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Bones&#39;</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="s1">&#39;dog&#39;</span><span class="p">)</span>
<span class="n">orion</span> <span class="o">=</span> <span class="n">PetCls</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Orion&#39;</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">)</span>
<span class="n">anna</span> <span class="o">=</span> <span class="n">PersonCls</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Anna&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">pets</span><span class="o">=</span><span class="p">[</span><span class="n">bones</span><span class="p">,</span> <span class="n">orion</span><span class="p">])</span>
<span class="n">anna_model</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">anna</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">anna_model</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">name=&#39;Anna&#39; age=20.0 pets=[Pet(name=&#39;Bones&#39;, species=&#39;dog&#39;), Pet(name=&#39;Orion&#39;, species=&#39;cat&#39;)]</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h2 id="error-handling">Error handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<!-- Pydantic will raise `ValidationError` whenever it finds an error in the data it's validating. -->
<p>Pydanticは、検証中のデータにエラーを検出するたびに<code>ValidationError</code>を発生させます。</p>
<!-- A single exception of type `ValidationError` will be raised regardless of the number of errors found, and that `ValidationError` will contain information about all of the errors and how they happened. -->
<p>検出されたエラーの数にかかわらず、タイプ<code>ValidationError</code>の単一の例外が発生し、<code>ValidationError</code>にはすべてのエラーとその発生方法に関する情報が含まれます。</p>
<!-- See [Error Handling](../errors/errors.md) for details on standard and custom errors. -->
<p>標準エラーとカスタムエラーの詳細については、<a href="../../errors/errors/">Error Handling</a>を参照してください。</p>
<!-- As a demonstration: -->
<p>デモンストレーション:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">list_of_ints</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">a_float</span><span class="p">:</span> <span class="nb">float</span>


<span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">list_of_ints</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;bad&#39;</span><span class="p">],</span>
    <span class="n">a_float</span><span class="o">=</span><span class="s1">&#39;not a float&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for Model</span>
<span class="sd">    list_of_ints.2</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;bad&#39;, input_type=str]</span>
<span class="sd">    a_float</span>
<span class="sd">      Input should be a valid number, unable to parse string as a number [type=float_parsing, input_value=&#39;not a float&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h2 id="helper-functions">Helper functions<a class="headerlink" href="#helper-functions" title="Permanent link">&para;</a></h2>
<!-- *Pydantic* provides three `classmethod` helper functions on models for parsing data: -->
<p><em>Pydantic</em>は、データをパースするための3つの<code>classmethod</code>ヘルパー関数をモデルに提供します。</p>
<!-- * [`model_validate()`][pydantic.main.BaseModel.model_validate]: this is very similar to the `__init__` method of the model, except it takes a dict or an object rather than keyword arguments. If the object passed cannot be validated, or if it's not a dictionary or instance of the model in question, a `ValidationError` will be raised. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate()</code></a>: これはモデルの<code>__init__</code>メソッドと非常によく似ていますが、キーワード引数ではなく辞書またはオブジェクトを取る点が異なります。渡されたオブジェクトが検証できない場合、または問題のモデルの辞書またはインスタンスでない場合、<code>ValidationError</code>が発生します。</li>
</ul>
<!-- * [`model_validate_json()`][pydantic.main.BaseModel.model_validate_json]: this takes a *str* or *bytes* and parses it as *json*, then passes the result to [`model_validate()`][pydantic.main.BaseModel.model_validate]. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json"><code>model_validate_json()</code></a>: <em>str</em>または<em>bytes</em>を受け取って<em>json</em>としてパースし、結果を<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate()</code></a>に渡します。</li>
</ul>
<!-- * [`model_validate_strings()`][pydantic.main.BaseModel.model_validate_strings]: this takes a dict (can be nested) with string keys and values and validates the data in *json* mode so that said strings can be coerced into the correct types. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_strings"><code>model_validate_strings()</code></a>: 文字列のキーと値を持つdict(ネスト可能)を取得し、<em>json</em>モードでデータを検証して、その文字列を強制的に正しい型に変換できるようにします。</li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;John Doe&#39;</span>
    <span class="n">signup_ts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;not&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;dict&#39;</span><span class="p">])</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">      Input should be a valid dictionary or instance of User [type=model_type, input_value=[&#39;not&#39;, &#39;a&#39;, &#39;dict&#39;], input_type=list]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;{&quot;id&quot;: 123, &quot;name&quot;: &quot;James&quot;}&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;{&quot;id&quot;: 123, &quot;name&quot;: 123}&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">    name</span>
<span class="sd">      Input should be a valid string [type=string_type, input_value=123, input_type=int]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;invalid JSON&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">      Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value=&#39;invalid JSON&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="s1">&#39;signup_ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-04-01T12:00:00&#39;</span><span class="p">}</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=datetime.datetime(2024, 4, 1, 12, 0)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">(</span>
        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="s1">&#39;signup_ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-04-01&#39;</span><span class="p">},</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">    signup_ts</span>
<span class="sd">      Input should be a valid datetime, invalid datetime separator, expected `T`, `t`, `_` or space [type=datetime_parsing, input_value=&#39;2024-04-01&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<!-- If you want to validate serialized data in a format other than JSON, you should load the data into a dict yourself and then pass it to [`model_validate`][pydantic.main.BaseModel.model_validate]. -->
<p>JSON以外のフォーマットでシリアライズされたデータを検証したい場合は、データを自分でdictにロードしてから、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate</code></a>に渡してください。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- Depending on the types and model configs involved, <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate">klzzwxh:0320</a> and <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json">klzzwxh:0321</a> may have different validation behavior. -->
関連する型とモデルの設定によって、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate</code></a>と<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json"><code>model_validate_json</code></a>の検証動作が異なる場合があります。</p>
<p><!-- If you have data coming from a non-JSON source, but want the same validation behavior and errors you'd get from <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json">klzzwxh:0329</a>, our recommendation for now is to use either use <code>model_validate_json(json.dumps(data))</code>, or use <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_strings">klzzwxh:0331</a> if the data takes the form of a (potentially nested) dict with string keys and values. -->
JSON以外のソースからのデータがあり、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json"><code>model_validate_json</code></a>と同じ検証動作とエラーが必要な場合は、今のところ、<code>model_validate_json(json.dumps(data))</code>を使用するか、データが文字列のキーと値を持つ(ネストされている可能性のある)dictの形式をとる場合は<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_strings"><code>model_validate_strings</code></a>を使用することをお勧めします。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- Learn more about JSON parsing in the <a href="../concepts/json.md">JSON</a> section of the docs. -->
JSONパースの詳細については、ドキュメントの<a href="../json/">JSON</a>セクションを参照してください。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- If you're passing in an instance of a model to <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate">klzzwxh:0307</a>, you will want to consider setting <a href="https://docs.pydantic.dev/latest/api/config/#pydantic.config.ConfigDict.revalidate_instances">klzzwxh:0308</a> in the model's config. -->
モデルのインスタンスを<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate</code></a>に渡す場合は、モデルの構成に<a href="https://docs.pydantic.dev/latest/api/config/#pydantic.config.ConfigDict.revalidate_instances"><code>revalidate_instances</code></a>を設定することを検討してください。</p>
<p><!-- If you don't set this value, then validation will be skipped on model instances. See the below example: -->
この値を設定しない場合、モデルインスタンスの検証はスキップされます。次の例を参照してください。</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1"><img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/274c.svg" title=":x:" /> <code>revalidate_instances='never'</code></label><label for="__tabbed_1_2"><img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2705.svg" title=":white_check_mark:" /> <code>revalidate_instances='always'</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># note: the `model_config` setting validate_assignment=True` can prevent this kind of misbehavior</span>
<span class="n">m</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;not an int&#39;</span>

<span class="c1"># doesn&#39;t raise a validation error even though m is invalid</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">revalidate_instances</span><span class="o">=</span><span class="s1">&#39;always&#39;</span><span class="p">)</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># note: the `model_config` setting validate_assignment=True` can prevent this kind of misbehavior</span>
<span class="n">m</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;not an int&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m2</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Model</span>
<span class="sd">    a</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;not an int&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="creating-models-without-validation">Creating models without validation<a class="headerlink" href="#creating-models-without-validation" title="Permanent link">&para;</a></h3>
<!-- Pydantic also provides the [`model_construct()`][pydantic.main.BaseModel.model_construct] method, which allows models to be created **without validation**. This can be useful in at least a few cases: -->
<p>Pydanticには、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>メソッドも用意されています。このメソッドを使用すると、<strong>検証なしで</strong>モデルを作成できます。これは、少なくとも次のような場合に便利です。</p>
<!-- * when working with complex data that is already known to be valid (for performance reasons) -->
<ul>
<li>すでに有効であることがわかっている複雑なデータを処理する場合(パフォーマンス上の理由から)</li>
</ul>
<!-- * when one or more of the validator functions are non-idempotent, or -->
<ul>
<li>1つ以上の検証関数がべき等でない場合、または</li>
</ul>
<!-- * when one or more of the validator functions have side effects that you don't want to be triggered. -->
<ul>
<li>1つ以上のバリデータ関数に、トリガされたくない副作用がある場合。</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- In Pydantic V2, the performance gap between <code>BaseModel.__init__</code> and <code>BaseModel.model_construct</code> has been narrowed considerably. For simple models, calling <code>BaseModel.__init__</code> may even be faster. -->
Pydantic V2では、<code>BaseModel.__init__</code>と<code>BaseModel.model_construct</code>の間のパフォーマンスの差が大幅に縮小されました。単純なモデルの場合、<code>BaseModel.__init__</code>を呼び出す方が高速になる可能性があります。</p>
<p><!-- If you are using <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct">klzzwxh:0294</a> for performance reasons, you may want to profile your use case before assuming that <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct">klzzwxh:0295</a> is faster. -->
パフォーマンス上の理由から<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>を使用している場合は、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>の方が高速であると想定する前に、ユースケースをプロファイルすることをお勧めします。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><!-- <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct">klzzwxh:0276</a> does not do any validation, meaning it can create models which are invalid. -->
<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>は検証を行いません。つまり、無効なモデルを作成する可能性があります。</p>
<p><!-- **You should only ever use the <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct">klzzwxh:0281</a> method with data which has already been validated, or that you definitely trust.** -->
<strong><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>メソッドは、すでに検証済みのデータ、または確実に信頼できるデータに対してのみ使用してください。</strong></p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;John Doe&#39;</span>


<span class="n">original_user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>

<span class="n">user_data</span> <span class="o">=</span> <span class="n">original_user</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">user_data</span><span class="p">)</span>
<span class="c1">#&gt; {&#39;id&#39;: 123, &#39;age&#39;: 32, &#39;name&#39;: &#39;John Doe&#39;}</span>
<span class="n">fields_set</span> <span class="o">=</span> <span class="n">original_user</span><span class="o">.</span><span class="n">model_fields_set</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fields_set</span><span class="p">)</span>
<span class="c1">#&gt; {&#39;age&#39;, &#39;id&#39;}</span>

<span class="c1"># ...</span>
<span class="c1"># pass user_data and fields_set to RPC or save to the database etc.</span>
<span class="c1"># ...</span>

<span class="c1"># you can then create a new instance of User without</span>
<span class="c1"># re-running validation which would be unnecessary at this point:</span>
<span class="n">new_user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">_fields_set</span><span class="o">=</span><span class="n">fields_set</span><span class="p">,</span> <span class="o">**</span><span class="n">user_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">new_user</span><span class="p">))</span>
<span class="c1">#&gt; User(id=123, age=32, name=&#39;John Doe&#39;)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_user</span><span class="o">.</span><span class="n">model_fields_set</span><span class="p">)</span>
<span class="c1">#&gt; {&#39;age&#39;, &#39;id&#39;}</span>

<span class="c1"># construct can be dangerous, only use it with validated data!:</span>
<span class="n">bad_user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;dog&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">bad_user</span><span class="p">))</span>
<span class="c1">#&gt; User(id=&#39;dog&#39;, name=&#39;John Doe&#39;)</span>
</code></pre></div>
<!-- The `_fields_set` keyword argument to [`model_construct()`][pydantic.main.BaseModel.model_construct] is optional, but allows you to be more precise about which fields were originally set and which weren't. If it's omitted [`model_fields_set`][pydantic.main.BaseModel.model_fields_set] will just be the keys of the data provided. -->
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>の<code>_fields_set</code>キーワード引数はオプションですが、どのフィールドが最初に設定され、どのフィールドが設定されなかったかをより正確に知ることができます。これを省略すると、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_fields_set"><code>model_fields_set</code></a>は単に提供されたデータのキーになります。</p>
<!-- For example, in the example above, if `_fields_set` was not provided, `new_user.model_fields_set` would be `{'id', 'age', 'name'}`. -->
<p>例えば、上の例では、<code>_fields_set</code>が与えられなかった場合、<code>new_user.model_fields_set</code>は<code>{'id','age','name'}</code>になります。</p>
<!-- Note that for subclasses of [`RootModel`](#rootmodel-and-custom-root-types), the root value can be passed to [`model_construct()`][pydantic.main.BaseModel.model_construct]positionally, instead of using a keyword argument. -->
<p><a href="#rootmodel-and-custom-root-types"><code>RootModel</code></a>サブクラスでは、キーワード引数を使用する代わりに、ルートの値を<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>に位置的に渡すことができることに注意してください。</p>
<!-- Here are some additional notes on the behavior of [`model_construct()`][pydantic.main.BaseModel.model_construct]: -->
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>の動作に関する追加の注意事項を以下に示します。</p>
<!-- * When we say "no validation is performed" — this includes converting dicts to model instances. So if you have a field with a `Model` type, you will need to convert the inner dict to a model yourself before passing it to [`model_construct()`][pydantic.main.BaseModel.model_construct]. -->
<ul>
<li>"検証は実行されません"となる場合、これにはディクテーションをモデルインスタンスに変換することも含まれます。したがって、<code>Model</code>型のフィールドがある場合は、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>に渡す前に、内部辞書を自分でモデルに変換する必要があります。</li>
</ul>
<!-- * In particular, the [`model_construct()`][pydantic.main.BaseModel.model_construct] method does not support recursively constructing models from dicts. -->
<ul>
<li>特に、<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>メソッドは、ディクテーションからモデルを再帰的に構築することをサポートしていません。</li>
</ul>
<!-- * If you do not pass keyword arguments for fields with defaults, the default values will still be used. -->
<ul>
<li>デフォルト値を持つフィールドにキーワード引数を渡さない場合でも、デフォルト値が使用されます。</li>
</ul>
<!-- * For models with private attributes, the `__pydantic_private__` dict will be initialized the same as it would be when calling `__init__`. -->
<ul>
<li>private属性を持つモデルの場合、<code>__pydantic_private__</code>dictは<code>__init__</code>を呼び出したときと同じように初期化されます。</li>
</ul>
<!-- * When constructing an instance using [`model_construct()`][pydantic.main.BaseModel.model_construct], no `__init__` method from the model or any of its parent classes will be called, even when a custom `__init__` method is defined. -->
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>を使用してインスタンスを構築する場合、カスタムの<code>__init__</code>メソッドが定義されていても、モデルまたはその親クラスから<code>__init__</code>メソッドは呼び出されません。</li>
</ul>
<!-- !!! note "On `extra` behavior with `model_construct`" -->
<div class="admonition note">
<p class="admonition-title"><code>model_construct</code>の<code>extra</code>の動作について</p>
<p><!-- * For models with <code>model_config['extra'] == 'allow'</code>, data not corresponding to fields will be correctly stored in the <code>__pydantic_extra__</code> dict and saved to the model's <code>__dict__</code>. -->
* <code>model_config['extra']=='allow'</code>を持つモデルの場合、フィールドに対応しないデータは<code>__pydantic_extra__</code>dictに正しく保存され、モデルの<code>__dict__</code>に保存されます。
<!-- * For models with <code>model_config['extra'] == 'ignore'</code>, data not corresponding to fields will be ignored - that is, not stored in <code>__pydantic_extra__</code> or <code>__dict__</code> on the instance. -->
* <code>model_config['extra']=='ignore'</code>を持つモデルの場合、フィールドに対応しないデータは無視されます。つまり、インスタンスの<code>__pydantic_extra__</code>や<code>__dict__</code>には保存されません。
<!-- * Unlike a call to <code>__init__</code>, a call to <code>model_construct</code> with <code>model_config['extra'] == 'forbid'</code> doesn't raise an error in the presence of data not corresponding to fields. Rather, said input data is simply ignored. -->
* <code>__init__</code>の呼び出しとは異なり、<code>model_config['extra']=='forbid'</code>を指定した<code>model_construct</code>の呼び出しでは、フィールドに対応しないデータが存在してもエラーになりません。むしろ、その入力データは単に無視されます。</p>
</div>
<h2 id="generic-models">Generic models<a class="headerlink" href="#generic-models" title="Permanent link">&para;</a></h2>
<!-- Pydantic supports the creation of generic models to make it easier to reuse a common model structure. -->
<p>Pydanticは、一般的なモデル構造の再利用を容易にするために、ジェネリックモデルの作成をサポートしています。</p>
<!-- In order to declare a generic model, you perform the following steps: -->
<p>ジェネリックモデルを宣言するには、以下の手順を実行します。</p>
<!-- 1. Declare one or more `typing.TypeVar` instances to use to parameterize your model. -->
<ol>
<li>モデルのパラメータ化に使用する1つ以上の<code>typing.TypeVar</code>インスタンスを宣言します。</li>
</ol>
<!-- 2. Declare a pydantic model that inherits from `pydantic.BaseModel` and `typing.Generic`, where you pass the `TypeVar` instances as parameters to `typing.Generic`. -->
<ol>
<li><code>pydantic.BaseModel</code>と<code>typing.Generic</code>を継承するpydanticモデルを宣言し、<code>TypeVar</code>インスタンスをパラメータとして<code>typing.Generic</code>に渡します。</li>
</ol>
<!-- 3. Use the `TypeVar` instances as annotations where you will want to replace them with other types or pydantic models. -->
<ol>
<li><code>TypeVar</code>インスタンスをアノテーションとして使用し、他の型やpydanticモデルに置き換えます。</li>
</ol>
<!-- Here is an example using a generic `BaseModel` subclass to create an easily-reused HTTP response payload wrapper: -->
<p>以下は、<code>BaseModel</code>ジェネリックサブクラスを使用して、簡単に再利用できるHTTPレスポンスペイロードラッパーを作成する例です。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">DataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;DataT&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">DataModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">numbers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">people</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">Response</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">DataT</span><span class="p">]):</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DataT</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; data=1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
<span class="c1">#&gt; data=&#39;value&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;data&#39;: &#39;value&#39;}</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">DataModel</span><span class="p">(</span><span class="n">numbers</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">people</span><span class="o">=</span><span class="p">[])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="n">DataModel</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;data&#39;: {&#39;numbers&#39;: [1, 2, 3], &#39;people&#39;: []}}</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Response</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Response[int]</span>
<span class="sd">    data</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;value&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<!-- If you set the `model_config` or make use of `@field_validator` or other Pydantic decorators in your generic model definition, they will be applied to parametrized subclasses in the same way as when inheriting from a `BaseModel` subclass. Any methods defined on your generic class will also be inherited. -->
<p>ジェネリックモデル定義で<code>model_config</code>を設定したり、<code>@field_validator</code>やその他のPydanticデコレータを使用したりすると、それらは<code>BaseModel</code>サブクラスから継承する場合と同じ方法で、パラメータ化されたサブクラスに適用されます。ジェネリッククラスで定義されたメソッドも継承されます。</p>
<!-- Pydantic's generics also integrate properly with type checkers, so you get all the type checking you would expect if you were to declare a distinct type for each parametrization. -->
<p>Pydanticのジェネリックスは型チェッカーとも適切に統合されているため、パラメーター化ごとに異なる型を宣言した場合に期待されるすべての型チェックを行うことができます。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- Internally, Pydantic creates subclasses of <code>BaseModel</code> at runtime when generic models are parametrized. -->
内部的には、Pydanticはジェネリックモデルがパラメータ化されると、実行時に<code>BaseModel</code>のサブクラスを作成します。</p>
<p><!-- These classes are cached, so there should be minimal overhead introduced by the use of generics models. -->
これらのクラスはキャッシュされるため、ジェネリックス・モデルを使用することで生じるオーバーヘッドは最小限に抑えられます。</p>
</div>
<!-- To inherit from a generic model and preserve the fact that it is generic, the subclass must also inherit from `typing.Generic`: -->
<p>ジェネリックモデルから継承し、ジェネリックであるという事実を保持するには、サブクラスも<code>typing.Generic</code>から継承する必要があります。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">TypeX</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeX&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">BaseClass</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TypeX</span><span class="p">]):</span>
    <span class="n">X</span><span class="p">:</span> <span class="n">TypeX</span>


<span class="k">class</span> <span class="nc">ChildClass</span><span class="p">(</span><span class="n">BaseClass</span><span class="p">[</span><span class="n">TypeX</span><span class="p">],</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TypeX</span><span class="p">]):</span>
    <span class="c1"># Inherit from Generic[TypeX]</span>
    <span class="k">pass</span>


<span class="c1"># Replace TypeX by int</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ChildClass</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">X</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; X=1</span>
</code></pre></div>
<!-- You can also create a generic subclass of a `BaseModel` that partially or fully replaces the type parameters in the superclass: -->
<p>スーパークラスの型パラメータを部分的または完全に置き換える<code>BaseModel</code>のジェネリックサブクラスを作成することもできます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">TypeX</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeX&#39;</span><span class="p">)</span>
<span class="n">TypeY</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeY&#39;</span><span class="p">)</span>
<span class="n">TypeZ</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeZ&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">BaseClass</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TypeX</span><span class="p">,</span> <span class="n">TypeY</span><span class="p">]):</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">TypeX</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">TypeY</span>


<span class="k">class</span> <span class="nc">ChildClass</span><span class="p">(</span><span class="n">BaseClass</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">TypeY</span><span class="p">],</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TypeY</span><span class="p">,</span> <span class="n">TypeZ</span><span class="p">]):</span>
    <span class="n">z</span><span class="p">:</span> <span class="n">TypeZ</span>


<span class="c1"># Replace TypeY by str</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ChildClass</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">](</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="p">))</span>
<span class="c1">#&gt; x=1 y=&#39;y&#39; z=3</span>
</code></pre></div>
<!-- If the name of the concrete subclasses is important, you can also override the default name generation: -->
<p>具象サブクラスの名前が重要な場合は、デフォルトの名前生成をオーバーライドすることもできます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">DataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;DataT&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Response</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">DataT</span><span class="p">]):</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">DataT</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">model_parametrized_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="o">...</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s1">Response&#39;</span>


<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="mi">1</span><span class="p">)))</span>
<span class="c1">#&gt; IntResponse(data=1)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)))</span>
<span class="c1">#&gt; StrResponse(data=&#39;a&#39;)</span>
</code></pre></div>
<!-- You can use parametrized generic models as types in other models: -->
<p>パラメータ化されたジェネリックモデルを他のモデルのタイプとして使用できます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ResponseModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">content</span><span class="p">:</span> <span class="n">T</span>


<span class="k">class</span> <span class="nc">Product</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">price</span><span class="p">:</span> <span class="nb">float</span>


<span class="k">class</span> <span class="nc">Order</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">product</span><span class="p">:</span> <span class="n">ResponseModel</span><span class="p">[</span><span class="n">Product</span><span class="p">]</span>


<span class="n">product</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">ResponseModel</span><span class="p">[</span><span class="n">Product</span><span class="p">](</span><span class="n">content</span><span class="o">=</span><span class="n">product</span><span class="p">)</span>
<span class="n">order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">order</span><span class="p">))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Order(id=1, product=ResponseModel[Product](content=Product(name=&#39;Apple&#39;, price=0.5)))</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><!-- When using a parametrized generic model as a type in another model (like <code>product: ResponseModel[Product]</code>), make sure to parametrize said generic model when you initialize the model instance (like <code>response = ResponseModel[Product](content=product)</code>). -->
パラメータ化されたジェネリックモデルを別のモデルの型として使用する場合(<code>product:ResponseModel[Product]</code>など)、モデルインスタンスを初期化するときには必ずそのジェネリックモデルをパラメータ化してください(<code>response=ResponseModel[Product](content=product)</code>など)。</p>
<p><!-- If you don't, a <code>ValidationError</code> will be raised, as Pydantic doesn't infer the type of the generic model based on the data passed to it. -->
そうしないと、Pydanticは渡されたデータに基づいてジェネリックモデルの型を推測しないので、<code>ValidationError</code>が発生します。</p>
</div>
<!-- Using the same `TypeVar` in nested models allows you to enforce typing relationships at different points in your model: -->
<p>ネストされたモデルで同じ<code>TypeVar</code>を使用すると、モデル内の異なるポイントで型付け関係を強制することができます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">InnerT</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">inner</span><span class="p">:</span> <span class="n">T</span>


<span class="k">class</span> <span class="nc">OuterT</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">outer</span><span class="p">:</span> <span class="n">T</span>
    <span class="n">nested</span><span class="p">:</span> <span class="n">InnerT</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>


<span class="n">nested</span> <span class="o">=</span> <span class="n">InnerT</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">inner</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">OuterT</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">outer</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="n">nested</span><span class="p">))</span>
<span class="c1">#&gt; outer=1 nested=InnerT[int](inner=1)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">nested</span> <span class="o">=</span> <span class="n">InnerT</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">inner</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">OuterT</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">outer</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="n">nested</span><span class="p">))</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for OuterT[int]</span>
<span class="sd">    outer</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    nested</span>
<span class="sd">      Input should be a valid dictionary or instance of InnerT[int] [type=model_type, input_value=InnerT[str](inner=&#39;a&#39;), input_type=InnerT[str]]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<!-- When using bound type parameters, and when leaving type parameters unspecified, Pydantic treats generic models similarly to how it treats built-in generic types like `List` and `Dict`: -->
<p>境界された型パラメータを使用する場合、および型パラメータを指定しないままにしておく場合、Pydanticはジェネリックモデルを<code>List</code>や<code>Dict</code>のような組み込みジェネリック型と同じように扱います。</p>
<!-- * If you don't specify parameters before instantiating the generic model, they are validated as the bound of the `TypeVar`. -->
<ul>
<li>ジェネリックモデルをインスタンス化する前にパラメータを指定しない場合、それらは<code>TypeVar</code>の境界として検証されます。</li>
</ul>
<!-- * If the `TypeVar`s involved have no bounds, they are treated as `Any`. -->
<p>*関係する<code>TypeVar</code>に境界がない場合、それらは<code>Any</code>として扱われます。</p>
<!-- Also, like `List` and `Dict`, any parameters specified using a `TypeVar` can later be substituted with concrete types: -->
<p>また、<code>List</code>や<code>Dict</code>のように、<code>TypeVar</code>を使用して指定されたパラメータは、後で具体的な型に置き換えることができます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">AT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;AT&#39;</span><span class="p">)</span>
<span class="n">BT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;BT&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">AT</span><span class="p">,</span> <span class="n">BT</span><span class="p">]):</span>
    <span class="n">a</span><span class="p">:</span> <span class="n">AT</span>
    <span class="n">b</span><span class="p">:</span> <span class="n">BT</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>
<span class="c1">#&gt; a=&#39;a&#39; b=&#39;a&#39;</span>

<span class="n">IntT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;IntT&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">typevar_model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">IntT</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">typevar_model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; a=1 b=1</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">typevar_model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for Model[int, TypeVar]</span>
<span class="sd">    a</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    b</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">concrete_model</span> <span class="o">=</span> <span class="n">typevar_model</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">concrete_model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; a=1 b=1</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><!-- While it may not raise an error, we strongly advise against using parametrized generics in isinstance checks. -->
エラーになることはありませんが、isinstanceチェックでパラメーター化されたジェネリックスを使用しないことを強くお勧めします。</p>
<p><!-- For example, you should not do <code>isinstance(my_model, MyGenericModel[int])</code>. However, it is fine to do <code>isinstance(my_model, MyGenericModel)</code>. (Note that, for standard generics, it would raise an error to do a subclass check with a parameterized generic.) -->
例えば、<code>isinstance(my_model, MyGenericModel[int])</code>を実行すべきではありませんが、<code>isinstance(my_model, MyGenericModel)</code>を実行しても問題ありません(標準のジェネリックスの場合、パラメータ化されたジェネリックスでサブクラスのチェックを行うとエラーが発生することに注意してください)。</p>
<p><!-- If you need to perform isinstance checks against parametrized generics, you can do this by subclassing the parametrized generic class. This looks like <code>class MyIntModel(MyGenericModel[int]): ...</code> and <code>isinstance(my_model, MyIntModel)</code>. -->
パラメータ化されたジェネリックに対してisinstanceチェックを実行する必要がある場合は、パラメータ化されたジェネリッククラスをサブクラス化することで実行できます。これは<code>class MyIntModel(MyGenericModel[int]):...</code>および<code>isinstance(my_model, MyIntModel)</code>のようになります。</p>
</div>
<!-- If a Pydantic model is used in a `TypeVar` bound and the generic type is never parametrized then Pydantic will use the bound for validation but treat the value as `Any` in terms of serialization: -->
<p>Pydanticモデルが<code>TypeVar</code>境界で使用され、ジェネリック型がパラメータ化されていない場合、Pydanticは検証に境界を使用しますが、シリアライゼーションの観点からは値を<code>Any</code>として扱います。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">ErrorDetails</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">ErrorDataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;ErrorDataT&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">ErrorDetails</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Error</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]):</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MyErrorDetails</span><span class="p">(</span><span class="n">ErrorDetails</span><span class="p">):</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span>


<span class="c1"># serialized as Any</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">Error</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">MyErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;var2&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="s1">&#39;var2&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># serialized using the concrete parametrization</span>
<span class="c1"># note that `&#39;bar&#39;: &#39;var2&#39;` is missing</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">Error</span><span class="p">[</span><span class="n">ErrorDetails</span><span class="p">](</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">ErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
<p>Here's another example of the above behavior, enumerating all permutations regarding bound specification and generic type parametrization:
上記の動作の別の例として、境界仕様とジェネリック型のパラメータ化に関するすべての順列を列挙します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span>

<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">TBound</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TBound&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">BaseModel</span><span class="p">)</span>
<span class="n">TNoBound</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TNoBound&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">IntValue</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span> <span class="nc">ItemBound</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TBound</span><span class="p">]):</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">TBound</span>


<span class="k">class</span> <span class="nc">ItemNoBound</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TNoBound</span><span class="p">]):</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">TNoBound</span>


<span class="n">item_bound_inferred</span> <span class="o">=</span> <span class="n">ItemBound</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">IntValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="n">item_bound_explicit</span> <span class="o">=</span> <span class="n">ItemBound</span><span class="p">[</span><span class="n">IntValue</span><span class="p">](</span><span class="n">item</span><span class="o">=</span><span class="n">IntValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="n">item_no_bound_inferred</span> <span class="o">=</span> <span class="n">ItemNoBound</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">IntValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="n">item_no_bound_explicit</span> <span class="o">=</span> <span class="n">ItemNoBound</span><span class="p">[</span><span class="n">IntValue</span><span class="p">](</span><span class="n">item</span><span class="o">=</span><span class="n">IntValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>

<span class="c1"># calling `print(x.model_dump())` on any of the above instances results in the following:</span>
<span class="c1">#&gt; {&#39;item&#39;: {&#39;value&#39;: 3}}</span>
</code></pre></div>
<!-- If you use a `default=...` (available in Python >= 3.13 or via `typing-extensions`) or constraints (`TypeVar('T', str, int)`;note that you rarely want to use this form of a `TypeVar`) then the default value or constraints will be used for both validation and serialization if the type variable is not parametrized. -->
<p><code>default=...</code>(Python&gt;=3.13または<code>typing-extensions</code>で使用可能)または制約(<code>TypeVar('T',str, int)</code>;この形式の<code>TypeVar</code>を使用することはめったにないことに注意してください)を使用する場合、型変数がパラメータ化されていなければ、検証とシリアライゼーションの両方にデフォルト値または制約が使用されます。</p>
<!-- You can override this behavior using `pydantic.SerializeAsAny`: -->
<p>この動作は<code>pydantic.SerializeAsAny</code>を使って上書きできます:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">SerializeAsAny</span>


<span class="k">class</span> <span class="nc">ErrorDetails</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">ErrorDataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;ErrorDataT&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">ErrorDetails</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Error</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]):</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MyErrorDetails</span><span class="p">(</span><span class="n">ErrorDetails</span><span class="p">):</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span>


<span class="c1"># serialized using the default&#39;s serializer</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">Error</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">MyErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;var2&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>


<span class="k">class</span> <span class="nc">SerializeAsAnyError</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]):</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">SerializeAsAny</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]]</span>


<span class="c1"># serialized as Any</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">SerializeAsAnyError</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">MyErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;baz&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- Note, you may run into a bit of trouble if you don't parametrize a generic when the case of validating against the generic's bound
could cause data loss. See the example below: -->
注意:ジェネリックの境界に対して検証する場合、ジェネリックをパラメータ化しないと、ちょっとしたトラブルに巻き込まれる可能性があります。
データが失われる可能性があります。次の例を参照してください。</p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span>

<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">TItem</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TItem&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="s1">&#39;ItemBase&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ItemBase</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span> <span class="o">...</span>


<span class="k">class</span> <span class="nc">IntItem</span><span class="p">(</span><span class="n">ItemBase</span><span class="p">):</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span> <span class="nc">ItemHolder</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TItem</span><span class="p">]):</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">TItem</span>


<span class="n">loaded_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>


<span class="nb">print</span><span class="p">(</span><span class="n">ItemHolder</span><span class="p">(</span><span class="o">**</span><span class="n">loaded_data</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>  <span class="c1"># (1)!</span>
<span class="c1">#&gt; {&#39;item&#39;: {}}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ItemHolder</span><span class="p">[</span><span class="n">IntItem</span><span class="p">](</span><span class="o">**</span><span class="n">loaded_data</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>  <span class="c1"># (2)!</span>
<span class="c1">#&gt; {&#39;item&#39;: {&#39;value&#39;: 1}}</span>
</code></pre></div>
<!-- 1. When the generic isn't parametrized, the input data is validated against the generic bound. Given that `ItemBase` has no fields, the `item` field information is lost. -->
<ol>
<li>ジェネリックがパラメータ化されていない場合、入力データはジェネリック境界に対して検証されます。<code>ItemBase</code>にフィールドがない場合、<code>item</code>フィールドの情報は失われます。</li>
</ol>
<!-- 2. In this case, the runtime type information is provided explicitly via the generic parametrization, so the input data is validated against the `IntItem` class and the serialization output matches what's expected. -->
<ol>
<li>この場合、実行時の型情報は一般的なパラメータ化によって明示的に提供されるため、入力データは<code>IntItem</code>クラスに対して検証され、シリアライゼーションの出力は期待されたものと一致します。</li>
</ol>
<h2 id="dynamic-model-creation">Dynamic model creation<a class="headerlink" href="#dynamic-model-creation" title="Permanent link">&para;</a></h2>
<details class="api">
<summary>API Documentation</summary>
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.create_model"><code>pydantic.main.create_model</code></a><br></p>
</details>
<!-- There are some occasions where it is desirable to create a model using runtime information to specify the fields. -->
<!-- For this Pydantic provides the `create_model` function to allow models to be created on the fly: -->
<p>実行時情報を使用してモデルを作成し、フィールドを指定することが望ましい場合があります。
このために、Pydanticは<code>create_model</code>関数を提供して、モデルをオンザフライで作成できるようにします。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">create_model</span>

<span class="n">DynamicFoobarModel</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
    <span class="s1">&#39;DynamicFoobarModel&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span> <span class="n">bar</span><span class="o">=</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">StaticFoobarModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">123</span>
</code></pre></div>
<!-- Here `StaticFoobarModel` and `DynamicFoobarModel` are identical. -->
<p>ここで、<code>StaticFoobarModel</code>と<code>DynamicFoobarModel</code>は同一です。</p>
<!-- Fields are defined by one of the following tuple forms: -->
<p>フィールドは、次のタプル形式のいずれかで定義されます。</p>
<!--
* `(<type>, <default value>)`
* `(<type>, Field(...))`
* `typing.Annotated[<type>, Field(...)]`
-->
<ul>
<li><code>(&lt;type&gt;, &lt;default value&gt;)</code></li>
<li><code>(&lt;type&gt;, Field(...))</code></li>
<li><code>typing.Annotated[&lt;type&gt;, Field(...)]</code></li>
</ul>
<!-- Using a `Field(...)` call as the second argument in the tuple (the default value) allows for more advanced field configuration. Thus, the following are analogous: -->
<p>タプルの2番目の引数(デフォルト値)として<code>Field(...)</code>呼び出しを使用すると、より高度なフィールド設定が可能になります。したがって、次のように類似しています。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">create_model</span>

<span class="n">DynamicModel</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
    <span class="s1">&#39;DynamicModel&#39;</span><span class="p">,</span>
    <span class="n">foo</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;foo description&#39;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;FOO&#39;</span><span class="p">)),</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">StaticModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;foo description&#39;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;FOO&#39;</span><span class="p">)</span>
</code></pre></div>
<!-- The special keyword arguments `__config__` and `__base__` can be used to customize the new model.
This includes extending a base model with extra fields. -->
<p>特別なキーワード引数<code>__config__</code>と<code>__base__</code>を使って新しいモデルをカスタマイズすることができます。
これには、フィールドを追加して基本モデルを拡張することも含まれます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">create_model</span>


<span class="k">class</span> <span class="nc">FooModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">123</span>


<span class="n">BarModel</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
    <span class="s1">&#39;BarModel&#39;</span><span class="p">,</span>
    <span class="n">apple</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;russet&#39;</span><span class="p">),</span>
    <span class="n">banana</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">),</span>
    <span class="n">__base__</span><span class="o">=</span><span class="n">FooModel</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">BarModel</span><span class="p">)</span>
<span class="c1">#&gt; &lt;class &#39;__main__.BarModel&#39;&gt;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">BarModel</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="c1">#&gt; dict_keys([&#39;foo&#39;, &#39;bar&#39;, &#39;apple&#39;, &#39;banana&#39;])</span>
</code></pre></div>
<!-- You can also add validators by passing a dict to the `__validators__` argument. -->
<p><code>__validators__</code>引数にdictを渡すことでバリデータを追加することもできます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="n">create_model</span><span class="p">,</span> <span class="n">field_validator</span>


<span class="k">def</span> <span class="nf">username_alphanumeric</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isalnum</span><span class="p">(),</span> <span class="s1">&#39;must be alphanumeric&#39;</span>
    <span class="k">return</span> <span class="n">v</span>


<span class="n">validators</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;username_validator&#39;</span><span class="p">:</span> <span class="n">field_validator</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)(</span><span class="n">username_alphanumeric</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">UserModel</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
    <span class="s1">&#39;UserModel&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span> <span class="n">__validators__</span><span class="o">=</span><span class="n">validators</span>
<span class="p">)</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">UserModel</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;scolvin&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="c1">#&gt; username=&#39;scolvin&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">UserModel</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;scolvi%n&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for UserModel</span>
<span class="sd">    username</span>
<span class="sd">      Assertion failed, must be alphanumeric [type=assertion_error, input_value=&#39;scolvi%n&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- To pickle a dynamically created model: -->
動的に作成されたモデルをピクル化するには、次の手順を行います。</p>
<p><!--
- the model must be defined globally
- it must provide <code>__module__</code>
-->
- モデルはグローバルに定義する必要があります。
- <code>__module__</code>を提供する必要があります</p>
</div>
<h2 id="rootmodel-and-custom-root-types"><code>RootModel</code> and custom root types<a class="headerlink" href="#rootmodel-and-custom-root-types" title="Permanent link">&para;</a></h2>
<details class="api">
<summary>API Documentation</summary>
<p><a class="autorefs autorefs-internal" href="../../api/root_model/#pydantic.root_model.RootModel"><code>pydantic.root_model.RootModel</code></a><br></p>
</details>
<!-- Pydantic models can be defined with a "custom root type" by subclassing [`pydantic.RootModel`][pydantic.RootModel]. -->
<p>Pydanticモデルは、<a class="autorefs autorefs-internal" href="../../api/root_model/#pydantic.root_model.RootModel"><code>pydantic.RootModel</code></a>をサブクラス化することで、"カスタムルートタイプ"で定義できます。</p>
<!-- The root type can be any type supported by Pydantic, and is specified by the generic parameter to `RootModel`.
The root value can be passed to the model `__init__` or [`model_validate`][pydantic.main.BaseModel.model_validate] via the first and only argument. -->
<p>ルート型はPydanticでサポートされている任意の型で、<code>RootModel</code>の汎用パラメータで指定されます。
ルート値は、最初で唯一の引数を介してモデル<code>__init__</code>または<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate</code></a>に渡すことができます。</p>
<!-- Here's an example of how this works: -->
<p>これがどのように機能するかの例を次に示します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">RootModel</span>

<span class="n">Pets</span> <span class="o">=</span> <span class="n">RootModel</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="n">PetsByName</span> <span class="o">=</span> <span class="n">RootModel</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Pets</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">]))</span>
<span class="c1">#&gt; root=[&#39;dog&#39;, &#39;cat&#39;]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Pets</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">())</span>
<span class="c1">#&gt; [&quot;dog&quot;,&quot;cat&quot;]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Pets</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">]))</span>
<span class="c1">#&gt; root=[&#39;dog&#39;, &#39;cat&#39;]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Pets</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{&#39;items&#39;: {&#39;type&#39;: &#39;string&#39;}, &#39;title&#39;: &#39;RootModel[List[str]]&#39;, &#39;type&#39;: &#39;array&#39;}</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">PetsByName</span><span class="p">({</span><span class="s1">&#39;Otis&#39;</span><span class="p">:</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;Milo&#39;</span><span class="p">:</span> <span class="s1">&#39;cat&#39;</span><span class="p">}))</span>
<span class="c1">#&gt; root={&#39;Otis&#39;: &#39;dog&#39;, &#39;Milo&#39;: &#39;cat&#39;}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">PetsByName</span><span class="p">({</span><span class="s1">&#39;Otis&#39;</span><span class="p">:</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;Milo&#39;</span><span class="p">:</span> <span class="s1">&#39;cat&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">())</span>
<span class="c1">#&gt; {&quot;Otis&quot;:&quot;dog&quot;,&quot;Milo&quot;:&quot;cat&quot;}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">PetsByName</span><span class="o">.</span><span class="n">model_validate</span><span class="p">({</span><span class="s1">&#39;Otis&#39;</span><span class="p">:</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;Milo&#39;</span><span class="p">:</span> <span class="s1">&#39;cat&#39;</span><span class="p">}))</span>
<span class="c1">#&gt; root={&#39;Otis&#39;: &#39;dog&#39;, &#39;Milo&#39;: &#39;cat&#39;}</span>
</code></pre></div>
<!-- If you want to access items in the `root` field directly or to iterate over the items, you can implement custom `__iter__` and `__getitem__` functions, as shown in the following example. -->
<p><code>root</code>フィールド内の項目に直接アクセスしたり、項目を繰り返し処理したりしたい場合は、次の例に示すように、カスタムの<code>__iter__</code>関数と<code>__getitem__</code>関数を実装することができます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">RootModel</span>


<span class="k">class</span> <span class="nc">Pets</span><span class="p">(</span><span class="n">RootModel</span><span class="p">):</span>
    <span class="n">root</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>


<span class="n">pets</span> <span class="o">=</span> <span class="n">Pets</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pets</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c1">#&gt; dog</span>
<span class="nb">print</span><span class="p">([</span><span class="n">pet</span> <span class="k">for</span> <span class="n">pet</span> <span class="ow">in</span> <span class="n">pets</span><span class="p">])</span>
<span class="c1">#&gt; [&#39;dog&#39;, &#39;cat&#39;]</span>
</code></pre></div>
<!-- You can also create subclasses of the parametrized root model directly: -->
<p>パラメータ化されたルートモデルのサブクラスを直接作成することもできます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">RootModel</span>


<span class="k">class</span> <span class="nc">Pets</span><span class="p">(</span><span class="n">RootModel</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
    <span class="k">def</span> <span class="nf">describe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Pets: </span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>


<span class="n">my_pets</span> <span class="o">=</span> <span class="n">Pets</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">my_pets</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
<span class="c1">#&gt; Pets: dog, cat</span>
</code></pre></div>
<h2 id="faux-immutability">Faux immutability<a class="headerlink" href="#faux-immutability" title="Permanent link">&para;</a></h2>
<!-- Models can be configured to be immutable via `model_config['frozen'] = True`. When this is set, attempting to change the values of instance attributes will raise errors. See the [API reference][pydantic.config.ConfigDict.frozen] for more details. -->
<p>モデルは<code>model_config['frozen']=True</code>で不変に設定できます。これが設定されている場合、インスタンス属性の値を変更しようとするとエラーが発生します。詳細については、<a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.frozen">API reference</a>を参照してください。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- This behavior was achieved in Pydantic V1 via the config setting <code>allow_mutation = False</code>.
This config flag is deprecated in Pydantic V2, and has been replaced with <code>frozen</code>. -->
この動作は、Pydantic V1で<code>allow_mutation=False</code>という設定によって実現されました。
このconfigフラグはPydantic V2では廃止され、<code>frozen</code>に置き換えられました。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><!-- In Python, immutability is not enforced. Developers have the ability to modify objects that are conventionally considered "immutable" if they choose to do so. -->
Pythonでは、不変性は強制されません。開発者は、従来"不変"と見なされていたオブジェクトを、変更することを選択した場合に変更することができます。</p>
</div>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">FooBarModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">dict</span>


<span class="n">foobar</span> <span class="o">=</span> <span class="n">FooBarModel</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;pear&#39;</span><span class="p">})</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">foobar</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;different&#39;</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for FooBarModel</span>
<span class="sd">    a</span>
<span class="sd">      Instance is frozen [type=frozen_instance, input_value=&#39;different&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">foobar</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
<span class="c1">#&gt; hello</span>
<span class="nb">print</span><span class="p">(</span><span class="n">foobar</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
<span class="c1">#&gt; {&#39;apple&#39;: &#39;pear&#39;}</span>
<span class="n">foobar</span><span class="o">.</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;grape&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">foobar</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
<span class="c1">#&gt; {&#39;apple&#39;: &#39;grape&#39;}</span>
</code></pre></div>
<!-- Trying to change `a` caused an error, and `a` remains unchanged. However, the dict `b` is mutable, and the immutability of `foobar` doesn't stop `b` from being changed. -->
<p><code>a</code>を変更しようとするとエラーが発生し、<code>a</code>は変更されません。しかし、辞書<code>b</code>は変更可能であり、<code>foobar</code>の不変性は<code>b</code>の変更を止めるものではありません。</p>
<h2 id="abstract-base-classes">Abstract base classes<a class="headerlink" href="#abstract-base-classes" title="Permanent link">&para;</a></h2>
<!-- Pydantic models can be used alongside Python's[Abstract Base Classes](https://docs.python.org/3/library/abc.html) (ABCs). -->
<p>Pydanticモデルは、Pythonの<a href="https://docs.python.org/3/library/abc.html">Abstract Base Classes</a>(ABC)と一緒に使用できます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">abc</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">FooBarModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">int</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">my_abstract_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>
<h2 id="field-ordering">Field ordering<a class="headerlink" href="#field-ordering" title="Permanent link">&para;</a></h2>
<!-- Field order affects models in the following ways: -->
<p>フィールドの順序は、モデルに次のような影響を与えます。</p>
<!--
* field order is preserved in the model [schema](json_schema.md)
* field order is preserved in [validation errors](#error-handling)
* field order is preserved by [`.model_dump()` and `.model_dump_json()` etc.](serialization.md#model_dump)
-->
<ul>
<li>フィールドの順序はモデル<a href="../json_schema/">schema</a>で保持されます。</li>
<li><a href="#error-handling">validation errors</a>でフィールドの順序が保持されます。</li>
<li>フィールドの順序は、<a href="../serialization/#model_dump"><code>.model_dump()</code>および<code>.model_dump_json()</code>など</a>によって保持されます。</li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">c</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">d</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">e</span><span class="p">:</span> <span class="nb">float</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="c1">#&gt; dict_keys([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">e</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 1, &#39;d&#39;: 0, &#39;e&#39;: 2.0}</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="n">error_locations</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="s1">&#39;loc&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">err</span><span class="o">.</span><span class="n">errors</span><span class="p">()]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">error_locations</span><span class="p">)</span>
<span class="c1">#&gt; [(&#39;a&#39;,), (&#39;b&#39;,), (&#39;c&#39;,), (&#39;d&#39;,), (&#39;e&#39;,)]</span>
</code></pre></div>
<h2 id="required-fields">Required fields<a class="headerlink" href="#required-fields" title="Permanent link">&para;</a></h2>
<!-- To declare a field as required, you may declare it using an annotation, or an annotation in combination with a `Field` specification.
You may also use `Ellipsis`/`...` to emphasize that a field is required, especially when using the `Field` constructor. -->
<p>必要に応じてフィールドを宣言するには、注釈を使用するか、注釈と<code>Field</code>仕様を組み合わせて宣言します。
特に<code>Field</code>コンストラクタを使用する場合は、<code>Ellipsis</code>/<code>...</code>を使用して、フィールドが必要であることを強調することもできます。</p>
<!-- The [`Field`](fields.md) function is primarily used to configure settings like `alias` or `description` for an attribute.
The constructor supports `Ellipsis`/`...` as the sole positional argument.
This is used as a way to indicate that said field is mandatory, though it's the type hint that enforces this requirement. -->
<p><a href="../fields/"><code>Field</code></a>関数は、主に属性の<code>alias</code>や<code>description</code>のような設定を行うために使われます。
コンストラクタは<code>Ellipsis</code>/<code>...</code>を唯一の位置引数としてサポートします。
これは、そのフィールドが必須であることを示す方法として使用されますが、この要件を強制するのは型ヒントです。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">...</span>
    <span class="n">c</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
</code></pre></div>
<!-- Here `a`, `b` and `c` are all required. However, this use of `b: int = ...` does not work properly with [mypy](../integrations/mypy.md), and as of **v1.0** should be avoided in most cases. -->
<p>ここで<code>a</code>、<code>b</code>、<code>c</code>はすべて必須です。しかし、この<code>b:int=...</code>の使用は<a href="../../integrations/mypy/">mypy</a>では適切に動作せず、<strong>v1.0</strong>ではほとんどの場合避けるべきです。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- In Pydantic V1, fields annotated with <code>Optional</code> or <code>Any</code> would be given an implicit default of <code>None</code> even if no default was explicitly specified. This behavior has changed in Pydantic V2, and there are no longer any type annotations that will result in a field having an implicit default value. -->
Pydantic V1では、<code>Optional</code>または<code>Any</code>で注釈されたフィールドには、デフォルトが明示的に指定されていない場合でも、暗黙的なデフォルト<code>None</code>が与えられていました。この動作はPydantic V2で変更され、暗黙的なデフォルト値を持つフィールドを生成する型注釈はもはや存在しません。</p>
<p><!-- See <a href="../migration.md#required-optional-and-nullable-fields">the migration guide</a> for more details on changes to required and nullable fields. -->
必須フィールドとnull許容フィールドの変更の詳細については、<a href="../../migration/#required-optional-and-nullable-fields">the migration guide</a>を参照してください。</p>
</div>
<h2 id="fields-with-non-hashable-default-values">Fields with non-hashable default values<a class="headerlink" href="#fields-with-non-hashable-default-values" title="Permanent link">&para;</a></h2>
<!-- A common source of bugs in python is to use a mutable object as a default value for a function or method argument, as the same instance ends up being reused in each call. -->
<p>Pythonの一般的なバグの原因は、関数またはメソッドの引数のデフォルト値として可変オブジェクトを使用することです。これは、各呼び出しで同じインスタンスが再利用されるためです。</p>
<!-- The `dataclasses` module actually raises an error in this case, indicating that you should use the `default_factory` argument to `dataclasses.field`. -->
<p>この場合、<code>dataclasses</code>モジュールは実際にはエラーを発生し、<code>dataclasses.field</code>に<code>default_factory</code>引数を使用する必要があることを示します。</p>
<!-- Pydantic also supports the use of a [`default_factory`](#fields-with-dynamic-default-values) for non-hashable default values, but it is not required. In the event that the default value is not hashable, Pydantic will deepcopy the default value when creating each instance of the model: -->
<p>Pydanticは、ハッシュ不可能なデフォルト値に対して<a href="#fields-with-dynamic-default-values"><code>default_factory</code></a>の使用もサポートしていますが、必須ではありません。デフォルト値がハッシュ可能でない場合、Pydanticはモデルの各インスタンスを作成するときにデフォルト値をディープコピーします。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">item_counts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[{}]</span>


<span class="n">m1</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="n">m1</span><span class="o">.</span><span class="n">item_counts</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="o">.</span><span class="n">item_counts</span><span class="p">)</span>
<span class="c1">#&gt; [{&#39;a&#39;: 1}]</span>

<span class="n">m2</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m2</span><span class="o">.</span><span class="n">item_counts</span><span class="p">)</span>
<span class="c1">#&gt; [{}]</span>
</code></pre></div>
<h2 id="fields-with-dynamic-default-values">Fields with dynamic default values<a class="headerlink" href="#fields-with-dynamic-default-values" title="Permanent link">&para;</a></h2>
<!-- When declaring a field with a default value, you may want it to be dynamic (i.e. different for each model).
To do this, you may want to use a `default_factory`. -->
<p>デフォルト値を使用してフィールドを宣言する場合は、そのフィールドを動的(つまり、モデルごとに異なる)にすることができます。
これを行うには、<code>default_factory</code>を使用します。</p>
<!-- Here is an example: -->
<p>次に例を示します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>
<span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">UUID</span><span class="p">,</span> <span class="n">uuid4</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>


<span class="k">def</span> <span class="nf">datetime_now</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">uid</span><span class="p">:</span> <span class="n">UUID</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">uuid4</span><span class="p">)</span>
    <span class="n">updated</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">datetime_now</span><span class="p">)</span>


<span class="n">m1</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">m1</span><span class="o">.</span><span class="n">uid</span> <span class="o">!=</span> <span class="n">m2</span><span class="o">.</span><span class="n">uid</span>
</code></pre></div>
<!-- You can find more information in the documentation of the [`Field` function](fields.md). -->
<p>詳細については、<a href="../fields/"><code>Field</code> function</a>のドキュメントを参照してください。</p>
<h2 id="automatically-excluded-attributes">Automatically excluded attributes<a class="headerlink" href="#automatically-excluded-attributes" title="Permanent link">&para;</a></h2>
<h3 id="class-vars">Class vars<a class="headerlink" href="#class-vars" title="Permanent link">&para;</a></h3>
<!-- Attributes annotated with `typing.ClassVar` are properly treated by Pydantic as class variables, and will not become fields on model instances: -->
<p><code>typing.ClassVar</code>で注釈が付けられた属性は、Pydanticによってクラス変数として適切に扱われ、モデルインスタンスのフィールドにはなりません。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">ClassVar</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; x=2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="c1">#&gt; 1</span>
</code></pre></div>
<h3 id="private-model-attributes">Private model attributes<a class="headerlink" href="#private-model-attributes" title="Permanent link">&para;</a></h3>
<details class="api">
<summary>API Documentation</summary>
<p><a class="autorefs autorefs-internal" href="../../api/fields/#pydantic.fields.PrivateAttr"><code>pydantic.fields.PrivateAttr</code></a><br></p>
</details>
<!-- Attributes whose name has a leading underscore are not treated as fields by Pydantic, and are not included in the model schema. Instead, these are converted into a "private attribute" which is not validated or even set during calls to `__init__`, `model_validate`, etc. -->
<p>名前の先頭にアンダースコアが付いている属性は、Pydanticではフィールドとして扱われず、モデルスキーマにも含まれません。代わりに、これらは"プライベート属性"に変換されます。この属性は検証されず、<code>__init__</code>、<code>model_validate</code>などの呼び出し時にも設定されません。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!--
As of Pydantic v2.1.0, you will receive a NameError if trying to use the <a href="fields.md">klzzwxh:0163 function</a> with a private attribute.
Because private attributes are not treated as fields, the Field() function cannot be applied.
-->
Pydantic v2.1.0では、private属性で<a href="../fields/"><code>Field</code>関数</a>を使用しようとすると、NameErrorを受け取ります。
プライベート属性はフィールドとして扱われないため、Field()関数は適用できません。</p>
</div>
<!-- Here is an example of usage: -->
<p>次に使用例を示します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">PrivateAttr</span>


<span class="k">class</span> <span class="nc">TimeAwareModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">_processed_at</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="n">_secret_value</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
        <span class="c1"># this could also be done with default_factory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_secret_value</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">TimeAwareModel</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_processed_at</span><span class="p">)</span>
<span class="c1">#&gt; 2032-01-02 03:04:05.000006</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_secret_value</span><span class="p">)</span>
<span class="c1">#&gt; 3</span>
</code></pre></div>
<!-- Private attribute names must start with underscore to prevent conflicts with model fields. However, dunder names (such as `__attr__`) are not supported. -->
<p>モデルフィールドとの競合を避けるため、プライベート属性名はアンダースコアで始める必要があります。ただし、名前(<code>__attr__</code>など)はサポートされていません。</p>
<h2 id="data-conversion">Data conversion<a class="headerlink" href="#data-conversion" title="Permanent link">&para;</a></h2>
<!-- Pydantic may cast input data to force it to conform to model field types, and in some cases this may result in a loss of information.
For example: -->
<p>Pydanticは入力データをキャストして、モデルのフィールド型に強制的に準拠させることがあり、場合によっては情報が失われることがあります。
次に例を示します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">c</span><span class="p">:</span> <span class="nb">str</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">3.000</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;2.72&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sa">b</span><span class="s1">&#39;binary data&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;a&#39;: 3, &#39;b&#39;: 2.72, &#39;c&#39;: &#39;binary data&#39;}</span>
</code></pre></div>
<!-- This is a deliberate decision of Pydantic, and is frequently the most useful approach. See [here](https://github.com/pydantic/pydantic/issues/578) for a longer discussion on the subject. -->
<p>これはPydanticの意図的な決定であり、多くの場合、最も有用なアプローチです。このテーマに関するより長い議論については、<a href="https://github.com/pydantic/pydantic/issues/578">ここ</a>を参照してください。</p>
<!-- Nevertheless, [strict type checking](strict_mode.md) is also supported. -->
<p>ただし、<a href="../strict_mode/">strict type checking</a>もサポートされています。</p>
<h2 id="model-signature">Model signature<a class="headerlink" href="#model-signature" title="Permanent link">&para;</a></h2>
<!-- All Pydantic models will have their signature generated based on their fields: -->
<p>すべてのPydanticモデルは、そのフィールドに基づいて生成されたシグネチャを持ちます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">inspect</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>


<span class="k">class</span> <span class="nc">FooModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span>
    <span class="n">apple</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;pear&#39;</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">FooModel</span><span class="p">))</span>
<span class="c1">#&gt; (*, id: int, name: str = None, description: str = &#39;Foo&#39;, pear: int) -&gt; None</span>
</code></pre></div>
<!-- An accurate signature is useful for introspection purposes and libraries like `FastAPI` or `hypothesis`. -->
<p>正確な署名は、イントロスペクションの目的や、<code>FastAPI</code>や<code>hypothesis</code>のようなライブラリに役立ちます。</p>
<!-- The generated signature will also respect custom `__init__` functions: -->
<p>生成された署名は、カスタムの<code>__init__</code>関数も考慮します。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">inspect</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;My custom init!&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="n">bar</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">MyModel</span><span class="p">))</span>
<span class="c1">#&gt; (id: int = 1, *, bar: str, info: str = &#39;Foo&#39;) -&gt; None</span>
</code></pre></div>
<!-- To be included in the signature, a field's alias or name must be a valid Python identifier.
Pydantic will prioritize a field's alias over its name when generating the signature, but may use the field name if the alias is not a valid Python identifier. -->
<p>シグネチャに含めるフィールドのエイリアスまたは名前は、有効なPython識別子である必要があります。
Pydanticは、シグネチャを生成するときにフィールドの名前よりもエイリアスを優先しますが、エイリアスが有効なPython識別子でない場合はフィールド名を使用することができます。</p>
<!-- If a field's alias and name are _both_ not valid identifiers (which may be possible through exotic use of `create_model`), a `**data` argument will be added. In addition, the `**data` argument will always be present in the signature if `model_config['extra'] == 'allow'`. -->
<p>フィールドの別名と名前の両方が有効な識別子でない場合(これは<code>create_model</code>の特殊な使い方によって可能になるかもしれません)、<code>**data</code>引数が追加されます。さらに、<code>model_config['extra']=='allow'</code>の場合、<code>**data</code>引数は常にシグネチャに存在します。</p>
<h2 id="structural-pattern-matching">Structural pattern matching<a class="headerlink" href="#structural-pattern-matching" title="Permanent link">&para;</a></h2>
<!-- Pydantic supports structural pattern matching for models, as introduced by [PEP 636](https://peps.python.org/pep-0636/) in Python 3.10. -->
<p>Pydanticは、Python 3.10の<a href="https://peps.python.org/pep-0636/">PEP 636</a>で導入されたモデルの構造パターンマッチングをサポートしています。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Pet</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">species</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">Pet</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Bones&#39;</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="s1">&#39;dog&#39;</span><span class="p">)</span>

<span class="k">match</span> <span class="n">a</span><span class="p">:</span>
    <span class="c1"># match `species` to &#39;dog&#39;, declare and initialize `dog_name`</span>
    <span class="k">case</span> <span class="n">Pet</span><span class="p">(</span><span class="n">species</span><span class="o">=</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">dog_name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">dog_name</span><span class="si">}</span><span class="s1"> is a dog&#39;</span><span class="p">)</span>
<span class="c1">#&gt; Bones is a dog</span>
    <span class="c1"># default case</span>
    <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No dog matched&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- A match-case statement may seem as if it creates a new model, but don't be fooled;
it is just syntactic sugar for getting an attribute and either comparing it or declaring and initializing it. -->
match-case文は、新しいモデルを作成するように見えますが、騙されてはいけません。
単にアトリビュートを取得して比較したり、宣言して初期化したりするための糖衣構文です。</p>
</div>
<h2 id="attribute-copies">Attribute copies<a class="headerlink" href="#attribute-copies" title="Permanent link">&para;</a></h2>
<p>In many cases, arguments passed to the constructor will be copied in order to perform validation and, where necessary, coercion.
多くの場合、コンストラクタに渡された引数は、検証と、必要に応じて強制型変換を実行するためにコピーされます。</p>
<!-- In this example, note that the ID of the list changes after the class is constructed because it has been copied during validation: -->
<p>この例では、検証中にコピーされたため、クラスの構築後にリストのIDが変更されることに注意してください。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">C1</span><span class="p">:</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_arr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arr</span> <span class="o">=</span> <span class="n">in_arr</span>


<span class="k">class</span> <span class="nc">C2</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">arr</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="n">arr_orig</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>


<span class="n">c1</span> <span class="o">=</span> <span class="n">C1</span><span class="p">(</span><span class="n">arr_orig</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">C2</span><span class="p">(</span><span class="n">arr</span><span class="o">=</span><span class="n">arr_orig</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;id(c1.arr) == id(c2.arr):&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="p">(</span><span class="n">c1</span><span class="o">.</span><span class="n">arr</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">c2</span><span class="o">.</span><span class="n">arr</span><span class="p">))</span>
<span class="c1">#&gt; id(c1.arr) == id(c2.arr): False</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- There are some situations where Pydantic does not copy attributes, such as when passing models &mdash; we use the model as is. You can override this behaviour by setting <a href="../api/config.md#pydantic.config.ConfigDict">klzzwxh:0157</a>. -->
モデルを渡すときなど、Pydanticが属性をコピーしない場合があります。モデルをそのまま使用します。この動作は、<a href="../../api/config/#pydantic.config.ConfigDict"><code>model_config['revalidate_instances'] = 'always'</code></a>を設定することで上書きできます。</p>
</div>
<h2 id="extra-fields">Extra fields<a class="headerlink" href="#extra-fields" title="Permanent link">&para;</a></h2>
<!-- By default, Pydantic models won't error when you provide data for unrecognized fields, they will just be ignored: -->
<p>デフォルトでは、Pydanticモデルは、認識されないフィールドのデータを提供してもエラーにならず、単に無視されるだけです。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</code></pre></div>
<!-- If you want this to raise an error, you can achieve this via `model_config`: -->
<p>これによってエラーを発生させたい場合は、<code>model_config</code>を使用してこれを実行できます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s1">&#39;forbid&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Model</span>
<span class="sd">    y</span>
<span class="sd">      Extra inputs are not permitted [type=extra_forbidden, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<!-- To instead preserve any extra data provided, you can set `extra='allow'`.
The extra fields will then be stored in `BaseModel.__pydantic_extra__`: -->
<p>提供された追加データを保持するには、<code>extra='allow'</code>と設定します。
追加されたフィールドは<code>BaseModel.__pydantic_extra__</code>に保存されます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s1">&#39;allow&#39;</span><span class="p">)</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">__pydantic_extra__</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
</code></pre></div>
<!-- By default, no validation will be applied to these extra items, but you can set a type for the values by overriding the type annotation for `__pydantic_extra__`: -->
<p>デフォルトでは、これらの追加項目に検証は適用されませんが、<code>__pydantic_extra__</code>の型注釈をオーバーライドすることで、値の型を設定できます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">__pydantic_extra__</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># (1)!</span>

    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s1">&#39;allow&#39;</span><span class="p">)</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Model</span>
<span class="sd">    y</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">__pydantic_extra__</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</code></pre></div>
<!-- 1. The `= Field(init=False)` does not have any effect at runtime, but prevents the `__pydantic_extra__` field from being treated as an argument to the model's `__init__` method by type-checkers. -->
<ol>
<li><code>=Field(init=False)</code>は実行時には何の効果もありませんが、<code>__pydantic_extra__</code>フィールドが型チェッカーによってモデルの<code>__init__</code>メソッドの引数として扱われるのを防ぎます。</li>
</ol>
<!-- The same configurations apply to `TypedDict` and `dataclass`' except the config is controlled by setting the `__pydantic_config__` attribute of the class to a valid `ConfigDict`. -->
<p>同じ設定が<code>TypedDict</code>と<code>dataclass</code>'にも適用されますが、クラスの<code>__pydantic_config__</code>属性を有効な<code>ConfigDict</code>に設定することで設定が制御される点が異なります。</p>









  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9h4m4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21H9m0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03V19Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12h-4M15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3h9m0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97V5Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
<script src="/flarelytics/client.js"></script>
    <script>
    window.mkdocs_run_deps = ["pydantic==2.9.0a1", "pydantic-core==2.20.1", "pydantic-extra-types==2.9.0"]
    </script>

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "navigation.tabs", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../extra/feedback.js"></script>
      
        <script src="../../extra/fluff.js"></script>
      
        <script src="https://samuelcolvin.github.io/mkdocs-run-code/run_code_main.js"></script>
      
    
  </body>
</html>