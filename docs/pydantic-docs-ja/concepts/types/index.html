
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data validation using Python type hints">
      
      
      
        <link rel="canonical" href="https://docs.pydantic.dev/concepts/types/">
      
      
        <link rel="prev" href="../json/">
      
      
        <link rel="next" href="../unions/">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.28">
    
    
      
        <title>Types - Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../extra/terminal.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="grey">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#type-conversion" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" class="md-header__button md-logo" aria-label="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Types
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="grey"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="grey"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../models/" class="md-tabs__link">
          
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/base_model/" class="md-tabs__link">
          
  
  API Documentation

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/secrets/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../errors/errors/" class="md-tabs__link">
          
  
  Error Messages

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../integrations/mypy/" class="md-tabs__link">
          
  
  Integrations

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://blog.pydantic.dev/" class="md-tabs__link">
        
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../pydantic_people/" class="md-tabs__link">
        
  
    
  
  Pydantic People

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" class="md-nav__button md-logo" aria-label="Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    Pydantic - 私家版日本語訳(翻訳元Pydantic Version:v2.8.2)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pydantic/pydantic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why use Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help_with_pydantic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help with Pydantic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../version-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Types
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Types
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#type-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Type conversion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strict-types" class="md-nav__link">
    <span class="md-ellipsis">
      Strict Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Strict Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constrained-types" class="md-nav__link">
    <span class="md-ellipsis">
      Constrained types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-types" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#composing-types-via-annotated" class="md-nav__link">
    <span class="md-ellipsis">
      Composing types via Annotated
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Composing types via Annotated">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-validation-and-serialization" class="md-nav__link">
    <span class="md-ellipsis">
      Adding validation and serialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generics" class="md-nav__link">
    <span class="md-ellipsis">
      Generics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#named-type-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Named type aliases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Named type aliases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#named-recursive-types" class="md-nav__link">
    <span class="md-ellipsis">
      Named recursive types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-validation-with-__get_pydantic_core_schema__" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing validation with __get_pydantic_core_schema__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing validation with __get_pydantic_core_schema__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#as-a-method-on-a-custom-type" class="md-nav__link">
    <span class="md-ellipsis">
      As a method on a custom type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#as-an-annotation" class="md-nav__link">
    <span class="md-ellipsis">
      As an annotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-third-party-types" class="md-nav__link">
    <span class="md-ellipsis">
      Handling third-party types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-getpydanticschema-to-reduce-boilerplate" class="md-nav__link">
    <span class="md-ellipsis">
      Using GetPydanticSchema to reduce boilerplate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-custom-generic-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Handling custom generic classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling custom generic classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Generic containers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-to-field-name" class="md-nav__link">
    <span class="md-ellipsis">
      Access to field name
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alias/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alias
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serialization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../postponed_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Postponed Annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../strict_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Strict Mode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type Adapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation_decorator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation Decorator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conversion_table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversion Table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pydantic_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Settings Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Pydantic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/base_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/root_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RootModel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/dataclasses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Dataclasses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/type_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TypeAdapter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/validate_call/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validate Call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fields
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/aliases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aliases
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/json_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSON Schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Validators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_serializers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional Serializers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/standard_library_types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard Library Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Types
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/annotated_handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotated Handlers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic Core
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pydantic_core.core_schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pydantic Extra Types
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Extra Types
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_color/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Color
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_country/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Country
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_payment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Payment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_phone_numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Phone Numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_routing_numbers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routing Numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_coordinate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coordinate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_mac_address/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mac Address
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_isbn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ISBN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_pendulum_dt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pendulum
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_currency_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Currency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_language_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Language
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_script_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Script Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_semantic_version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Semantic Version
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_timezone_name/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timezone Name
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_ulid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ULID
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/secrets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secrets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/validators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validators
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Error Messages
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Error Messages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Error Handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/validation_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation Errors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/usage_errors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Errors
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Dev Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Dev Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/mypy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mypy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/pycharm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PyCharm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/hypothesis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hypothesis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/visual_studio_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visual Studio Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/datamodel_code_generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    datamodel-code-generator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/devtools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    devtools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/rich/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rich
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/linting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Production Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Production Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/aws_lambda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Lambda
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://blog.pydantic.dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic_people/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pydantic People
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#type-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      Type conversion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#strict-types" class="md-nav__link">
    <span class="md-ellipsis">
      Strict Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Strict Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constrained-types" class="md-nav__link">
    <span class="md-ellipsis">
      Constrained types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-types" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#composing-types-via-annotated" class="md-nav__link">
    <span class="md-ellipsis">
      Composing types via Annotated
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Composing types via Annotated">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-validation-and-serialization" class="md-nav__link">
    <span class="md-ellipsis">
      Adding validation and serialization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generics" class="md-nav__link">
    <span class="md-ellipsis">
      Generics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#named-type-aliases" class="md-nav__link">
    <span class="md-ellipsis">
      Named type aliases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Named type aliases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#named-recursive-types" class="md-nav__link">
    <span class="md-ellipsis">
      Named recursive types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-validation-with-__get_pydantic_core_schema__" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing validation with __get_pydantic_core_schema__
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing validation with __get_pydantic_core_schema__">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#as-a-method-on-a-custom-type" class="md-nav__link">
    <span class="md-ellipsis">
      As a method on a custom type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#as-an-annotation" class="md-nav__link">
    <span class="md-ellipsis">
      As an annotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-third-party-types" class="md-nav__link">
    <span class="md-ellipsis">
      Handling third-party types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-getpydanticschema-to-reduce-boilerplate" class="md-nav__link">
    <span class="md-ellipsis">
      Using GetPydanticSchema to reduce boilerplate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handling-custom-generic-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Handling custom generic classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Handling custom generic classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generic-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Generic containers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-to-field-name" class="md-nav__link">
    <span class="md-ellipsis">
      Access to field name
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                  

  
  


  <h1>Types</h1>

<!-- BEGIN INCLUDE ../warning.md -->

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>本サイトのドキュメントは、<a href="https://docs.pydantic.dev/latest/">Pydantic</a>の日本語翻訳の私家版です。</p>
<p>内容に不審な点がある場合は、<a href="https://docs.pydantic.dev/latest/">Pydantic</a>のドキュメントを確認してください。</p>
<p>翻訳に使用したPydanticのバージョンは、v2.8.2になります。</p>
</div>
<!-- END INCLUDE -->

<!-- Where possible Pydantic uses [standard library types](../api/standard_library_types.md) to define fields, thus smoothing the learning curve. For many useful applications, however, no standard library type exists, so Pydantic implements many commonly used types. -->
<p>可能な場合、Pydanticは<a href="../../api/standard_library_types/">標準ライブラリ型</a>を使用してフィールドを定義し、学習曲線をなめらかにします。ただし、多くの便利なアプリケーションには標準ライブラリ型が存在しないため、Pydanticは一般的に使用される多くの型を実装しています。</p>
<!-- There are also more complex types that can be found in the [Pydantic Extra Types](https://github.com/pydantic/pydantic-extra-types) package. -->
<p><a href="https://github.com/pydantic/pydantic-extra-types">Pydantic Extra Types</a>パッケージには、より複雑な型もあります。</p>
<!-- If no existing type suits your purpose you can also implement your [own Pydantic-compatible types](#custom-types) with custom properties and validation. -->
<p>既存の型が目的に合わない場合は、カスタムプロパティと検証を使用して、<a href="#custom-types">独自のPydantic互換型</a>を実装することもできます。</p>
<!-- The following sections describe the types supported by Pydantic. -->
<p>以下のセクションでは、Pydanticでサポートされている型について説明します。</p>
<!--
* [Standard Library Types](../api/standard_library_types.md) &mdash; types from the Python standard library.
* [Strict Types](#strict-types) &mdash; types that enable you to prevent coercion from compatible types.
* [Custom Data Types](#custom-types) &mdash; create your own custom data types.
* [Field Type Conversions](../concepts/conversion_table.md) &mdash; strict and lax conversion between different field types.
 -->
<ul>
<li><a href="../../api/standard_library_types/">Standard Library Types</a> &mdash; Pythonの標準ライブラリのタイプ。</li>
<li><a href="#strict-types">Strict Types</a> &mdash; 互換性のあるタイプからの強制を防ぐことができるタイプ。</li>
<li><a href="#custom-types">Custom Data Types</a> &mdash; 独自のカスタムデータ型を作成します。</li>
<li><a href="../conversion_table/">Field Type Conversions</a> &mdash; 異なるフィールドタイプ間の厳密および緩やかな変換を行います。</li>
</ul>
<h2 id="type-conversion">Type conversion<a class="headerlink" href="#type-conversion" title="Permanent link">&para;</a></h2>
<!-- During validation, Pydantic can coerce data into expected types. -->
<p>検証中、Pydanticはデータを期待される型に強制的に変換することができます。</p>
<!-- There are two modes of coercion: strict and lax. See [Conversion Table](../concepts/conversion_table.md) for more details on how Pydantic converts data in both strict and lax modes. -->
<p>強制にはstrictとlaxという2つのモードがあります。strictモードとlaxモードの両方でPydanticがデータを変換する方法の詳細については、<a href="../conversion_table/">Conversion Table</a>を参照してください。</p>
<!-- See [Strict mode](../concepts/strict_mode.md) and [Strict Types](#strict-types) for details on enabling strict coercion. -->
<p>厳密な強制を有効にする方法の詳細については、<a href="../strict_mode/">Strict mode</a>および<a href="#strict-types">Strict Types</a>を参照してください。</p>
<h2 id="strict-types">Strict Types<a class="headerlink" href="#strict-types" title="Permanent link">&para;</a></h2>
<!-- Pydantic provides the following strict types: -->
<p>Pydanticには次の厳密な型があります。</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.StrictBool"><code>StrictBool</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.StrictBytes"><code>StrictBytes</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.StrictFloat"><code>StrictFloat</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.StrictInt"><code>StrictInt</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.StrictStr"><code>StrictStr</code></a></li>
</ul>
<!-- These types will only pass validation when the validated value is of the respective type or is a subtype of that type. -->
<p>これらの型は、検証された値がそれぞれの型であるか、またはその型のサブタイプである場合にのみ検証に合格します。</p>
<h3 id="constrained-types">Constrained types<a class="headerlink" href="#constrained-types" title="Permanent link">&para;</a></h3>
<!-- This behavior is also exposed via the `strict` field of the constrained types and can be combined with a multitude of complex validation rules. See the individual type signatures for supported arguments. -->
<p>この動作は、制約された型の"strict"フィールドによっても公開され、多数の複雑な検証規則と組み合わせることができます。サポートされている引数については、個々の型のシグネチャを参照してください。</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.conbytes"><code>conbytes()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.condate"><code>condate()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.condecimal"><code>condecimal()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.confloat"><code>confloat()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.confrozenset"><code>confrozenset()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.conint"><code>conint()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.conlist"><code>conlist()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.conset"><code>conset()</code></a></li>
<li><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.constr"><code>constr()</code></a></li>
</ul>
<!-- The following caveats apply: -->
<p>次の注意事項が適用されます。</p>
<!--
- `StrictBytes` (and the `strict` option of `conbytes()`) will accept both `bytes`, and `bytearray` types.
- `StrictInt` (and the `strict` option of `conint()`) will not accept `bool` types, even though `bool` is a subclass of `int` in Python. Other subclasses will work.
- `StrictFloat` (and the `strict` option of `confloat()`) will not accept `int`.
-->
<ul>
<li><code>StrictBytes</code>(および<code>conbytes()</code>の<code>strict</code>オプション)は<code>bytes</code>型と<code>bytearray</code>型の両方を受け付けます。</li>
<li><code>StrictInt</code>(および<code>conint()</code>の<code>strict</code>オプション)は、<code>bool</code>がPythonの<code>int</code>のサブクラスであっても、<code>bool</code>型を受け入れません。他のサブクラスは動作します。</li>
<li><code>StrictFloat</code>(および<code>confloat()</code>の<code>strict</code>オプション)は<code>int</code>を受け入れません。</li>
</ul>
<!-- Besides the above, you can also have a [`FiniteFloat`][pydantic.types.FiniteFloat] type that will only accept finite values (i.e. not `inf`, `-inf` or `nan`). -->
<p>上記の他に、<a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.FiniteFloat"><code>FiniteFloat</code></a>型を指定することもできます。これは有限の値のみを受け入れます(つまり<code>inf</code>、<code>-inf</code>、<code>nan</code>)。</p>
<h2 id="custom-types">Custom Types<a class="headerlink" href="#custom-types" title="Permanent link">&para;</a></h2>
<!-- You can also define your own custom data types. There are several ways to achieve it. -->
<p>また、独自のカスタム・データ型を定義することもできます。これを実現する方法はいくつかあります。</p>
<h3 id="composing-types-via-annotated">Composing types via <code>Annotated</code><a class="headerlink" href="#composing-types-via-annotated" title="Permanent link">&para;</a></h3>
<!-- [PEP 593] introduced `Annotated` as a way to attach runtime metadata to types without changing how type checkers interpret them.
Pydantic takes advantage of this to allow you to create types that are identical to the original type as far as type checkers are concerned, but add validation, serialize differently, etc. -->
<p><a href="https://peps.python.org/pep-0593/">PEP 593</a>では、型チェッカーが型を解釈する方法を変更せずに、実行時メタデータを型に付加する方法として<code>Annotated</code>が導入されました。
Pydanticはこれを利用して、型チェッカーに関する限り、元の型と同じ型を作成できますが、検証を追加したり、別の方法でシリアライズしたりすることができます。</p>
<!-- For example, to create a type representing a positive int: -->
<p>たとえば、正のintを表す型を作成するには、次のようにします。</p>
<div class="language-py highlight"><pre><span></span><code><span class="c1"># or `from typing import Annotated` for Python 3.9+</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span><span class="p">,</span> <span class="n">TypeAdapter</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">PositiveInt</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">gt</span><span class="o">=</span><span class="mi">0</span><span class="p">)]</span>

<span class="n">ta</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">PositiveInt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; 1</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for constrained-int</span>
<span class="sd">      Input should be greater than 0 [type=greater_than, input_value=-1, input_type=int]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<!-- Note that you can also use constraints from [annotated-types](https://github.com/annotated-types/annotated-types) to make this Pydantic-agnostic: -->
<p><a href="https://github.com/annotated-types/annotated-types">annotated-types</a>の制約を使用して、これをPydanticに依存しないようにすることもできることに注意してください。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">annotated_types</span> <span class="kn">import</span> <span class="n">Gt</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">TypeAdapter</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">PositiveInt</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span>

<span class="n">ta</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">PositiveInt</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; 1</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for constrained-int</span>
<span class="sd">      Input should be greater than 0 [type=greater_than, input_value=-1, input_type=int]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="adding-validation-and-serialization">Adding validation and serialization<a class="headerlink" href="#adding-validation-and-serialization" title="Permanent link">&para;</a></h4>
<!-- You can add or override validation, serialization, and JSON schemas to an arbitrary type using the markers that Pydantic exports: -->
<p>Pydanticがエクスポートするマーカーを使用して、任意の型に検証、シリアライゼーション、JSONスキーマを追加またはオーバーライドすることができる。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AfterValidator</span><span class="p">,</span>
    <span class="n">PlainSerializer</span><span class="p">,</span>
    <span class="n">TypeAdapter</span><span class="p">,</span>
    <span class="n">WithJsonSchema</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">TruncatedFloat</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span>
    <span class="nb">float</span><span class="p">,</span>
    <span class="n">AfterValidator</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
    <span class="n">PlainSerializer</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">return_type</span><span class="o">=</span><span class="nb">str</span><span class="p">),</span>
    <span class="n">WithJsonSchema</span><span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">},</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;serialization&#39;</span><span class="p">),</span>
<span class="p">]</span>


<span class="n">ta</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">TruncatedFloat</span><span class="p">)</span>

<span class="nb">input</span> <span class="o">=</span> <span class="mf">1.02345</span>
<span class="k">assert</span> <span class="nb">input</span> <span class="o">!=</span> <span class="mf">1.0</span>

<span class="k">assert</span> <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">==</span> <span class="mf">1.0</span>

<span class="k">assert</span> <span class="n">ta</span><span class="o">.</span><span class="n">dump_json</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;&quot;1.0e+00&quot;&#39;</span>

<span class="k">assert</span> <span class="n">ta</span><span class="o">.</span><span class="n">json_schema</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;validation&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;number&#39;</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">ta</span><span class="o">.</span><span class="n">json_schema</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;serialization&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">}</span>
</code></pre></div>
<h4 id="generics">Generics<a class="headerlink" href="#generics" title="Permanent link">&para;</a></h4>
<!-- You can use type variables within `Annotated` to make re-usable modifications to types: -->
<p><code>Annotated</code>内で型変数を使用して、型に再利用可能な変更を加えることができます。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">annotated_types</span> <span class="kn">import</span> <span class="n">Gt</span><span class="p">,</span> <span class="n">Len</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">ValidationError</span>
<span class="kn">from</span> <span class="nn">pydantic.type_adapter</span> <span class="kn">import</span> <span class="n">TypeAdapter</span>

<span class="n">SequenceType</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;SequenceType&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">Sequence</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span>


<span class="n">ShortSequence</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">SequenceType</span><span class="p">,</span> <span class="n">Len</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)]</span>


<span class="n">ta</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">ShortSequence</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">v</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">([</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for list[int]</span>
<span class="sd">      List should have at most 10 items after validation, not 100 [type=too_long, input_value=[1, 1, 1, 1, 1, 1, 1, 1, ... 1, 1, 1, 1, 1, 1, 1, 1], input_type=list]</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>  <span class="c1"># or a bound=SupportGt</span>

<span class="n">PositiveList</span> <span class="o">=</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="n">Gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)]]</span>

<span class="n">ta</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">PositiveList</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
<span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">float</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for list[constrained-float]</span>
<span class="sd">    0</span>
<span class="sd">      Input should be greater than 0 [type=greater_than, input_value=-1, input_type=int]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="named-type-aliases">Named type aliases<a class="headerlink" href="#named-type-aliases" title="Permanent link">&para;</a></h3>
<!--
The above examples make use of implicit type aliases.
This means that they will not be able to have a `title` in JSON schemas and their schema will be copied between fields.
You can use [PEP 695]'s `TypeAliasType` via its [typing-extensions] backport to make named aliases, allowing you to define a new type without creating subclasses.
This new type can be as simple as a name or have complex validation logic attached to it:
 -->
<p>上記の例では、暗黙的な型エイリアスを使用しています。
これは、JSONスキーマに<code>title</code>を持つことができず、スキーマがフィールド間でコピーされることを意味します。
<a href="https://peps.python.org/pep-0695/">PEP 695</a>の<a href="https://github.com/python/typing_extensions">typing-extensions</a>バックポート経由で<code>TypeAliasType</code>を使用して、名前付きエイリアスを作成できます。これにより、サブクラスを作成せずに新しい型を定義できます。
この新しいタイプは、名前のように単純にすることも、複雑な検証ロジックを付加することもできます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span> <span class="nn">annotated_types</span> <span class="kn">import</span> <span class="n">Gt</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">TypeAliasType</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">ImplicitAliasPositiveIntList</span> <span class="o">=</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)]]</span>


<span class="k">class</span> <span class="nc">Model1</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">ImplicitAliasPositiveIntList</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">ImplicitAliasPositiveIntList</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model1</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;properties&#39;: {</span>
<span class="sd">        &#39;x&#39;: {</span>
<span class="sd">            &#39;items&#39;: {&#39;exclusiveMinimum&#39;: 0, &#39;type&#39;: &#39;integer&#39;},</span>
<span class="sd">            &#39;title&#39;: &#39;X&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;array&#39;,</span>
<span class="sd">        },</span>
<span class="sd">        &#39;y&#39;: {</span>
<span class="sd">            &#39;items&#39;: {&#39;exclusiveMinimum&#39;: 0, &#39;type&#39;: &#39;integer&#39;},</span>
<span class="sd">            &#39;title&#39;: &#39;Y&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;array&#39;,</span>
<span class="sd">        },</span>
<span class="sd">    },</span>
<span class="sd">    &#39;required&#39;: [&#39;x&#39;, &#39;y&#39;],</span>
<span class="sd">    &#39;title&#39;: &#39;Model1&#39;,</span>
<span class="sd">    &#39;type&#39;: &#39;object&#39;,</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">PositiveIntList</span> <span class="o">=</span> <span class="n">TypeAliasType</span><span class="p">(</span><span class="s1">&#39;PositiveIntList&#39;</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)]])</span>


<span class="k">class</span> <span class="nc">Model2</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">PositiveIntList</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">PositiveIntList</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model2</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;$defs&#39;: {</span>
<span class="sd">        &#39;PositiveIntList&#39;: {</span>
<span class="sd">            &#39;items&#39;: {&#39;exclusiveMinimum&#39;: 0, &#39;type&#39;: &#39;integer&#39;},</span>
<span class="sd">            &#39;type&#39;: &#39;array&#39;,</span>
<span class="sd">        }</span>
<span class="sd">    },</span>
<span class="sd">    &#39;properties&#39;: {</span>
<span class="sd">        &#39;x&#39;: {&#39;$ref&#39;: &#39;#/$defs/PositiveIntList&#39;},</span>
<span class="sd">        &#39;y&#39;: {&#39;$ref&#39;: &#39;#/$defs/PositiveIntList&#39;},</span>
<span class="sd">    },</span>
<span class="sd">    &#39;required&#39;: [&#39;x&#39;, &#39;y&#39;],</span>
<span class="sd">    &#39;title&#39;: &#39;Model2&#39;,</span>
<span class="sd">    &#39;type&#39;: &#39;object&#39;,</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<p>These named type aliases can also be generic:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">annotated_types</span> <span class="kn">import</span> <span class="n">Gt</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">TypeAliasType</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>  <span class="c1"># or a `bound=SupportGt`</span>

<span class="n">PositiveList</span> <span class="o">=</span> <span class="n">TypeAliasType</span><span class="p">(</span>
    <span class="s1">&#39;PositiveList&#39;</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="n">Gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)]],</span> <span class="n">type_params</span><span class="o">=</span><span class="p">(</span><span class="n">T</span><span class="p">,)</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">PositiveList</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>


<span class="k">assert</span> <span class="n">Model</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;{&quot;x&quot;: [&quot;1&quot;]}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Model[int]</span>
<span class="sd">    x.0</span>
<span class="sd">      Input should be greater than 0 [type=greater_than, input_value=-1, input_type=int]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="named-recursive-types">Named recursive types<a class="headerlink" href="#named-recursive-types" title="Permanent link">&para;</a></h4>
<p>You can also use <code>TypeAliasType</code> to create recursive types:</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">from</span> <span class="nn">pydantic_core</span> <span class="kn">import</span> <span class="n">PydanticCustomError</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">TypeAliasType</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">TypeAdapter</span><span class="p">,</span>
    <span class="n">ValidationError</span><span class="p">,</span>
    <span class="n">ValidationInfo</span><span class="p">,</span>
    <span class="n">ValidatorFunctionWrapHandler</span><span class="p">,</span>
    <span class="n">WrapValidator</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">json_custom_error_validator</span><span class="p">(</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">ValidatorFunctionWrapHandler</span><span class="p">,</span> <span class="n">_info</span><span class="p">:</span> <span class="n">ValidationInfo</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simplify the error message to avoid a gross error stemming</span>
<span class="sd">    from exhaustive checking of all union options.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">handler</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">PydanticCustomError</span><span class="p">(</span>
            <span class="s1">&#39;invalid_json&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Input is not valid json&#39;</span><span class="p">,</span>
        <span class="p">)</span>


<span class="n">Json</span> <span class="o">=</span> <span class="n">TypeAliasType</span><span class="p">(</span>
    <span class="s1">&#39;Json&#39;</span><span class="p">,</span>
    <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;Json&#39;</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Json&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">WrapValidator</span><span class="p">(</span><span class="n">json_custom_error_validator</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>


<span class="n">ta</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">Json</span><span class="p">)</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}})</span>
<span class="k">assert</span> <span class="n">v</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}}</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="nb">object</span><span class="p">()})</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for function-wrap[json_custom_error_validator()]</span>
<span class="sd">      Input is not valid json [type=invalid_json, input_value={&#39;x&#39;: &lt;object object at 0x0123456789ab&gt;}, input_type=dict]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="customizing-validation-with-__get_pydantic_core_schema__">Customizing validation with <code>__get_pydantic_core_schema__</code> <a name="customizing_validation_with_get_pydantic_core_schema"></a><a class="headerlink" href="#customizing-validation-with-__get_pydantic_core_schema__" title="Permanent link">&para;</a></h3>
<!-- To do more extensive customization of how Pydantic handles custom classes, and in particular when you have access to the class or can subclass it, you can implement a special `__get_pydantic_core_schema__` to tell Pydantic how to generate the `pydantic-core` schema. -->
<p>Pydanticがカスタムクラスを処理する方法をより広範にカスタマイズするために、特にクラスにアクセスできる場合やサブクラスを作成できる場合には、特別な<code>__get_pydantic_core_schema__</code>を実装して、<code>pydantic-core</code>スキーマの生成方法をPydanticに指示することができます。</p>
<!-- While `pydantic` uses `pydantic-core` internally to handle validation and serialization, it is a new API for Pydantic V2, thus it is one of the areas most likely to be tweaked in the future and you should try to stick to the built-in constructs like those provided by `annotated-types`, `pydantic.Field`, or `BeforeValidator` and so on. -->
<p><code>pydantic</code>は内部で<code>pydantic-core</code>を使用して検証とシリアライゼーションを処理しますが、これはPydantic V2の新しいAPIであるため、将来微調整される可能性が最も高い領域の1つであり、<code>annotated-types</code>、<code>pydantic.Field</code>、<code>BeforeValidator</code>などで提供されているような組み込み構造に固執するようにしてください。</p>
<!-- You can implement `__get_pydantic_core_schema__` both on a custom type and on metadata intended to be put in `Annotated`. -->
<p><code>__get_pydantic_core_schema__</code>は、カスタム型と<code>Annotated</code>に入れることを意図したメタデータの両方に実装できます。</p>
<!-- In both cases the API is middleware-like and similar to that of "wrap" validators: -->
<p>どちらの場合も、APIはミドルウェアに似ており、"ラップ"バリデータのAPIに似ています。</p>
<!-- you get a `source_type` (which isn't necessarily the same as the class, in particular for generics) and a `handler` that you can call with a type to either call the next metadata in `Annotated` or call into Pydantic's internal schema generation. -->
<p><code>source_type</code>(特にジェネリックスの場合、クラスと同じである必要はありません)と<code>handler</code>を取得します。これらを型で呼び出すことで、<code>Annotated</code>内の次のメタデータを呼び出すか、Pydanticの内部スキーマ生成に呼び出すことができます。</p>
<!-- The simplest no-op implementation calls the handler with the type you are given, then returns that as the result. You can also choose to modify the type before calling the handler, modify the core schema returned by the handler, or not call the handler at all. -->
<p>最も単純なno-op実装は、指定された型でハンドラを呼び出し、それを結果として返します。また、ハンドラを呼び出す前に型を変更したり、ハンドラによって返されるコアスキーマを変更したり、ハンドラをまったく呼び出さないようにすることもできます。</p>
<h4 id="as-a-method-on-a-custom-type">As a method on a custom type<a class="headerlink" href="#as-a-method-on-a-custom-type" title="Permanent link">&para;</a></h4>
<!--
The following is an example of a type that uses `__get_pydantic_core_schema__` to customize how it gets validated.
This is equivalent to implementing `__get_validators__` in Pydantic V1.
-->
<p>以下は、検証方法をカスタマイズするために<code>__get_pydantic_core_schema__</code>を使用する型の例です。
これはPydantic V1で<code>__get_validators__</code>を実装するのと同じです。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">pydantic_core</span> <span class="kn">import</span> <span class="n">CoreSchema</span><span class="p">,</span> <span class="n">core_schema</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">GetCoreSchemaHandler</span><span class="p">,</span> <span class="n">TypeAdapter</span>


<span class="k">class</span> <span class="nc">Username</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_pydantic_core_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">source_type</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">GetCoreSchemaHandler</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CoreSchema</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">no_info_after_validator_function</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">handler</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>


<span class="n">ta</span> <span class="o">=</span> <span class="n">TypeAdapter</span><span class="p">(</span><span class="n">Username</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">validate_python</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">Username</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">res</span> <span class="o">==</span> <span class="s1">&#39;abc&#39;</span>
</code></pre></div>
<!-- See [JSON Schema](../concepts/json_schema.md) for more details on how to customize JSON schemas for custom types. -->
<p>カスタム型用にJSONスキーマをカスタマイズする方法の詳細については、<a href="../json_schema/">JSON Schema</a>を参照してください。</p>
<h4 id="as-an-annotation">As an annotation<a class="headerlink" href="#as-an-annotation" title="Permanent link">&para;</a></h4>
<!-- Often you'll want to parametrize your custom type by more than just generic type parameters (which you can do via the type system and will be discussed later). -->
<p>一般的な型パラメーター(型システムを介して行うことができ、後で説明します)だけではなく、カスタム型をパラメーター化することがよくあります。</p>
<!-- Or you may not actually care (or want to) make an instance of your subclass; you actually want the original type, just with some extra validation done. -->
<p>あるいは、実際にはサブクラスのインスタンスを作成する必要がない(または作成したい)場合もあります。実際には、追加の検証を行うだけで、元の型が必要になります。</p>
<!-- For example, if you were to implement `pydantic.AfterValidator` (see [Adding validation and serialization](#adding-validation-and-serialization)) yourself, you'd do something similar to the following: -->
<p>たとえば、<code>pydantic.AfterValidator</code>(<a href="#adding-validation-and-serialization">Adding validation and serialization</a>を参照)を自分で実装する場合は、次のようなことを行います。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span>

<span class="kn">from</span> <span class="nn">pydantic_core</span> <span class="kn">import</span> <span class="n">CoreSchema</span><span class="p">,</span> <span class="n">core_schema</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">GetCoreSchemaHandler</span>


<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># (1)!</span>
<span class="k">class</span> <span class="nc">MyAfterValidator</span><span class="p">:</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__get_pydantic_core_schema__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">source_type</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">GetCoreSchemaHandler</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CoreSchema</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">no_info_after_validator_function</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">handler</span><span class="p">(</span><span class="n">source_type</span><span class="p">)</span>
        <span class="p">)</span>


<span class="n">Username</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MyAfterValidator</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">)]</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Username</span>


<span class="k">assert</span> <span class="n">Model</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;abc&#39;</span>  <span class="c1"># (2)!</span>
</code></pre></div>
<!-- 1. The `frozen=True` specification makes `MyAfterValidator` hashable. Without this, a union such as `Username | None` will raise an error. -->
<ol>
<li><code>frozen=True</code>の指定は<code>MyAfterValidator</code>をハッシュ可能にします。これがないと、<code>Username None</code>のようなUnionでエラーが発生します。</li>
</ol>
<!-- 2. Notice that type checkers will not complain about assigning `'ABC'` to `Username` like they did in the previous example because they do not consider `Username` to be a distinct type from `str`. -->
<ol>
<li>型チェッカーは、前の例のように<code>Username</code>に<code>'ABC'</code>を割り当てることについて文句を言わないことに注意してください。なぜなら、彼らは<code>Username</code>を<code>str</code>とは別の型と見なしていないからです。</li>
</ol>
<h4 id="handling-third-party-types">Handling third-party types<a class="headerlink" href="#handling-third-party-types" title="Permanent link">&para;</a></h4>
<!-- Another use case for the pattern in the previous section is to handle third party types. -->
<p>前のセクションのパターンのもう1つの使用例は、サード・パーティーのタイプを処理することです。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">pydantic_core</span> <span class="kn">import</span> <span class="n">core_schema</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">GetCoreSchemaHandler</span><span class="p">,</span>
    <span class="n">GetJsonSchemaHandler</span><span class="p">,</span>
    <span class="n">ValidationError</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">pydantic.json_schema</span> <span class="kn">import</span> <span class="n">JsonSchemaValue</span>


<span class="k">class</span> <span class="nc">ThirdPartyType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is meant to represent a type from a third-party library that wasn&#39;t designed with Pydantic</span>
<span class="sd">    integration in mind, and so doesn&#39;t have a `pydantic_core.CoreSchema` or anything.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>


<span class="k">class</span> <span class="nc">_ThirdPartyTypePydanticAnnotation</span><span class="p">:</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_pydantic_core_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">_source_type</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="n">_handler</span><span class="p">:</span> <span class="n">GetCoreSchemaHandler</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">CoreSchema</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        We return a pydantic_core.CoreSchema that behaves in the following ways:</span>

<span class="sd">        * ints will be parsed as `ThirdPartyType` instances with the int as the x attribute</span>
<span class="sd">        * `ThirdPartyType` instances will be parsed as `ThirdPartyType` instances without any changes</span>
<span class="sd">        * Nothing else will pass validation</span>
<span class="sd">        * Serialization will always return just an int</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">validate_from_int</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ThirdPartyType</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">ThirdPartyType</span><span class="p">()</span>
            <span class="n">result</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="n">from_int_schema</span> <span class="o">=</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">chain_schema</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">core_schema</span><span class="o">.</span><span class="n">int_schema</span><span class="p">(),</span>
                <span class="n">core_schema</span><span class="o">.</span><span class="n">no_info_plain_validator_function</span><span class="p">(</span><span class="n">validate_from_int</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">json_or_python_schema</span><span class="p">(</span>
            <span class="n">json_schema</span><span class="o">=</span><span class="n">from_int_schema</span><span class="p">,</span>
            <span class="n">python_schema</span><span class="o">=</span><span class="n">core_schema</span><span class="o">.</span><span class="n">union_schema</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="c1"># check if it&#39;s an instance first before doing any further work</span>
                    <span class="n">core_schema</span><span class="o">.</span><span class="n">is_instance_schema</span><span class="p">(</span><span class="n">ThirdPartyType</span><span class="p">),</span>
                    <span class="n">from_int_schema</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">),</span>
            <span class="n">serialization</span><span class="o">=</span><span class="n">core_schema</span><span class="o">.</span><span class="n">plain_serializer_function_ser_schema</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">instance</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">x</span>
            <span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_pydantic_json_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">_core_schema</span><span class="p">:</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">CoreSchema</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">GetJsonSchemaHandler</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JsonSchemaValue</span><span class="p">:</span>
        <span class="c1"># Use the same schema that would be used for `int`</span>
        <span class="k">return</span> <span class="n">handler</span><span class="p">(</span><span class="n">core_schema</span><span class="o">.</span><span class="n">int_schema</span><span class="p">())</span>


<span class="c1"># We now create an `Annotated` wrapper that we&#39;ll use as the annotation for fields on `BaseModel`s, etc.</span>
<span class="n">PydanticThirdPartyType</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span>
    <span class="n">ThirdPartyType</span><span class="p">,</span> <span class="n">_ThirdPartyTypePydanticAnnotation</span>
<span class="p">]</span>


<span class="c1"># Create a model class that uses this annotation as a field</span>
<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">third_party_type</span><span class="p">:</span> <span class="n">PydanticThirdPartyType</span>


<span class="c1"># Demonstrate that this field is handled correctly, that ints are parsed into `ThirdPartyType`, and that</span>
<span class="c1"># these instances are also &quot;dumped&quot; directly into ints as expected.</span>
<span class="n">m_int</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">third_party_type</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m_int</span><span class="o">.</span><span class="n">third_party_type</span><span class="p">,</span> <span class="n">ThirdPartyType</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">m_int</span><span class="o">.</span><span class="n">third_party_type</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">m_int</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;third_party_type&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

<span class="c1"># Do the same thing where an instance of ThirdPartyType is passed in</span>
<span class="n">instance</span> <span class="o">=</span> <span class="n">ThirdPartyType</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">instance</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span>
<span class="n">instance</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">m_instance</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">third_party_type</span><span class="o">=</span><span class="n">instance</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m_instance</span><span class="o">.</span><span class="n">third_party_type</span><span class="p">,</span> <span class="n">ThirdPartyType</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">m_instance</span><span class="o">.</span><span class="n">third_party_type</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="mi">10</span>
<span class="k">assert</span> <span class="n">m_instance</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;third_party_type&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>

<span class="c1"># Demonstrate that validation errors are raised as expected for invalid inputs</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">(</span><span class="n">third_party_type</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for Model</span>
<span class="sd">    third_party_type.is-instance[ThirdPartyType]</span>
<span class="sd">      Input should be an instance of ThirdPartyType [type=is_instance_of, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    third_party_type.chain[int,function-plain[validate_from_int()]]</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="k">assert</span> <span class="n">Model</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;third_party_type&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Third Party Type&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;integer&#39;</span><span class="p">}</span>
    <span class="p">},</span>
    <span class="s1">&#39;required&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;third_party_type&#39;</span><span class="p">],</span>
    <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Model&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<!-- You can use this approach to e.g. define behavior for Pandas or Numpy types. -->
<p>このアプローチを使用して、たとえばPandasまたはNumpyタイプの動作を定義できます。</p>
<h4 id="using-getpydanticschema-to-reduce-boilerplate">Using <code>GetPydanticSchema</code> to reduce boilerplate<a class="headerlink" href="#using-getpydanticschema-to-reduce-boilerplate" title="Permanent link">&para;</a></h4>
<details class="api">
<summary>API Documentation</summary>
<p><a class="autorefs autorefs-internal" href="../../api/types/#pydantic.types.GetPydanticSchema"><code>pydantic.types.GetPydanticSchema</code></a><br></p>
</details>
<!-- You may notice that the above examples where we create a marker class require a good amount of boilerplate.
For many simple cases you can greatly minimize this by using `pydantic.GetPydanticSchema`: -->
<p>マーカー・クラスを作成する上記の例では、かなりの量の定型文が必要であることにお気付きかもしれません。
多くの単純なケースでは、<code>pydantic.GetPydanticSchema</code>を使用することで、これを大幅に減らすことができます。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic_core</span> <span class="kn">import</span> <span class="n">core_schema</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">GetPydanticSchema</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span>
        <span class="n">GetPydanticSchema</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">tp</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">no_info_after_validator_function</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">handler</span><span class="p">(</span><span class="n">tp</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">),</span>
    <span class="p">]</span>


<span class="k">assert</span> <span class="n">Model</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;ab&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="s1">&#39;abab&#39;</span>
</code></pre></div>
<h4 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h4>
<!-- Let's recap: -->
<p>まとめましょう。</p>
<!-- 1. Pydantic provides high level hooks to customize types via `Annotated` like `AfterValidator` and `Field`. Use these when possible. -->
<ol>
<li>Pydanticは、<code>AfterValidator</code>や<code>Field</code>のような<code>Annotated</code>を介して型をカスタマイズするための高レベルのフックを提供しています。可能であればこれらを使用してください。</li>
</ol>
<!-- 2. Under the hood these use `pydantic-core` to customize validation, and you can hook into that directly using `GetPydanticSchema` or a marker class with `__get_pydantic_core_schema__`. -->
<ol>
<li>内部では<code>pydantic-core</code>を使用して検証をカスタマイズし、<code>GetPydanticSchema</code>または<code>__get_pydantic_core_schema__</code>を使用してマーカークラスを直接フックすることができます。</li>
</ol>
<!-- 3. If you really want a custom type you can implement `__get_pydantic_core_schema__` on the type itself. -->
<ol>
<li>本当にカスタム型が必要な場合は、型自体に<code>__get_pydantic_core_schema__</code>を実装することができます。</li>
</ol>
<h3 id="handling-custom-generic-classes">Handling custom generic classes<a class="headerlink" href="#handling-custom-generic-classes" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><!-- This is an advanced technique that you might not need in the beginning. In most of the cases you will probably be fine with standard Pydantic models. -->
これは、最初は必要のない高度なテクニックです。ほとんどの場合、標準のPydanticモデルで問題ありません。</p>
</div>
<!-- You can use [Generic Classes](https://docs.python.org/3/library/typing.html#typing.Generic) as field types and perform custom validation based on the "type parameters" (or sub-types) with `__get_pydantic_core_schema__`. -->
<p><a href="https://docs.python.org/3/library/typing.html#typing.Generic">Generic Classes</a>をフィールド型として使用し、<code>__get_pydantic_core_schema__</code>で"型パラメータ"(またはサブ型)に基づいてカスタム検証を実行できます。</p>
<!-- If the Generic class that you are using as a sub-type has a classmethod `__get_pydantic_core_schema__`, you don't need to use [`arbitrary_types_allowed`][pydantic.config.ConfigDict.arbitrary_types_allowed] for it to work. -->
<p>サブタイプとして使用しているGenericクラスに<code>__get_pydantic_core_schema__</code>クラスメソッドがある場合、それが動作するために<a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.arbitrary_types_allowed"><code>arbitrary_types_allowed</code></a>を使用する必要はありません。</p>
<!-- Because the `source_type` parameter is not the same as the `cls` parameter, you can use `typing.get_args` (or `typing_extensions.get_args`) to extract the generic parameters. -->
<p><code>source_type</code>パラメータは<code>cls</code>パラメータと同じではないので、<code>typing.get_args</code>(または<code>typing_extensions.get_args</code>)を使用して汎用パラメータを抽出できます。</p>
<!-- Then you can use the `handler` to generate a schema for them by calling `handler.generate_schema`. -->
<p>次に、<code>handler.generate_schema</code>を呼び出して、<code>handler</code>を使用してスキーマを生成します。</p>
<!-- Note that we do not do something like `handler(get_args(source_type)[0])` because we want to generate an unrelated schema for that generic parameter, not one that is influenced by the current context of `Annotated` metadata and such. -->
<p><code>handler(get_args(source_type)[0])</code>のようなことはしないことに注意してください。なぜなら、"注釈付き"メタデータなどの現在のコンテキストに影響されるものではなく、その汎用パラメータに対して無関係なスキーマを生成したいからです。</p>
<!-- This is less important for custom types, but crucial for annotated metadata that modifies schema building. -->
<p>これは、カスタム・タイプではそれほど重要ではありませんが、スキーマ構築を変更する注釈付きメタデータでは重要です。</p>
<div class="language-py highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic_core</span> <span class="kn">import</span> <span class="n">CoreSchema</span><span class="p">,</span> <span class="n">core_schema</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">get_args</span><span class="p">,</span> <span class="n">get_origin</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">GetCoreSchemaHandler</span><span class="p">,</span>
    <span class="n">ValidationError</span><span class="p">,</span>
    <span class="n">ValidatorFunctionWrapHandler</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ItemType</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;ItemType&#39;</span><span class="p">)</span>


<span class="c1"># This is not a pydantic model, it&#39;s an arbitrary generic class</span>
<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Owner</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">ItemType</span><span class="p">]):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">ItemType</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_pydantic_core_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">source_type</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">GetCoreSchemaHandler</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CoreSchema</span><span class="p">:</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">get_origin</span><span class="p">(</span><span class="n">source_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">origin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># used as `x: Owner` without params</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="n">source_type</span>
            <span class="n">item_tp</span> <span class="o">=</span> <span class="n">Any</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">item_tp</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">(</span><span class="n">source_type</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># both calling handler(...) and handler.generate_schema(...)</span>
        <span class="c1"># would work, but prefer the latter for conceptual and consistency reasons</span>
        <span class="n">item_schema</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">generate_schema</span><span class="p">(</span><span class="n">item_tp</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">val_item</span><span class="p">(</span>
            <span class="n">v</span><span class="p">:</span> <span class="n">Owner</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">handler</span><span class="p">:</span> <span class="n">ValidatorFunctionWrapHandler</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Owner</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
            <span class="n">v</span><span class="o">.</span><span class="n">item</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">item</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">v</span>

        <span class="n">python_schema</span> <span class="o">=</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">chain_schema</span><span class="p">(</span>
            <span class="c1"># `chain_schema` means do the following steps in order:</span>
            <span class="p">[</span>
                <span class="c1"># Ensure the value is an instance of Owner</span>
                <span class="n">core_schema</span><span class="o">.</span><span class="n">is_instance_schema</span><span class="p">(</span><span class="bp">cls</span><span class="p">),</span>
                <span class="c1"># Use the item_schema to validate `items`</span>
                <span class="n">core_schema</span><span class="o">.</span><span class="n">no_info_wrap_validator_function</span><span class="p">(</span>
                    <span class="n">val_item</span><span class="p">,</span> <span class="n">item_schema</span>
                <span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">json_or_python_schema</span><span class="p">(</span>
            <span class="c1"># for JSON accept an object with name and item keys</span>
            <span class="n">json_schema</span><span class="o">=</span><span class="n">core_schema</span><span class="o">.</span><span class="n">chain_schema</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">core_schema</span><span class="o">.</span><span class="n">typed_dict_schema</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">typed_dict_field</span><span class="p">(</span>
                                <span class="n">core_schema</span><span class="o">.</span><span class="n">str_schema</span><span class="p">()</span>
                            <span class="p">),</span>
                            <span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">typed_dict_field</span><span class="p">(</span><span class="n">item_schema</span><span class="p">),</span>
                        <span class="p">}</span>
                    <span class="p">),</span>
                    <span class="c1"># after validating the json data convert it to python</span>
                    <span class="n">core_schema</span><span class="o">.</span><span class="n">no_info_before_validator_function</span><span class="p">(</span>
                        <span class="k">lambda</span> <span class="n">data</span><span class="p">:</span> <span class="n">Owner</span><span class="p">(</span>
                            <span class="n">name</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">item</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span>
                        <span class="p">),</span>
                        <span class="c1"># note that we re-use the same schema here as below</span>
                        <span class="n">python_schema</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">]</span>
            <span class="p">),</span>
            <span class="n">python_schema</span><span class="o">=</span><span class="n">python_schema</span><span class="p">,</span>
        <span class="p">)</span>


<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">color</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">House</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">rooms</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">car_owner</span><span class="p">:</span> <span class="n">Owner</span><span class="p">[</span><span class="n">Car</span><span class="p">]</span>
    <span class="n">home_owner</span><span class="p">:</span> <span class="n">Owner</span><span class="p">[</span><span class="n">House</span><span class="p">]</span>


<span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span>
    <span class="n">car_owner</span><span class="o">=</span><span class="n">Owner</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">Car</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)),</span>
    <span class="n">home_owner</span><span class="o">=</span><span class="n">Owner</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">House</span><span class="p">(</span><span class="n">rooms</span><span class="o">=</span><span class="mi">3</span><span class="p">)),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">car_owner=Owner(name=&#39;John&#39;, item=Car(color=&#39;black&#39;)) home_owner=Owner(name=&#39;James&#39;, item=House(rooms=3))</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># If the values of the sub-types are invalid, we get an error</span>
    <span class="n">Model</span><span class="p">(</span>
        <span class="n">car_owner</span><span class="o">=</span><span class="n">Owner</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">House</span><span class="p">(</span><span class="n">rooms</span><span class="o">=</span><span class="mi">3</span><span class="p">)),</span>
        <span class="n">home_owner</span><span class="o">=</span><span class="n">Owner</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="n">Car</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)),</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for Model</span>
<span class="sd">    wine</span>
<span class="sd">      Input should be a valid number, unable to parse string as a number [type=float_parsing, input_value=&#39;Kinda good&#39;, input_type=str]</span>
<span class="sd">    cheese</span>
<span class="sd">      Input should be a valid boolean, unable to interpret input [type=bool_parsing, input_value=&#39;yeah&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="c1"># Similarly with JSON</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span>
    <span class="s1">&#39;{&quot;car_owner&quot;:{&quot;name&quot;:&quot;John&quot;,&quot;item&quot;:{&quot;color&quot;:&quot;black&quot;}},&quot;home_owner&quot;:{&quot;name&quot;:&quot;James&quot;,&quot;item&quot;:{&quot;rooms&quot;:3}}}&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">car_owner=Owner(name=&#39;John&#39;, item=Car(color=&#39;black&#39;)) home_owner=Owner(name=&#39;James&#39;, item=House(rooms=3))</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span>
        <span class="s1">&#39;{&quot;car_owner&quot;:{&quot;name&quot;:&quot;John&quot;,&quot;item&quot;:{&quot;rooms&quot;:3}},&quot;home_owner&quot;:{&quot;name&quot;:&quot;James&quot;,&quot;item&quot;:{&quot;color&quot;:&quot;black&quot;}}}&#39;</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for Model</span>
<span class="sd">    car_owner.item.color</span>
<span class="sd">      Field required [type=missing, input_value={&#39;rooms&#39;: 3}, input_type=dict]</span>
<span class="sd">    home_owner.item.rooms</span>
<span class="sd">      Field required [type=missing, input_value={&#39;color&#39;: &#39;black&#39;}, input_type=dict]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h4 id="generic-containers">Generic containers<a class="headerlink" href="#generic-containers" title="Permanent link">&para;</a></h4>
<!-- The same idea can be applied to create generic container types, like a custom `Sequence` type: -->
<p>同じ考え方を適用して、カスタムの<code>Sequence</code>型のような汎用コンテナ型を作成することもできます。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span> <span class="nn">pydantic_core</span> <span class="kn">import</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="n">core_schema</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">get_args</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">GetCoreSchemaHandler</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">MySequence</span><span class="p">(</span><span class="n">Sequence</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">v</span> <span class="o">=</span> <span class="n">v</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_pydantic_core_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">GetCoreSchemaHandler</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">CoreSchema</span><span class="p">:</span>
        <span class="n">instance_schema</span> <span class="o">=</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">is_instance_schema</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

        <span class="n">args</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="c1"># replace the type and rely on Pydantic to generate the right schema</span>
            <span class="c1"># for `Sequence`</span>
            <span class="n">sequence_t_schema</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">generate_schema</span><span class="p">(</span><span class="n">Sequence</span><span class="p">[</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sequence_t_schema</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">generate_schema</span><span class="p">(</span><span class="n">Sequence</span><span class="p">)</span>

        <span class="n">non_instance_schema</span> <span class="o">=</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">no_info_after_validator_function</span><span class="p">(</span>
            <span class="n">MySequence</span><span class="p">,</span> <span class="n">sequence_t_schema</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">union_schema</span><span class="p">([</span><span class="n">instance_schema</span><span class="p">,</span> <span class="n">non_instance_schema</span><span class="p">])</span>


<span class="k">class</span> <span class="nc">M</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">validate_default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">s1</span><span class="p">:</span> <span class="n">MySequence</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">]</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">M</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; s1=&lt;__main__.MySequence object at 0x0123456789ab&gt;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">s1</span><span class="o">.</span><span class="n">v</span><span class="p">)</span>
<span class="c1">#&gt; [3]</span>


<span class="k">class</span> <span class="nc">M</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">s1</span><span class="p">:</span> <span class="n">MySequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="n">M</span><span class="p">(</span><span class="n">s1</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">M</span><span class="p">(</span><span class="n">s1</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for M</span>
<span class="sd">    s1.is-instance[MySequence]</span>
<span class="sd">      Input should be an instance of MySequence [type=is_instance_of, input_value=[&#39;a&#39;], input_type=list]</span>
<span class="sd">    s1.function-after[MySequence(), json-or-python[json=list[int],python=chain[is-instance[Sequence],function-wrap[sequence_validator()]]]].0</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="access-to-field-name">Access to field name<a class="headerlink" href="#access-to-field-name" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><!-- This was not possible with Pydantic V2 to V2.3, it was <a href="https://github.com/pydantic/pydantic/pull/7542">re-added</a> in Pydantic V2.4. -->
これはPydantic V2からV2.3では不可能でしたが、Pydantic V2.4で[再追加]されました。(https://github.com/pydantic/pydantic/pull/7542)</p>
</div>
<!-- As of Pydantic V2.4, you can access the field name via the `handler.field_name` within `__get_pydantic_core_schema__` and thereby set the field name which will be available from `info.field_name`. -->
<p>Pydantic V2.4では、<code>__get_pydantic_core_schema__</code>内の<code>handler.field_name</code>を介してフィールド名にアクセスし、<code>info.field_name</code>から利用可能なフィールド名を設定することができます。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">pydantic_core</span> <span class="kn">import</span> <span class="n">core_schema</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">GetCoreSchemaHandler</span><span class="p">,</span> <span class="n">ValidationInfo</span>


<span class="k">class</span> <span class="nc">CustomType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Custom type that stores the field it was used in.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">field_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span> <span class="o">=</span> <span class="n">field_name</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;CustomType&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="si">!r}</span><span class="s1">&gt;&#39;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ValidationInfo</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_pydantic_core_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">source_type</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">GetCoreSchemaHandler</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">CoreSchema</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">core_schema</span><span class="o">.</span><span class="n">with_info_after_validator_function</span><span class="p">(</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">validate</span><span class="p">,</span> <span class="n">handler</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span> <span class="n">field_name</span><span class="o">=</span><span class="n">handler</span><span class="o">.</span><span class="n">field_name</span>
        <span class="p">)</span>


<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">my_field</span><span class="p">:</span> <span class="n">CustomType</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">(</span><span class="n">my_field</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">my_field</span><span class="p">)</span>
<span class="c1">#&gt; CustomType&lt;1 &#39;my_field&#39;&gt;</span>
</code></pre></div>
<!-- You can also access `field_name` from the markers used with `Annotated`, like [`AfterValidator`][pydantic.functional_validators.AfterValidator]. -->
<p><a class="autorefs autorefs-internal" href="../../api/functional_validators/#pydantic.functional_validators.AfterValidator"><code>AfterValidator</code></a>のように、<code>Annotated</code>で使用されるマーカーから<code>field_name</code>にアクセスすることもできます。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AfterValidator</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationInfo</span>


<span class="k">def</span> <span class="nf">my_validators</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ValidationInfo</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">field_name</span><span class="si">!r}</span><span class="s1">&gt;&#39;</span>


<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">my_field</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">AfterValidator</span><span class="p">(</span><span class="n">my_validators</span><span class="p">)]</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">(</span><span class="n">my_field</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">my_field</span><span class="p">)</span>
<span class="c1">#&gt; &lt;1 &#39;my_field&#39;&gt;</span>
</code></pre></div>












                
<script src="/flarelytics/client.js"></script>
    <script>
    window.mkdocs_run_deps = ["pydantic==2.9.0a1", "pydantic-core==2.20.1", "pydantic-extra-types==2.9.0"]
    </script>

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "navigation.tabs", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../extra/feedback.js"></script>
      
        <script src="../../extra/fluff.js"></script>
      
        <script src="https://samuelcolvin.github.io/mkdocs-run-code/run_code_main.js"></script>
      
    
  </body>
</html>